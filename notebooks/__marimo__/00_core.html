<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/gradient-yHQUC_QB.png" as="image" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/noise-60BoTA8O.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/Lora-VariableFont_wght-B2ootaw-.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/PTSans-Regular-CxL0S8W7.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/PTSans-Bold-D9fedIX3.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/FiraMono-Regular-BTCkDNvf.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/FiraMono-Medium-DU3aDxX5.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/FiraMono-Bold-CLVRCuM9.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/apple-touch-icon.png" />
    <link rel="manifest" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        var scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          // Guard against race condition where iframe isn't ready
          if (!obj.contentWindow?.document?.documentElement) {
            return;
          }
          var element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          var hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          var newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((entries) => {
          setHeight();
        });
        // Only observe if iframe content is ready
        if (obj.contentWindow?.document?.body) {
          resizeObserver.observe(obj.contentWindow.document.body);
        }
      }
    </script>
    <marimo-filename hidden>00_core.py</marimo-filename>
    <!-- TODO(Trevor): Legacy, required by VS Code plugin. Remove when plugin is updated (see marimo/server/_templates/template.py) -->
    <marimo-version data-version="{{ version }}" hidden></marimo-version>
    <marimo-user-config data-config="{{ user_config }}" hidden></marimo-user-config>
    <marimo-server-token data-token="{{ server_token }}" hidden></marimo-server-token>
    <!-- /TODO -->
    <title></title>
    <script type="module" crossorigin crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/index-DppOWifW.js"></script>
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/preload-helper-BpItL31i.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/chunk-DZLz74EQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/react-BcIddLXZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/jsx-runtime-DvsdsEjx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useEventListener-C5BS4xuN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/react-dom-D6bRRS5R.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/tslib.es6-sakIzgHM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/Combination-DR4iFoRS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/cn-C5VTNYKf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/menu-items-DOc2hwO2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/hotkeys-Lbk6RHir.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/button-nRVaalxL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-Cei_8ikW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/createLucideIcon-DA8ZBm4D.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/check-BUgsJwxM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/select-DJ0A_oCR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/accordion-BlX0p_kD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/chevron-right-WxQzIptp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dropdown-menu-1SGi7wHR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/tooltip-BQKXsEoT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_Uint8Array-D5Z9rM2X.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_getTag-CVRrQL_Q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_baseIsEqual-BF8660ot.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/jotai-DDOP7CKM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/invariant-DPGusy7Z.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/isArrayLikeObject-DKyJYtr8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/merge-BgA7kxZb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/zod-U2NFpcFA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/utils-DnJCRgaX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/requests-D3Z6okhb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/once-Co7xi2Ip.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/toDate-sQp07c5U.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_baseSlice-B27Cqkm6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_arrayMap-DQI2GUNb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/isSymbol-xTSywenE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/toString-CBnct2wx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_hasUnicode-CPHpt5EV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/upperFirst-DOlTOwhh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/capitalize-CkrfIDeS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/ai-model-dropdown-CtXN4x7s.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/badge-CFi0nvIx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/use-toast-BiL_AQz9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/constants-DIZnpo2K.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/Deferred-zIiWPYX3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/config-BjdJmdrN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/uuid-Dj56ryH_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/key-DWQdrH_J.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/connection-DnLUBy9M.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useLifecycle-CuZnZLRp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useNonce-DECX9FAH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useTheme-BMknLtnH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/capabilities-DdXtcIOa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/createReducer-80xvKyHq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-BPcMnGQn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-C13bkrcz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-pZAIwcZo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-Ba10OKR3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-D-CsU-_R.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-DBeOBCHw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-DZNGKufD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-ClBFnEcy.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-Q3T6mWQ0.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/stex-LEaAsvUb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_baseProperty-CIKnF2iY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/toNumber-CTOPJrpu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/now-B6JN1xKT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/debounce-70y9MzDK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/toInteger-Bor4StOs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/type-Cpth3na1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/marked.esm-DCf1d_lA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/main-CD7jouuS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/cells-B6jS0AIj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/kbd-CZFOBQmt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/renderShortcut-GP8-boTA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useEvent-d8iQXgui.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useDeleteCell-BSTJX7_O.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/icons-j8BJ30se.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useRunCells-uzADaSkg.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/alert-dialog-DM1h8RhU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dialog-CEqVOFHc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useDebounce-BDmbJDbT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/numbers-Hxwz5HuE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/context-BMtIGcq8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useNumberFormatter-DynX1ecE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/input-BPw9p_8N.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/ImperativeModal-CmOSTULR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/cell-link-D9FNaXGs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/spinner-FaMZ5NTl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/datasource-CzmVjgw7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/add-missing-import-BJfCTctT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/ansi_up-HmF1kpkv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/blob-COEMBEnt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dom-DaBOvHqM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/errors-5BnWGoql.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/extends-C-tvimwN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/objectWithoutPropertiesLoose-DDvr5cHq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/esm-ChGlv0th.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/es-Bvr8zSR1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/play-BOSd7i5f.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/sparkles-CyIU0Xy_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/shim-Bk8nzKPV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/add-cell-with-ai-DsqPH829.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/ErrorBoundary-7JQlouA1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/alert-CBA2m-3_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/links-DCKgyNFq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/state-CMOQfD_O.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/MarimoErrorOutput-okxire5Y.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/copy-DAqXDCGN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/copy-CWjpIcfl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/copy-icon-5DWltDxB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/mode-BdfAcJv1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/purify.es-D83HMRRD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/RenderHTML-CUSvJfTV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/emotion-is-prop-valid.esm-BgfwcIY_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/with-selector-B_mpCvmo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/delay-mount-BvJt70jv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_arrayReduce-DDpPg0Qh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/startCase-DOk4LYuA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/strings-DSmr2a_p.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/command-BqJiTpIC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/popover-BM0PuIZH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/table-mB7CFPse.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/tabs-CwHEUPW2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useAsyncData-CsBCDF11.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useIframeCapabilities-w06PAeNM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/error-banner-RIuTelB8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/defaultLocale-DEOAvdte.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/precisionRound-BIK1W-Pu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/defaultLocale-Ca1Ci3kv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/vega-loader.browser.module-B-icPEAc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/loader-g7OmFu5O.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/formats-Q84dqqph.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/en-US-CUvYxyLA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/isValid-BcG0nMKW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dates-CSR6KU2P.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/download-C6eeMKzw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/maps-C9sj23qe.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useDateFormatter-B6Y_k710.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/range-CPekNdzi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/list-filter-pQvV7yyl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/columns-BnRpK2Sj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/focus-NSCHuycv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useInstallPackage-RVnGhNcD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/column-preview-ChwjCH-u.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useAddCell-BcZiZJfL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/toggle-JGbyXN73.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useHotkey-BxEtU0rE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/globals-CqGdf2Mu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/share-H7Fnb7dX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-CIi_Q6L4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/memoize-CAcr7Wct.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_toKey-Di_xoXjD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_baseSet-BlAtwuhp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/utilities.esm-BkSvpyq-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/floating-outline-CUjFOfng.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/eye-off-Dyzb-Ibf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/plus-CmzxQYgQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/readonly-python-code-CViHfG5I.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/file-video-camera-DxgiJa0r.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/file-text-Cng4_CT2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/file-CEq0dl8f.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/types-BT_Kor11.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/label-6DIjJ2sP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/form-b4A0F_Lr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/textarea-CuEW04Ze.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/circle-x-DGA84U3r.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/refresh-ccw-q_wAM7pz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/trash-2-DtsdG6Pf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/form-CDF8FirJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/field-XT1d7zKu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/switch-CEMEIJww.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useBoolean-B-LYLCcg.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useDeepCompareMemoize-sbXO3Z1K.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/LazyAnyLanguageCodeMirror-PGusm5pp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/types-DZTeU1k8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/prop-types-BdSU55sL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/es-xBjOufca.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/VisuallyHidden-DioJ3bf_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_baseFlatten-8yEsQJi9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/get-BYzWDFJH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/hasIn-WaG0qjy7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_basePickBy-W59-WIft.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/pick-Ck1LTYI3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/square-CF_LAdAS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/chart-no-axes-column-CQryi5Zm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/download-B7wrfIWv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/globe-BwmpFahE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/send-BWOx6HDI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/refresh-cw-9lSVG80g.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/settings-BR_jkuLF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/square-function-DVIoLDaU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/bundle.esm-DY-5mqxG.js">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/cells-BvrC6Bsv.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/columns-j3zW187k.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/index-B8ySTPp_.css">
  
<script data-marimo="true">
    window.__MARIMO_STATIC__ = {};
    window.__MARIMO_STATIC__.files = {};
</script>
</head>
  <body>
    <div id="root"></div>
    <!-- This is a portal for the data editor to render in -->
    <div id="portal" data-testid="glide-portal" style="position: fixed; left: 0; top: 0; z-index: 9999"></div>
    <script data-marimo="true">
      window.__MARIMO_MOUNT_CONFIG__ = {
            "filename": "00_core.py",
            "mode": "read",
            "version": "0.17.2",
            "serverToken": "static",
            "config": {"ai": {"models": {"custom_models": [], "displayed_models": []}}, "completion": {"activate_on_typing": true, "copilot": false}, "diagnostics": {"sql_linter": true}, "display": {"cell_output": "above", "code_editor_font_size": 14, "dataframes": "rich", "default_table_max_columns": 50, "default_table_page_size": 10, "default_width": "full", "reference_highlighting": false, "theme": "system"}, "formatting": {"line_length": 79}, "keymap": {"overrides": {}, "preset": "default"}, "language_servers": {"pylsp": {"enable_flake8": false, "enable_mypy": true, "enable_pydocstyle": false, "enable_pyflakes": false, "enable_pylint": false, "enable_ruff": true, "enabled": false}}, "mcp": {"mcpServers": {}, "presets": []}, "package_management": {"manager": "uv"}, "runtime": {"auto_instantiate": false, "auto_reload": "off", "default_sql_output": "auto", "on_cell_change": "autorun", "output_max_bytes": 8000000, "reactive_tests": true, "std_stream_max_bytes": 1000000, "watcher_on_save": "lazy"}, "save": {"autosave": "after_delay", "autosave_delay": 1000, "format_on_save": false}, "server": {"browser": "default", "follow_symlink": false}, "snippets": {"custom_paths": [], "include_default_snippets": true}},
            "configOverrides": {},
            "appConfig": {"app_title": "", "auto_download": ["html"], "sql_output": "auto", "width": "columns"},
            "view": {"showAppCode": true},
            "notebook": {"cells": [{"code": "__version__ = \"0.0.1\"\n__package_name__ = \"m-dev\"\n__description__ = \"Build and publish python packages from marimo notebooks\"\n__author__ = \"Deufel \u003CMDeufel13@gmail.com\u003E\"\n__license__ = \"MIT\"\n\nimport re\nimport ast\nimport tomllib\nimport copy\nimport os\nimport tempfile\nimport shutil\nimport inspect\nimport sys\nimport importlib\nimport io\nimport zipfile\n\nfrom pathlib import Path\nfrom importlib.metadata import packages_distributions\nfrom textwrap import dedent, indent\nfrom typing import Callable, Literal, Dict, Any, Tuple\n\nfrom tokenize import tokenize, COMMENT\nfrom textwrap import dedent\n\nfrom mistletoe import markdown\n\nimport numpy as np", "code_hash": "edf4247fbb816d0006be60158ad94ac4", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "setup", "name": "setup"}, {"code": "mo.md(\n    rf\"\"\"\n#| README\n\n\n# m-dev\n\nVersion: {__version__}\n\n\n{todo_checklist}\n\n**Build Python packages from a single marimo notebook.**\n\nVersion: `0.0.1` | **Work in progress**\n\n---\n\n## What it does\n\n`m-dev` turns **one marimo notebook** into a **clean, installable Python package**.\n\n- Exports **self-contained functions/classes** (auto-detected via marimo\u2019s `@function` / `@class_definition`)\n- Generates `pyproject.toml` from `/// script` and `app.setup`\n- Tracks **real dependencies** using marimo + UV in `--sandbox` mode\n- Copies `#| readme` cell \u2192 `README.md`\n- Builds docstrings from `#| param` comments (nbdev-style)\n- Final package: **marimo-free, PyPI-ready**\n\nYour notebook is your **IDE, test runner, demo, and source of truth**.\n\n---\n\n## Problems it solves\n\n| Problem | How `m-dev` helps |\n|--------|------------------|\n| \"I deleted a cell and didn\u2019t notice\" | With marimo, **downstream cells break immediately** \u2014 you *can\u2019t* miss it |\n| \"I don\u2019t know what packages I need\" | marimo + UV in `--sandbox` **tracks every import** and suggests missing ones |\n| \"My package has wrong/outdated deps\" | Only **deps from `app.setup` cell** go into `pyproject.toml` \u2014 versions pulled from **current UV environment** |\n| \"Jupyter execution order is fragile\" | marimo runs via **DAG** \u2014 no hidden state, no out-of-order surprises |\n\n---\n\n## How it works\n\n1. Write in a marimo notebook:\n    - TODO Build an init CLI\n2. Run in a Sandbox (required for accurate dependency tracking)\n    - uvx marimo edit --sandbox mypkg.py\n3. Build the Package\n   ```python\n    import m_dev (need  anew name wont let me use this.. ?)\n    m_dev.build(\"mypkg.py\", \"dist/\")\n    ```\n4. Output\n   ```bash\n    dist/\n    \u251c\u2500\u2500 src/mypkg/\n    \u2502   \u251c\u2500\u2500 __init__.py\n    \u2502   \u2514\u2500\u2500 core.py\n    \u251c\u2500\u2500 pyproject.toml\n    \u2514\u2500\u2500 README.md\n    ```\n5. install\n    ```python\n    pip install dist/mypkg-0.1.0.tar.gz\n    ```\n\n## Design choices\n\n - No #| export needed \u2192 Exports auto-detected from marimo decorators via AST\n - Self-containment via marimo\u2019s DAG \u2192 If a function uses a variable from another cell, it won\u2019t export\n - Dependencies = only what\u2019s in app.setup \u2192 Version numbers pulled from current UV lockfile \u2192 tests run on exact versions that ship\n - Unused imports? Still require manual cleanup \u2192 Not perfect, but: if you delete all deps, marimo detects missing imports and prompts to install\n - Testing stays in notebook \u2192 Use marimo\u2019s built-in pytest support \u2014 runs live, never exported\n\"\"\"\n)", "code_hash": "efc9a49425214264de14e2ea4ce62313", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Hbol", "name": "_"}, {"code": "", "code_hash": null, "config": {"column": null, "disabled": false, "hide_code": false}, "id": "MJUe", "name": "_"}, {"code": "mo.md(r\"\"\"## Development Packages\"\"\")", "code_hash": "2e2072a45e51ece6702f3fb686466459", "config": {"column": 1, "disabled": false, "hide_code": true}, "id": "vblA", "name": "_"}, {"code": "import marimo as mo\nimport pytest\nfrom sklearn.model_selection import train_test_split #allows us to test imports", "code_hash": "913b863a99190032070367acb7f1475c", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "bkHC", "name": "_"}, {"code": "mo.md(r\"\"\"## Utilities\"\"\")", "code_hash": "bab72832b3cc74e8da4b8fa4b57d056a", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "lEQa", "name": "_"}, {"code": "class PEP723Parser:\n    \"a simple parser also a bit of a test to ensure that classes are parsed correctlly\"\n    REGEX = r'(?m)^# /// (?P\u003Ctype\u003E[a-zA-Z0-9-]+)$\\s(?P\u003Ccontent\u003E(^#(| .*)$\\s)+)^# ///$'\n    @staticmethod\n    def extract_content(match):\n        '''Extract TOML content from a PEP 723 metadata block match'''\n        content = ''.join(\n            line[2:] if line.startswith('# ') else line[1:]\n            for line in match.group('content').splitlines(keepends=True)\n        )\n        return content", "code_hash": "14e0a22eb28dc742d8277ed3473301b2", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "PKri", "name": "*PEP723Parser"}, {"code": "def get_package_name(\n    module_name: str  # Import module name (e.g., 'sklearn', 'bs4')\n) -\u003E str:             # PyPI package name (e.g., 'scikit-learn', 'beautifulsoup4')\n    \"Map import module name to PyPI package name\"\n    pkg_map = packages_distributions()\n    if module_name in pkg_map: return pkg_map[module_name][0]\n    return module_name", "code_hash": "2cd9d91fb3db7608b196b3bc93fc72a2", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Xref", "name": "*get_package_name"}, {"code": "def is_marimo_export_decorator(\n    decorator # the decorator that marimo attached to the cell\n) -\u003E bool:    # True if the function or cell is reusable - should match marimos detection\n    \"Check if decorator is app.function or app.class_definition (with or without args)\"\n    # If it's a call like @app.function(hide_code=True), check the func part\n    if isinstance(decorator, ast.Call):\n        decorator_name = ast.unparse(decorator.func)\n    else:\n        # Simple decorator like @app.function\n        decorator_name = ast.unparse(decorator)\n\n    return decorator_name in ['app.function', 'app.class_definition']", "code_hash": "3e60bdb851fff8e16a959bcf67c7b268", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "SFPL", "name": "*is_marimo_export_decorator"}, {"code": "mo.md(r\"\"\"## Validation\"\"\")", "code_hash": "c1f80b168bf137f22880c69346ac8cf2", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "BYtC", "name": "_"}, {"code": "def validate_setup_metadata(\n    setup_metadata: dict  # Package metadata from setup cell\n) -\u003E None:                # Raises ValueError if invalid\n    \"Validate that required metadata keys exist and have valid values for package generation\"\n\n    required = ['__package_name__', '__version__', '__description__', '__author__', '__license__']\n    missing = [k for k in required if k not in setup_metadata]\n    if missing: raise ValueError(f\"Setup cell missing required metadata: {', '.join(missing)}\\n\\nAdd these to your setup cell:\\n\" + '\\n'.join([f\"    {k} = '...'\" for k in missing]))\n    pkg_name = setup_metadata['__package_name__']\n    if not pkg_name or not pkg_name.strip(): raise ValueError(\"__package_name__ cannot be empty\")\n    if not pkg_name.replace('-', '').replace('_', '').isalnum(): raise ValueError(f\"__package_name__ '{pkg_name}' must contain only letters, numbers, hyphens, and underscores\")\n    version = setup_metadata['__version__']\n    if not version or not version.strip(): raise ValueError(\"__version__ cannot be empty\")\n    desc = setup_metadata['__description__']\n    if not desc or not desc.strip(): raise ValueError(\"__description__ cannot be empty\")\n    author = setup_metadata['__author__']\n    if not author or not author.strip(): raise ValueError(\"__author__ cannot be empty\")\n    if '\u003C' not in author or '\u003E' not in author: raise ValueError(\"__author__ must be in format 'Name \u003Cemail@example.com\u003E'\")\n    email_part = author.split('\u003C')[1].split('\u003E')[0].strip()\n    if not email_part or '@' not in email_part: raise ValueError(f\"__author__ email '{email_part}' is not valid\")\n    license_val = setup_metadata['__license__']\n    if not license_val or not license_val.strip(): raise ValueError(\"__license__ cannot be empty\")", "code_hash": "44281a305f71e85909de138e8d09f4fc", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "RGSE", "name": "*validate_setup_metadata"}, {"code": "def validate_script_metadata(\n    script_metadata: dict # metadata from script tag that is injected by marimo (must be running in sandbox mode) \n) -\u003E None:                # Raises ValueError if invalid\n    \"Validate script metadata has required fields for package generation\"\n\n    if not script_metadata: raise ValueError(\"No PEP 723 script metadata found. Run notebook with --sandbox flag to generate it.\")\n    if 'requires-python' not in script_metadata: raise ValueError(\"Script metadata missing 'requires-python'. This should be auto-generated by marimo.\")\n    if 'dependencies' not in script_metadata: raise ValueError(\"Script metadata missing 'dependencies'. This should be auto-generated by marimo.\")", "code_hash": "bdd3f5f294d3b60e923c11705a7fc5c4", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Kclp", "name": "*validate_script_metadata"}, {"code": "mo.md(r\"\"\"## Extraction\"\"\")", "code_hash": "46a5a54695ebe7206884441297cc4359", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "emfo", "name": "_"}, {"code": "def extract_script_metadata(\n    notebook_path: str  # Path to the marimo notebook file\n) -\u003E dict:              # Dictionary containing requires-python and dependencies\n    \"Extract PEP 723 script metadata from marimo notebook header\"\n\n    with open(notebook_path) as f:\n        script = f.read()\n\n    matches = [m for m in re.finditer(PEP723Parser.REGEX, script) if m.group('type') == 'script']\n\n    if len(matches) \u003E 1:\n        raise ValueError('Multiple script blocks found')\n    elif len(matches) == 1:\n        content = PEP723Parser.extract_content(matches[0])\n        return tomllib.loads(content)\n    else:\n        return {}", "code_hash": "7648af2be938e06ea2295dc34905750b", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Hstk", "name": "*extract_script_metadata"}, {"code": "def extract_exports(\n    notebook_path: str  # Notebook path / name\n) -\u003E tuple:             # Tuple contaning (setup_metadata, setup_imports, setup_packages, exports)\n    \"Extract metadata, imports, and exportable functions/classes from marimo notebook\"\n    source_code = Path(notebook_path).read_text()\n\n    tree = ast.parse(source_code)\n    setup_metadata, setup_imports, setup_packages, exports = ({}, [], [], [])\n\n    for node in tree.body:\n        if isinstance(node, ast.With):\n            for stmt in node.body:\n                if isinstance(stmt, ast.Assign):\n                    setup_metadata[stmt.targets[0].id] = ast.literal_eval(stmt.value)\n                elif isinstance(stmt, (ast.Import, ast.ImportFrom)):\n                    setup_imports.append(ast.unparse(stmt))\n                    if isinstance(stmt, ast.Import):\n                        for alias in stmt.names:\n                            setup_packages.append(alias.name)\n                    elif isinstance(stmt, ast.ImportFrom):\n                        setup_packages.append(stmt.module.split('.')[0])\n\n        elif isinstance(node, (ast.FunctionDef, ast.ClassDef)):\n            if any(is_marimo_export_decorator(d) for d in node.decorator_list):\n                if not node.name.startswith('test_'):\n                    # Extract original source with comments\n                    original_source = ast.get_source_segment(source_code, node)\n\n                    # Remove the marimo decorators from the source\n                    lines = original_source.split('\\n')\n                    filtered_lines = []\n                    for line in lines:\n                        stripped = line.strip()\n                        if not (stripped.startswith('@app.function') or \n                                stripped.startswith('@app.class_definition')):\n                            filtered_lines.append(line)\n\n                    exports.append('\\n'.join(filtered_lines))\n\n    return (setup_metadata, setup_imports, setup_packages, exports)", "code_hash": "79aaa27dff7fbaad4c04f026a8839f9a", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "nWHF", "name": "*extract_exports"}, {"code": "mo.md(r\"\"\"## Write Files\"\"\")", "code_hash": "a2d5a995878c531f9c5626ba88966ee4", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "iLit", "name": "_"}, {"code": "def generate_pyproject_toml(\n    setup_metadata: dict,         # package metadata from setup cell \n    script_metadata: dict,        # metadata from /// script block \n    setup_packages: list,         # Package Dependencies; inner join from script and setup \n    output_file='pyproject.toml'  # Path for output file\n) -\u003E str:                         # Path to written file\n    \"Generate pyproject.toml from notebook using ///script block and setup cell\"\n\n    validate_setup_metadata(setup_metadata)\n    readme_line = 'readme = \"README.md\"' if Path('README.md').exists() else ''\n    pkg_names = [get_package_name(pkg) for pkg in setup_packages]\n    prod_deps = [dep for dep in script_metadata['dependencies'] if any((dep.split('==')[0].strip() == pkg for pkg in pkg_names))]\n    toml_content = f'''[build-system]\\nrequires = [\"setuptools\u003E=45\", \"wheel\"]\\nbuild-backend = \"setuptools.build_meta\"\\n\\n[project]\\n{readme_line}\\nname = \"{setup_metadata['__package_name__']}\"\\nversion = \"{setup_metadata['__version__']}\"\\ndescription = \"{setup_metadata['__description__']}\"\\nauthors = [\\n    {{name = \"{setup_metadata['__author__'].split('\u003C')[0].strip()}\", email = \"{setup_metadata['__author__'].split('\u003C')[1].strip('\u003E')}\"}},\\n]\\nlicense = {{text = \"{setup_metadata['__license__']}\"}}\\nrequires-python = \"{script_metadata['requires-python']}\"\\ndependencies = {prod_deps}\\n'''\n    Path(output_file).write_text(toml_content)\n    return output_file", "code_hash": "d06a9835f2c3d6e20f0ceea21089669d", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "ZHCJ", "name": "*generate_pyproject_toml"}, {"code": "def write_module(\n    setup_imports: list, # Import statements from setup cell\n    exports: list,       # Exported function/class definitions\n    output_file: str     # Path for output Python module file\n) -\u003E str:                # Path to written file\n    \"Write Python module file with imports and exported code\"\n\n    with Path(output_file).open('w') as f:\n        for imp in setup_imports: f.write(imp + '\\n')\n        f.write('\\n')\n        for export in exports: f.write(export + '\\n\\n')\n    return output_file", "code_hash": "3c11be3ccfb733eb2e259b3078283b17", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "ROlb", "name": "*write_module"}, {"code": "def process_exports(\n    exports: list,        # List of exported function/class source strings\n    docstring_style: str  # Target docstring style: 'google', 'numpy', or 'nbdev'\n) -\u003E list:                # List of processed exports\n    \"Process exports list, reformatting docstrings if needed\"\n    if docstring_style == 'nbdev':\n        return exports  # No processing needed\n\n    processed = []\n    for export in exports:\n        reformatted = reformat_function_docstring(export, docstring_style)\n        processed.append(reformatted)\n\n    return processed", "code_hash": "89cd927366f3f837309c34a5ee073ee8", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "qnkX", "name": "*process_exports"}, {"code": "mo.md(r\"\"\"## Readme Extraction\"\"\")", "code_hash": "dd12d2d87bf85b91c5b05e7affe2273c", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "TqIu", "name": "_"}, {"code": "def extract_readme(\n    notebook_path: str,      # Path to the marimo notebook file\n    output_dir: str,         # Directory where README.md will be written\n    setup_metadata: dict     # Setup cell metadata for f-string substitution\n) -\u003E str:                    # Path to written README.md file, or empty string if no readme cell found\n    \"Extract README from notebook cell marked with #| readme and write to output directory\"\n\n    source_code = Path(notebook_path).read_text()\n\n    tree = ast.parse(source_code)\n    readme_contents = []\n\n    # Check both regular cells (FunctionDef) and setup cells (With blocks)\n    for node in tree.body:\n        # Check @app.cell decorated functions (hidden or not)\n        if isinstance(node, ast.FunctionDef):\n            func_source = ast.get_source_segment(source_code, node)\n            if func_source and 'mo.md(' in func_source and '#| README' in func_source:\n                # Extract the string content from mo.md(...)\n                content = extract_mo_md_content(func_source)\n                if content and '#| README' in content:\n                    lines = content.split('\\n')\n                    readme_text = '\\n'.join(line for line in lines if not line.strip().startswith('#| README'))\n                    readme_contents.append(readme_text.strip())\n\n        # Check setup cell (with app.setup:)\n        elif isinstance(node, ast.With):\n            for stmt in node.body:\n                if isinstance(stmt, ast.Expr):\n                    stmt_source = ast.get_source_segment(source_code, stmt)\n                    if stmt_source and 'mo.md(' in stmt_source and '#| README' in stmt_source:\n                        content = extract_mo_md_content(stmt_source)\n                        if content and '#| README' in content:\n                            lines = content.split('\\n')\n                            readme_text = '\\n'.join(line for line in lines if not line.strip().startswith('#| README'))\n                            readme_contents.append(readme_text.strip())\n\n    if len(readme_contents) == 0:\n        print('\u26a0\ufe0f  Warning: No #| README cell found. README.md will not be generated.')\n        print('   For PyPI distribution, consider adding a cell with mo.md() containing #| README')\n        return ''\n\n    if len(readme_contents) \u003E 1:\n        print(f'\u26a0\ufe0f  Warning: Found {len(readme_contents)} cells with #| README marker. Using only the first one.')\n\n    # Substitute f-string variables from setup_metadata\n    readme_text = readme_contents[0]\n    for key, value in setup_metadata.items():\n        readme_text = readme_text.replace(f'{{{key}}}', str(value))\n\n    readme_path = Path(output_dir) / 'README.md'\n    readme_path.write_text(readme_text)\n\n    print(f'\u2705 README.md generated from notebook')\n    return str(readme_path)", "code_hash": "d56d6502f89ae4f89c718d708364e617", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Vxnm", "name": "*extract_readme"}, {"code": "def extract_mo_md_content(source: str) -\u003E str:\n    \"Extract the string content from a mo.md() call, handling r/f/rf string prefixes\"\n    # Find mo.md( and extract everything between the opening and closing quotes\n    import re\n    # Match mo.md with optional whitespace, then capture string with various prefixes\n    pattern = r'mo\\.md\\s*\\(\\s*[rf]*\"\"\"(.*?)\"\"\"|mo\\.md\\s*\\(\\s*[rf]*\\'\\'\\'(.*?)\\'\\'\\'|mo\\.md\\s*\\(\\s*[rf]*\"(.*?)\"|mo\\.md\\s*\\(\\s*[rf]*\\'(.*?)\\''\n    match = re.search(pattern, source, re.DOTALL)\n    if match:\n        # Return whichever group matched (triple quotes or single quotes)\n        for i in range(1, len(match.groups()) + 1):\n            if match.group(i) is not None:\n                return match.group(i)\n    return ''", "code_hash": "b48d73c2f0aaba523323ed05e96797e4", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "DnEU", "name": "*extract_mo_md_content"}, {"code": "mo.md(r\"\"\"## Documentation Standardnization\"\"\")", "code_hash": "da97c18061ab9e09e1f27aeafd4ae6ec", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "ulZA", "name": "_"}, {"code": "def extract_param_docs_from_source(\n    func_source: str   # function source to be tokenized and processed\n) -\u003E dict:             # nested dict {'param_name': {'anno': type, 'default': value, 'docment': 'doc'}, 'return': {...}}\n    \"Extract parameter documentation from source code with nbdev-style comments\"    \n    # 1. Tokenize to get comments\n    tokens = tokenize(io.BytesIO(func_source.encode('utf-8')).readline)\n    clean_re = re.compile(r'^\\s*#(.*)\\s*$')\n    comments = {}\n    for token in tokens:\n        if token.type == COMMENT:\n            match = clean_re.findall(token.string)\n            if match:\n                comments[token.start[0]] = match[0].strip()\n\n    # 2. Parse AST to get parameter locations and info\n    tree = ast.parse(dedent(func_source))\n    if not tree.body:\n        return {}\n\n    defn = tree.body[0]\n    if not isinstance(defn, (ast.FunctionDef, ast.AsyncFunctionDef)):\n        return {}\n\n    # Build line number to param name mapping\n    param_locs = {}\n    for arg in defn.args.args:\n        param_locs[arg.lineno] = arg.arg\n    if defn.args.vararg:\n        param_locs[defn.args.vararg.lineno] = defn.args.vararg.arg\n    for arg in defn.args.kwonlyargs:\n        param_locs[arg.lineno] = arg.arg\n    if defn.args.kwarg:\n        param_locs[defn.args.kwarg.lineno] = defn.args.kwarg.arg\n    if defn.returns:\n        param_locs[defn.returns.lineno] = 'return'\n\n    # 3. Match comments to parameters\n    def get_comment_for_param(line, param_name):\n        # Check same line\n        if line in comments:\n            return comments[line]\n        # Check lines above (multi-line comments)\n        line -= 1\n        result = []\n        while line \u003E 0 and line in comments and line not in param_locs:\n            result.append(comments[line])\n            line -= 1\n        return dedent('\\n'.join(reversed(result))) if result else None\n\n    param_docs = {}\n    for line, param_name in param_locs.items():\n        param_docs[param_name] = get_comment_for_param(line, param_name)\n\n    # 4. Extract full signature info from AST\n    result = {}\n\n    # Process regular args\n    for i, arg in enumerate(defn.args.args):\n        anno = ast.unparse(arg.annotation) if arg.annotation else None\n        default = None\n        # Defaults are stored backwards from the end\n        default_offset = len(defn.args.args) - len(defn.args.defaults)\n        if i \u003E= default_offset:\n            default = ast.unparse(defn.args.defaults[i - default_offset])\n\n        result[arg.arg] = {\n            'anno': anno,\n            'default': default,\n            'docment': param_docs.get(arg.arg)\n        }\n\n    # Process *args\n    if defn.args.vararg:\n        result[defn.args.vararg.arg] = {\n            'anno': ast.unparse(defn.args.vararg.annotation) if defn.args.vararg.annotation else None,\n            'default': None,\n            'docment': param_docs.get(defn.args.vararg.arg)\n        }\n\n    # Process keyword-only args\n    for i, arg in enumerate(defn.args.kwonlyargs):\n        anno = ast.unparse(arg.annotation) if arg.annotation else None\n        default = ast.unparse(defn.args.kw_defaults[i]) if defn.args.kw_defaults[i] else None\n\n        result[arg.arg] = {\n            'anno': anno,\n            'default': default,\n            'docment': param_docs.get(arg.arg)\n        }\n\n    # Process **kwargs\n    if defn.args.kwarg:\n        result[defn.args.kwarg.arg] = {\n            'anno': ast.unparse(defn.args.kwarg.annotation) if defn.args.kwarg.annotation else None,\n            'default': None,\n            'docment': param_docs.get(defn.args.kwarg.arg)\n        }\n\n    # Process return annotation\n    if defn.returns:\n        result['return'] = {\n            'anno': ast.unparse(defn.returns),\n            'default': None,\n            'docment': param_docs.get('return')\n        }\n\n    return result", "code_hash": "356a806a66c00f43299d94035982a83e", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "ecfG", "name": "*extract_param_docs_from_source"}, {"code": "def reformat_function_docstring(\n    func_source: str,             # source function\n    target_style: str = 'google'  # one of \"google\", \"numpy\", or \"nbdev\"\n) -\u003E str:                         # Reformatted function with the docstring in the target style\n    \"Reformat function docstring to target style, preserving nbdev-style comments\"\n    try:\n        # Step 1: Execute the source to get a function object\n        namespace = {}\n        exec(func_source, namespace)\n        func = next(v for v in namespace.values() if callable(v) and hasattr(v, '__name__'))\n\n        # Step 2: Extract structured docs using fastcore\n        docs = extract_param_docs_from_source(func_source)\n\n        # Step 3: Build new docstring inline\n        lines = []\n\n        # Main description\n        if func.__doc__:\n            lines.append(func.__doc__.strip())\n\n        if target_style == 'google':\n            # Args section\n            params = {k: v for k, v in docs.items() if k != 'return'}\n            if params:\n                lines.append(\"\")\n                lines.append(\"Args:\")\n                for name, info in params.items():\n                    anno = info.get('anno')\n                    anno_str = getattr(anno, '__name__', str(anno)) if anno != inspect._empty else ''\n                    doc = info.get('docment', '')\n                    if anno_str:\n                        lines.append(f\"    {name} ({anno_str}): {doc}\")\n                    else:\n                        lines.append(f\"    {name}: {doc}\")\n\n            # Returns section\n            ret = docs.get('return')\n            if ret and ret.get('docment'):\n                lines.append(\"\")\n                lines.append(\"Returns:\")\n                ret_anno = ret.get('anno')\n                ret_anno_str = getattr(ret_anno, '__name__', str(ret_anno)) if ret_anno != inspect._empty else ''\n                ret_doc = ret.get('docment', '')\n                if ret_anno_str:\n                    lines.append(f\"    {ret_anno_str}: {ret_doc}\")\n                else:\n                    lines.append(f\"    {ret_doc}\")\n\n        elif target_style == 'numpy':\n            # Parameters section\n            params = {k: v for k, v in docs.items() if k != 'return'}\n            if params:\n                lines.append(\"\")\n                lines.append(\"Parameters\")\n                lines.append(\"----------\")\n                for name, info in params.items():\n                    anno = info.get('anno')\n                    anno_str = getattr(anno, '__name__', str(anno)) if anno != inspect._empty else ''\n                    doc = info.get('docment', '')\n                    if anno_str:\n                        lines.append(f\"{name} : {anno_str}\")\n                    else:\n                        lines.append(f\"{name}\")\n                    if doc:\n                        lines.append(f\"    {doc}\")\n\n            # Returns section\n            ret = docs.get('return')\n            if ret and ret.get('docment'):\n                lines.append(\"\")\n                lines.append(\"Returns\")\n                lines.append(\"-------\")\n                ret_anno = ret.get('anno')\n                ret_anno_str = getattr(ret_anno, '__name__', str(ret_anno)) if ret_anno != inspect._empty else ''\n                ret_doc = ret.get('docment', '')\n                if ret_anno_str:\n                    lines.append(f\"{ret_anno_str}\")\n                if ret_doc:\n                    lines.append(f\"    {ret_doc}\")\n\n        else:  # nbdev or unknown\n            return func_source\n\n        new_docstring = '\\n'.join(lines)\n\n        # Step 4: Replace docstring in source using AST\n        tree = ast.parse(func_source)\n\n        for node in ast.walk(tree):\n            if isinstance(node, (ast.FunctionDef, ast.ClassDef, ast.AsyncFunctionDef)):\n                if (node.body and isinstance(node.body[0], ast.Expr) \n                    and isinstance(node.body[0].value, ast.Constant)):\n                    # Has existing docstring\n                    node.body[0].value.value = new_docstring\n                else:\n                    # No docstring, add one\n                    doc_node = ast.Expr(value=ast.Constant(value=new_docstring))\n                    node.body.insert(0, doc_node)\n                break\n\n        return ast.unparse(tree)\n\n    except Exception as e:\n        print(f\"\u26a0\ufe0f  Could not reformat docstring: {e}\")\n        return func_source", "code_hash": "641b168fc8fda7a238314db722126b6b", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Pvdt", "name": "*reformat_function_docstring"}, {"code": "mo.md(r\"\"\"## Build Package\"\"\")", "code_hash": "542ab5538d7c64dbc00040c1fe78aaa7", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "ZBYS", "name": "_"}, {"code": "def build_package(\n    notebook_path: str,            # Path to the marimo notebook file\n    output_dir: str='dist',        # Output directory for package files\n    docstring_style: str='google'  # Docsignature to use in final package (google, numpy, nbdev)\n) -\u003E str:\n    \"Build a Python package from a marimo notebook\"\n\n    setup_metadata, setup_imports, setup_packages, exports = extract_exports(notebook_path)\n    exports = process_exports(exports, docstring_style)\n    script_metadata = extract_script_metadata(notebook_path)\n    validate_setup_metadata(setup_metadata)\n    validate_script_metadata(script_metadata)\n    if not exports:\n        print('\u26a0\ufe0f  Warning: No exports found. Ensure functions/classes are self contained')\n    if not setup_packages:\n        print('\u26a0\ufe0f  Warning: No packages imported in setup cell. Ensure package dependencies are imported there.')\n    os.makedirs(output_dir, exist_ok=True)\n    package_name = setup_metadata['__package_name__'].replace('-', '_')\n    os.makedirs(f'{output_dir}/{package_name}', exist_ok=True)\n    generate_pyproject_toml(setup_metadata, script_metadata, setup_packages, f'{output_dir}/pyproject.toml')\n    write_module(setup_imports, exports, f'{output_dir}/{package_name}/__init__.py')\n    extract_readme(notebook_path, output_dir, setup_metadata)\n    print(f'\u2705 Package built in {output_dir}/')\n    return output_dir", "code_hash": "6b698f2d9143a116a1edbef81fc78ee3", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "aLJB", "name": "*build_package"}, {"code": "mo.md(r\"\"\"## Generate Documentation\"\"\")", "code_hash": "5467f345a259ef20692b7ed9cc142be6", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "nHfw", "name": "_"}, {"code": "def generate_docs(\n    notebook_path: str,     # Path to notebook\n    package_dir: str,       # Path to built package (e.g., \"src\")\n    output_dir: str = \"docs\"  # Where to write index.html\n) -\u003E str:                   # Path to generated index.html\n    \"Generate static HTML documentation from README and package API\"\n\n\n\n    # Step 1: Read the README\n    readme_path = Path(package_dir) / \"README.md\"\n    if readme_path.exists():\n        readme_content = readme_path.read_text(encoding='utf-8')\n    else:\n        readme_content = \"# Documentation\\n\\nNo README found.\"\n\n    # Step 2: Dynamically import the built package\n    package_name = [d.name for d in Path(package_dir).iterdir() \n                    if d.is_dir() and not d.name.startswith('.')][0]\n    sys.path.insert(0, str(package_dir))\n    package = importlib.import_module(package_name)\n\n    # Step 3: Extract functions/classes and their info\n    members = inspect.getmembers(package, lambda x: inspect.isfunction(x) or inspect.isclass(x))\n    api_docs = []\n    for name, obj in members:\n        if name.startswith('_'):  # Skip private\n            continue\n        sig = inspect.signature(obj)\n        doc = inspect.getdoc(obj) or \"No documentation available.\"\n        api_docs.append({\n            'name': name,\n            'signature': sig,\n            'docstring': doc,\n            'type': 'function' if inspect.isfunction(obj) else 'class'\n        })\n\n    # Step 4: Convert to markdown\n    markdown_parts = [readme_content, \"\\n\\n## API Reference\\n\\n\"]\n    for item in api_docs:\n        markdown_parts.append(f\"### {item['name']}\\n\\n\")\n        markdown_parts.append(f\"```python\\n{item['name']}{item['signature']}\\n```\\n\\n\")\n        markdown_parts.append(f\"{item['docstring']}\\n\\n\")\n    full_markdown = \"\".join(markdown_parts)\n\n    # Step 5: Convert to HTML and write file\n    html_body = markdown(full_markdown)\n    html_template = f\"\"\"\u003C!DOCTYPE html\u003E\n\u003Chtml\u003E\n\n\u003Cbody\u003E\n{html_body}\n\u003C/body\u003E\n\u003C/html\u003E\"\"\"\n\n    output_path = Path(output_dir)\n    output_path.mkdir(parents=True, exist_ok=True)\n    index_path = output_path / \"index.html\"\n    index_path.write_text(html_template, encoding='utf-8')\n\n    print(f'\u2705 Documentation generated at {index_path}')\n    return str(index_path)", "code_hash": "fe85234ae2c74653f1e7916ea9f596fa", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "xXTn", "name": "*generate_docs"}, {"code": "mo.md(r\"\"\"## Multi Note book support\"\"\")", "code_hash": "d5d2b81f6236bf62adabc5ef5e6785c1", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "AjVT", "name": "_"}, {"code": "def func():\n    x = np.abs(-5)\n    return print(f\"{x = }\")", "code_hash": "3c5cf4061e56a538f3216d10bd4f592e", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "pHFh", "name": "*func"}, {"code": "func()", "code_hash": "f6bc82f600a4a7d84bc49b5820327d05", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "NCOB", "name": "_"}, {"code": "", "code_hash": null, "config": {"column": null, "disabled": false, "hide_code": false}, "id": "aqbW", "name": "_"}, {"code": "mo.md(r\"\"\"## Testing\"\"\")", "code_hash": "ef3039219ee3dbea62e4c9ec1d2b783e", "config": {"column": 2, "disabled": false, "hide_code": true}, "id": "TRpd", "name": "_"}, {"code": "def test_extract_script_metadata():\n\n\n    test_content = \"\"\"# /// script\n# requires-python = \"\u003E=3.11\"\n# dependencies = [\"numpy==1.24.0\"]\n# ///\n\"\"\"\n\n    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f:\n        f.write(test_content)\n        temp_path = f.name\n\n    result = extract_script_metadata(temp_path)\n    assert result['requires-python'] == \"\u003E=3.11\"\n    assert result['dependencies'] == [\"numpy==1.24.0\"]", "code_hash": "9c8070a643ba59bd83feea31faa475c9", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "TXez", "name": "*test_extract_script_metadata"}, {"code": "def test_get_package_name_known_modules():\n    # Test cases from your screenshot\n    assert get_package_name('sklearn') == 'scikit-learn'\n    assert get_package_name('numpy') == 'numpy'\n    assert get_package_name('bs4') == 'bs4'", "code_hash": "d8fac0068d538057d3aa349cea239516", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "dNNg", "name": "*test_get_package_name_known_modules"}, {"code": "def test_get_package_name_unknown_module():\n    # Should return the module name itself if not in map\n    assert get_package_name('nonexistent_module') == 'nonexistent_module'\n\ndef test_get_package_name_empty_string():\n    # Edge case\n    assert get_package_name('') == ''\n\n@pytest.mark.parametrize(\"module, expected\", [\n    ('sklearn', 'scikit-learn'),\n    ('numpy', 'numpy'),\n    ('bs4', 'bs4'),\n    ('requests', 'requests'),  # assuming it's in the map\n    ('unknown_pkg', 'unknown_pkg'),\n])\ndef test_get_package_name_parametrized(module, expected):\n    assert get_package_name(module) == expected", "code_hash": "50bf7ee7a99852ecfc60d1fa38358ea1", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "yCnT", "name": "_"}, {"code": "def test_generate_docs():\n    # Build the package first\n    build_package(\"./notebooks/00_core.py\", output_dir=\"test_output\", docstring_style=\"google\")\n\n    # Generate docs\n    docs_path = generate_docs(\n        notebook_path=\"./notebooks/00_core.py\",\n        package_dir=\"test_output\",\n        output_dir=\"test_output/docs\"\n    )\n\n    # Check the output exists\n    assert Path(docs_path).exists()\n\n    # Optional: check content\n    content = Path(docs_path).read_text()\n    assert \"API Reference\" in content", "code_hash": "326f9065013708e288766ab64f2f9931", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "wlCL", "name": "*test_generate_docs"}, {"code": "mo.md(r\"\"\"## Build Package\"\"\")", "code_hash": "542ab5538d7c64dbc00040c1fe78aaa7", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "kqZH", "name": "_"}, {"code": "build_package(\"./notebooks/00_core.py\", output_dir=\"src\", docstring_style=\"google\")", "code_hash": "ac501138490bcdc61bae246613af7a9f", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "wAgl", "name": "_"}, {"code": "mo.md(\n    r\"\"\"\nto add to pypi run \n\n```\nuv build\n```\n\n# Test PyPi\n```\nuv publish --publish-url https://test.pypi.org/legacy/ dist/*\n```\n\n# Real PyPi\n```\nuv publish --token pypi-... dist/*\n```\n\"\"\"\n)", "code_hash": "2ad83a633d05e5d794d42a6012d659bb", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "rEll", "name": "_"}, {"code": "_todo_items = [\n    {\"item\": \"Normalize and Restructure NBDev Deocs -\u003E more standard documentation\", \"status\": True},\n    {\"item\": \"Extract README.md from notebook\", \"status\": True},\n    {\"item\": \"Integrate CLI for init, test, and mkdocs\", \"status\": False},\n    {\"item\": \"Static Docs Generation with no dependencies\", \"status\": False},\n    {\"item\": \"Better testing\", \"status\": False},\n    {\"item\": \"Better PyPI integration\", \"status\": False},\n\n    {\"item\": \"Generate PyPI setup thing from marimo\", \"status\": False},\n    {\"item\": \"Enhance Pyproject.toml with repo. and other good info\", \"status\": False},\n    {\"item\": \"Multi notebook support\", \"status\": False},\n    {\"item\": \"GitHub Actions Support\", \"status\": False},\n    {\"item\": \"Clean up os.path and Path - use Path throughout\", \"status\": False},\n]\n\ntodo_checklist = mo.md(f\"\"\"\n## \ud83d\udccb Package Development TODOs\n\n{mo.vstack([\n    mo.hstack([mo.ui.checkbox(value=todo[\"status\"]), mo.md(f\"**{todo['item']}**\")], align=\"center\", justify=\"start\") \n    for todo in _todo_items\n])}\n\"\"\")\n\ntodo_checklist", "code_hash": "e4477f8b93acedb9c36f9c5fe1907c30", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "dGlV", "name": "_"}, {"code": "", "code_hash": null, "config": {"column": null, "disabled": false, "hide_code": false}, "id": "SdmI", "name": "_"}], "metadata": {"marimo_version": "0.17.2"}, "version": "1"},
            "session": {"cells": [{"code_hash": "edf4247fbb816d0006be60158ad94ac4", "console": [{"mimetype": "application/vnd.marimo+traceback", "name": "stderr", "text": "\u003Cspan class=\"codehilite\"\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Cspan class=\"gt\"\u003ETraceback (most recent call last):\u003C/span\u003E\n  File \u003Cspan class=\"nb\"\u003E\u0026quot;/tmp/marimo_47601/__marimo__cell_setup_.py\u0026quot;\u003C/span\u003E, line \u003Cspan class=\"m\"\u003E28\u003C/span\u003E, in \u003Cspan class=\"n\"\u003E\u0026lt;module\u0026gt;\u003C/span\u003E\n\u003Cspan class=\"w\"\u003E    \u003C/span\u003E\u003Cspan class=\"kn\"\u003Efrom\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"nn\"\u003Emistletoe\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"kn\"\u003Eimport\u003C/span\u003E \u003Cspan class=\"n\"\u003Emarkdown\u003C/span\u003E\n\u003Cspan class=\"gr\"\u003EModuleNotFoundError\u003C/span\u003E: \u003Cspan class=\"n\"\u003ENo module named \u0026#39;mistletoe\u0026#39;\u003C/span\u003E\n\u003C/pre\u003E\u003C/div\u003E\n\u003C/span\u003E", "type": "stream"}], "id": "setup", "outputs": [{"ename": "exception", "evalue": "No module named 'mistletoe'", "traceback": [], "type": "error"}]}, {"code_hash": "efc9a49425214264de14e2ea4ce62313", "console": [], "id": "Hbol", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": null, "console": [], "id": "MJUe", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "2e2072a45e51ece6702f3fb686466459", "console": [], "id": "vblA", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"development-packages\"\u003EDevelopment Packages\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "913b863a99190032070367acb7f1475c", "console": [{"mimetype": "application/vnd.marimo+traceback", "name": "stderr", "text": "\u003Cspan class=\"codehilite\"\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Cspan class=\"gt\"\u003ETraceback (most recent call last):\u003C/span\u003E\n  File \u003Cspan class=\"nb\"\u003E\u0026quot;/tmp/marimo_47601/__marimo__cell_bkHC_.py\u0026quot;\u003C/span\u003E, line \u003Cspan class=\"m\"\u003E2\u003C/span\u003E, in \u003Cspan class=\"n\"\u003E\u0026lt;module\u0026gt;\u003C/span\u003E\n\u003Cspan class=\"w\"\u003E    \u003C/span\u003E\u003Cspan class=\"kn\"\u003Eimport\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"nn\"\u003Epytest\u003C/span\u003E\n\u003Cspan class=\"gr\"\u003EModuleNotFoundError\u003C/span\u003E: \u003Cspan class=\"n\"\u003ENo module named \u0026#39;pytest\u0026#39;\u003C/span\u003E\n\u003C/pre\u003E\u003C/div\u003E\n\u003C/span\u003E", "type": "stream"}], "id": "bkHC", "outputs": [{"ename": "exception", "evalue": "No module named 'pytest'", "traceback": [], "type": "error"}]}, {"code_hash": "bab72832b3cc74e8da4b8fa4b57d056a", "console": [], "id": "lEQa", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"utilities\"\u003EUtilities\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "14e0a22eb28dc742d8277ed3473301b2", "console": [], "id": "PKri", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "2cd9d91fb3db7608b196b3bc93fc72a2", "console": [], "id": "Xref", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "3e60bdb851fff8e16a959bcf67c7b268", "console": [], "id": "SFPL", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "c1f80b168bf137f22880c69346ac8cf2", "console": [], "id": "BYtC", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"validation\"\u003EValidation\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "44281a305f71e85909de138e8d09f4fc", "console": [], "id": "RGSE", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "bdd3f5f294d3b60e923c11705a7fc5c4", "console": [], "id": "Kclp", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "46a5a54695ebe7206884441297cc4359", "console": [], "id": "emfo", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"extraction\"\u003EExtraction\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "7648af2be938e06ea2295dc34905750b", "console": [], "id": "Hstk", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "79aaa27dff7fbaad4c04f026a8839f9a", "console": [], "id": "nWHF", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "a2d5a995878c531f9c5626ba88966ee4", "console": [], "id": "iLit", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"write-files\"\u003EWrite Files\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "d06a9835f2c3d6e20f0ceea21089669d", "console": [], "id": "ZHCJ", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "3c11be3ccfb733eb2e259b3078283b17", "console": [], "id": "ROlb", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "89cd927366f3f837309c34a5ee073ee8", "console": [], "id": "qnkX", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "dd12d2d87bf85b91c5b05e7affe2273c", "console": [], "id": "TqIu", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"readme-extraction\"\u003EReadme Extraction\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "d56d6502f89ae4f89c718d708364e617", "console": [], "id": "Vxnm", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "b48d73c2f0aaba523323ed05e96797e4", "console": [], "id": "DnEU", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "da97c18061ab9e09e1f27aeafd4ae6ec", "console": [], "id": "ulZA", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"documentation-standardnization\"\u003EDocumentation Standardnization\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "356a806a66c00f43299d94035982a83e", "console": [], "id": "ecfG", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "641b168fc8fda7a238314db722126b6b", "console": [], "id": "Pvdt", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "542ab5538d7c64dbc00040c1fe78aaa7", "console": [], "id": "ZBYS", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"build-package\"\u003EBuild Package\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "6b698f2d9143a116a1edbef81fc78ee3", "console": [], "id": "aLJB", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "5467f345a259ef20692b7ed9cc142be6", "console": [], "id": "nHfw", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"generate-documentation\"\u003EGenerate Documentation\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "fe85234ae2c74653f1e7916ea9f596fa", "console": [], "id": "xXTn", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "d5d2b81f6236bf62adabc5ef5e6785c1", "console": [], "id": "AjVT", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"multi-note-book-support\"\u003EMulti Note book support\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "3c5cf4061e56a538f3216d10bd4f592e", "console": [], "id": "pHFh", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "f6bc82f600a4a7d84bc49b5820327d05", "console": [], "id": "NCOB", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": null, "console": [], "id": "aqbW", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "ef3039219ee3dbea62e4c9ec1d2b783e", "console": [], "id": "TRpd", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"testing\"\u003ETesting\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "9c8070a643ba59bd83feea31faa475c9", "console": [], "id": "TXez", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "d8fac0068d538057d3aa349cea239516", "console": [], "id": "dNNg", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "50bf7ee7a99852ecfc60d1fa38358ea1", "console": [], "id": "yCnT", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "326f9065013708e288766ab64f2f9931", "console": [], "id": "wlCL", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "542ab5538d7c64dbc00040c1fe78aaa7", "console": [], "id": "kqZH", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"build-package\"\u003EBuild Package\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "ac501138490bcdc61bae246613af7a9f", "console": [], "id": "wAgl", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": "2ad83a633d05e5d794d42a6012d659bb", "console": [], "id": "rEll", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003Eto add to pypi run \u003C/span\u003E\n\u003Cdiv class=\"language-text codehilite\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Ccode\u003Euv build\n\u003C/code\u003E\u003C/pre\u003E\u003C/div\u003E\n\u003Ch1 id=\"test-pypi\"\u003ETest PyPi\u003C/h1\u003E\n\u003Cdiv class=\"language-scdoc codehilite\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Ccode\u003Euv publish --publish-url https://test.pypi.org/legacy/ dist/*\n\u003C/code\u003E\u003C/pre\u003E\u003C/div\u003E\n\u003Ch1 id=\"real-pypi\"\u003EReal PyPi\u003C/h1\u003E\n\u003Cdiv class=\"language-scdoc codehilite\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Ccode\u003Euv publish --token pypi-... dist/*\n\u003C/code\u003E\u003C/pre\u003E\u003C/div\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "e4477f8b93acedb9c36f9c5fe1907c30", "console": [], "id": "dGlV", "outputs": [{"ename": "exception", "evalue": "An ancestor raised an exception (ModuleNotFoundError): ", "traceback": [], "type": "error"}]}, {"code_hash": null, "console": [], "id": "SdmI", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}], "metadata": {"marimo_version": "0.17.2"}, "version": "1"},
            "runtimeConfig": null,
        };
    </script>
  
<marimo-code hidden="">
    import%20marimo%0A%0A__generated_with%20%3D%20%220.17.2%22%0Aapp%20%3D%20marimo.App(width%3D%22columns%22%2C%20app_title%3D%22%22%2C%20auto_download%3D%5B%22html%22%5D)%0A%0Awith%20app.setup(hide_code%3DTrue)%3A%0A%20%20%20%20__version__%20%3D%20%220.0.1%22%0A%20%20%20%20__package_name__%20%3D%20%22m-dev%22%0A%20%20%20%20__description__%20%3D%20%22Build%20and%20publish%20python%20packages%20from%20marimo%20notebooks%22%0A%20%20%20%20__author__%20%3D%20%22Deufel%20%3CMDeufel13%40gmail.com%3E%22%0A%20%20%20%20__license__%20%3D%20%22MIT%22%0A%0A%20%20%20%20import%20re%0A%20%20%20%20import%20ast%0A%20%20%20%20import%20tomllib%0A%20%20%20%20import%20copy%0A%20%20%20%20import%20os%0A%20%20%20%20import%20tempfile%0A%20%20%20%20import%20shutil%0A%20%20%20%20import%20inspect%0A%20%20%20%20import%20sys%0A%20%20%20%20import%20importlib%0A%20%20%20%20import%20io%0A%20%20%20%20import%20zipfile%0A%0A%20%20%20%20from%20pathlib%20import%20Path%0A%20%20%20%20from%20importlib.metadata%20import%20packages_distributions%0A%20%20%20%20from%20textwrap%20import%20dedent%2C%20indent%0A%20%20%20%20from%20typing%20import%20Callable%2C%20Literal%2C%20Dict%2C%20Any%2C%20Tuple%0A%0A%20%20%20%20from%20tokenize%20import%20tokenize%2C%20COMMENT%0A%20%20%20%20from%20textwrap%20import%20dedent%0A%0A%20%20%20%20from%20mistletoe%20import%20markdown%0A%0A%20%20%20%20import%20numpy%20as%20np%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo%2C%20todo_checklist)%3A%0A%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20rf%22%22%22%0A%20%20%20%20%23%7C%20README%0A%0A%0A%20%20%20%20%23%20m-dev%0A%0A%20%20%20%20Version%3A%20%7B__version__%7D%0A%0A%0A%20%20%20%20%7Btodo_checklist%7D%0A%0A%20%20%20%20**Build%20Python%20packages%20from%20a%20single%20marimo%20notebook.**%0A%0A%20%20%20%20Version%3A%20%600.0.1%60%20%7C%20**Work%20in%20progress**%0A%0A%20%20%20%20---%0A%0A%20%20%20%20%23%23%20What%20it%20does%0A%0A%20%20%20%20%60m-dev%60%20turns%20**one%20marimo%20notebook**%20into%20a%20**clean%2C%20installable%20Python%20package**.%0A%0A%20%20%20%20-%20Exports%20**self-contained%20functions%2Fclasses**%20(auto-detected%20via%20marimo%E2%80%99s%20%60%40function%60%20%2F%20%60%40class_definition%60)%0A%20%20%20%20-%20Generates%20%60pyproject.toml%60%20from%20%60%2F%2F%2F%20script%60%20and%20%60app.setup%60%0A%20%20%20%20-%20Tracks%20**real%20dependencies**%20using%20marimo%20%2B%20UV%20in%20%60--sandbox%60%20mode%0A%20%20%20%20-%20Copies%20%60%23%7C%20readme%60%20cell%20%E2%86%92%20%60README.md%60%0A%20%20%20%20-%20Builds%20docstrings%20from%20%60%23%7C%20param%60%20comments%20(nbdev-style)%0A%20%20%20%20-%20Final%20package%3A%20**marimo-free%2C%20PyPI-ready**%0A%0A%20%20%20%20Your%20notebook%20is%20your%20**IDE%2C%20test%20runner%2C%20demo%2C%20and%20source%20of%20truth**.%0A%0A%20%20%20%20---%0A%0A%20%20%20%20%23%23%20Problems%20it%20solves%0A%0A%20%20%20%20%7C%20Problem%20%7C%20How%20%60m-dev%60%20helps%20%7C%0A%20%20%20%20%7C--------%7C------------------%7C%0A%20%20%20%20%7C%20%22I%20deleted%20a%20cell%20and%20didn%E2%80%99t%20notice%22%20%7C%20With%20marimo%2C%20**downstream%20cells%20break%20immediately**%20%E2%80%94%20you%20*can%E2%80%99t*%20miss%20it%20%7C%0A%20%20%20%20%7C%20%22I%20don%E2%80%99t%20know%20what%20packages%20I%20need%22%20%7C%20marimo%20%2B%20UV%20in%20%60--sandbox%60%20**tracks%20every%20import**%20and%20suggests%20missing%20ones%20%7C%0A%20%20%20%20%7C%20%22My%20package%20has%20wrong%2Foutdated%20deps%22%20%7C%20Only%20**deps%20from%20%60app.setup%60%20cell**%20go%20into%20%60pyproject.toml%60%20%E2%80%94%20versions%20pulled%20from%20**current%20UV%20environment**%20%7C%0A%20%20%20%20%7C%20%22Jupyter%20execution%20order%20is%20fragile%22%20%7C%20marimo%20runs%20via%20**DAG**%20%E2%80%94%20no%20hidden%20state%2C%20no%20out-of-order%20surprises%20%7C%0A%0A%20%20%20%20---%0A%0A%20%20%20%20%23%23%20How%20it%20works%0A%0A%20%20%20%201.%20Write%20in%20a%20marimo%20notebook%3A%0A%20%20%20%20%20%20%20%20-%20TODO%20Build%20an%20init%20CLI%0A%20%20%20%202.%20Run%20in%20a%20Sandbox%20(required%20for%20accurate%20dependency%20tracking)%0A%20%20%20%20%20%20%20%20-%20uvx%20marimo%20edit%20--sandbox%20mypkg.py%0A%20%20%20%203.%20Build%20the%20Package%0A%20%20%20%20%20%20%20%60%60%60python%0A%20%20%20%20%20%20%20%20import%20m_dev%20(need%20%20anew%20name%20wont%20let%20me%20use%20this..%20%3F)%0A%20%20%20%20%20%20%20%20m_dev.build(%22mypkg.py%22%2C%20%22dist%2F%22)%0A%20%20%20%20%20%20%20%20%60%60%60%0A%20%20%20%204.%20Output%0A%20%20%20%20%20%20%20%60%60%60bash%0A%20%20%20%20%20%20%20%20dist%2F%0A%20%20%20%20%20%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20src%2Fmypkg%2F%0A%20%20%20%20%20%20%20%20%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20__init__.py%0A%20%20%20%20%20%20%20%20%E2%94%82%20%20%20%E2%94%94%E2%94%80%E2%94%80%20core.py%0A%20%20%20%20%20%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20pyproject.toml%0A%20%20%20%20%20%20%20%20%E2%94%94%E2%94%80%E2%94%80%20README.md%0A%20%20%20%20%20%20%20%20%60%60%60%0A%20%20%20%205.%20install%0A%20%20%20%20%20%20%20%20%60%60%60python%0A%20%20%20%20%20%20%20%20pip%20install%20dist%2Fmypkg-0.1.0.tar.gz%0A%20%20%20%20%20%20%20%20%60%60%60%0A%0A%20%20%20%20%23%23%20Design%20choices%0A%0A%20%20%20%20%20-%20No%20%23%7C%20export%20needed%20%E2%86%92%20Exports%20auto-detected%20from%20marimo%20decorators%20via%20AST%0A%20%20%20%20%20-%20Self-containment%20via%20marimo%E2%80%99s%20DAG%20%E2%86%92%20If%20a%20function%20uses%20a%20variable%20from%20another%20cell%2C%20it%20won%E2%80%99t%20export%0A%20%20%20%20%20-%20Dependencies%20%3D%20only%20what%E2%80%99s%20in%20app.setup%20%E2%86%92%20Version%20numbers%20pulled%20from%20current%20UV%20lockfile%20%E2%86%92%20tests%20run%20on%20exact%20versions%20that%20ship%0A%20%20%20%20%20-%20Unused%20imports%3F%20Still%20require%20manual%20cleanup%20%E2%86%92%20Not%20perfect%2C%20but%3A%20if%20you%20delete%20all%20deps%2C%20marimo%20detects%20missing%20imports%20and%20prompts%20to%20install%0A%20%20%20%20%20-%20Testing%20stays%20in%20notebook%20%E2%86%92%20Use%20marimo%E2%80%99s%20built-in%20pytest%20support%20%E2%80%94%20runs%20live%2C%20never%20exported%0A%20%20%20%20%22%22%22%0A%20%20%20%20)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20return%0A%0A%0A%40app.cell(column%3D1%2C%20hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Development%20Packages%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_()%3A%0A%20%20%20%20import%20marimo%20as%20mo%0A%20%20%20%20import%20pytest%0A%20%20%20%20from%20sklearn.model_selection%20import%20train_test_split%20%23allows%20us%20to%20test%20imports%0A%20%20%20%20return%20mo%2C%20pytest%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Utilities%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.class_definition(hide_code%3DTrue)%0Aclass%20PEP723Parser%3A%0A%20%20%20%20%22a%20simple%20parser%20also%20a%20bit%20of%20a%20test%20to%20ensure%20that%20classes%20are%20parsed%20correctlly%22%0A%20%20%20%20REGEX%20%3D%20r'(%3Fm)%5E%23%20%2F%2F%2F%20(%3FP%3Ctype%3E%5Ba-zA-Z0-9-%5D%2B)%24%5Cs(%3FP%3Ccontent%3E(%5E%23(%7C%20.*)%24%5Cs)%2B)%5E%23%20%2F%2F%2F%24'%0A%20%20%20%20%40staticmethod%0A%20%20%20%20def%20extract_content(match)%3A%0A%20%20%20%20%20%20%20%20'''Extract%20TOML%20content%20from%20a%20PEP%20723%20metadata%20block%20match'''%0A%20%20%20%20%20%20%20%20content%20%3D%20''.join(%0A%20%20%20%20%20%20%20%20%20%20%20%20line%5B2%3A%5D%20if%20line.startswith('%23%20')%20else%20line%5B1%3A%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20line%20in%20match.group('content').splitlines(keepends%3DTrue)%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20return%20content%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20get_package_name(%0A%20%20%20%20module_name%3A%20str%20%20%23%20Import%20module%20name%20(e.g.%2C%20'sklearn'%2C%20'bs4')%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20PyPI%20package%20name%20(e.g.%2C%20'scikit-learn'%2C%20'beautifulsoup4')%0A%20%20%20%20%22Map%20import%20module%20name%20to%20PyPI%20package%20name%22%0A%20%20%20%20pkg_map%20%3D%20packages_distributions()%0A%20%20%20%20if%20module_name%20in%20pkg_map%3A%20return%20pkg_map%5Bmodule_name%5D%5B0%5D%0A%20%20%20%20return%20module_name%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20is_marimo_export_decorator(%0A%20%20%20%20decorator%20%23%20the%20decorator%20that%20marimo%20attached%20to%20the%20cell%0A)%20-%3E%20bool%3A%20%20%20%20%23%20True%20if%20the%20function%20or%20cell%20is%20reusable%20-%20should%20match%20marimos%20detection%0A%20%20%20%20%22Check%20if%20decorator%20is%20app.function%20or%20app.class_definition%20(with%20or%20without%20args)%22%0A%20%20%20%20%23%20If%20it's%20a%20call%20like%20%40app.function(hide_code%3DTrue)%2C%20check%20the%20func%20part%0A%20%20%20%20if%20isinstance(decorator%2C%20ast.Call)%3A%0A%20%20%20%20%20%20%20%20decorator_name%20%3D%20ast.unparse(decorator.func)%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%23%20Simple%20decorator%20like%20%40app.function%0A%20%20%20%20%20%20%20%20decorator_name%20%3D%20ast.unparse(decorator)%0A%0A%20%20%20%20return%20decorator_name%20in%20%5B'app.function'%2C%20'app.class_definition'%5D%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Validation%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20validate_setup_metadata(%0A%20%20%20%20setup_metadata%3A%20dict%20%20%23%20Package%20metadata%20from%20setup%20cell%0A)%20-%3E%20None%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Raises%20ValueError%20if%20invalid%0A%20%20%20%20%22Validate%20that%20required%20metadata%20keys%20exist%20and%20have%20valid%20values%20for%20package%20generation%22%0A%0A%20%20%20%20required%20%3D%20%5B'__package_name__'%2C%20'__version__'%2C%20'__description__'%2C%20'__author__'%2C%20'__license__'%5D%0A%20%20%20%20missing%20%3D%20%5Bk%20for%20k%20in%20required%20if%20k%20not%20in%20setup_metadata%5D%0A%20%20%20%20if%20missing%3A%20raise%20ValueError(f%22Setup%20cell%20missing%20required%20metadata%3A%20%7B'%2C%20'.join(missing)%7D%5Cn%5CnAdd%20these%20to%20your%20setup%20cell%3A%5Cn%22%20%2B%20'%5Cn'.join(%5Bf%22%20%20%20%20%7Bk%7D%20%3D%20'...'%22%20for%20k%20in%20missing%5D))%0A%20%20%20%20pkg_name%20%3D%20setup_metadata%5B'__package_name__'%5D%0A%20%20%20%20if%20not%20pkg_name%20or%20not%20pkg_name.strip()%3A%20raise%20ValueError(%22__package_name__%20cannot%20be%20empty%22)%0A%20%20%20%20if%20not%20pkg_name.replace('-'%2C%20'').replace('_'%2C%20'').isalnum()%3A%20raise%20ValueError(f%22__package_name__%20'%7Bpkg_name%7D'%20must%20contain%20only%20letters%2C%20numbers%2C%20hyphens%2C%20and%20underscores%22)%0A%20%20%20%20version%20%3D%20setup_metadata%5B'__version__'%5D%0A%20%20%20%20if%20not%20version%20or%20not%20version.strip()%3A%20raise%20ValueError(%22__version__%20cannot%20be%20empty%22)%0A%20%20%20%20desc%20%3D%20setup_metadata%5B'__description__'%5D%0A%20%20%20%20if%20not%20desc%20or%20not%20desc.strip()%3A%20raise%20ValueError(%22__description__%20cannot%20be%20empty%22)%0A%20%20%20%20author%20%3D%20setup_metadata%5B'__author__'%5D%0A%20%20%20%20if%20not%20author%20or%20not%20author.strip()%3A%20raise%20ValueError(%22__author__%20cannot%20be%20empty%22)%0A%20%20%20%20if%20'%3C'%20not%20in%20author%20or%20'%3E'%20not%20in%20author%3A%20raise%20ValueError(%22__author__%20must%20be%20in%20format%20'Name%20%3Cemail%40example.com%3E'%22)%0A%20%20%20%20email_part%20%3D%20author.split('%3C')%5B1%5D.split('%3E')%5B0%5D.strip()%0A%20%20%20%20if%20not%20email_part%20or%20'%40'%20not%20in%20email_part%3A%20raise%20ValueError(f%22__author__%20email%20'%7Bemail_part%7D'%20is%20not%20valid%22)%0A%20%20%20%20license_val%20%3D%20setup_metadata%5B'__license__'%5D%0A%20%20%20%20if%20not%20license_val%20or%20not%20license_val.strip()%3A%20raise%20ValueError(%22__license__%20cannot%20be%20empty%22)%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20validate_script_metadata(%0A%20%20%20%20script_metadata%3A%20dict%20%23%20metadata%20from%20script%20tag%20that%20is%20injected%20by%20marimo%20(must%20be%20running%20in%20sandbox%20mode)%20%0A)%20-%3E%20None%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Raises%20ValueError%20if%20invalid%0A%20%20%20%20%22Validate%20script%20metadata%20has%20required%20fields%20for%20package%20generation%22%0A%0A%20%20%20%20if%20not%20script_metadata%3A%20raise%20ValueError(%22No%20PEP%20723%20script%20metadata%20found.%20Run%20notebook%20with%20--sandbox%20flag%20to%20generate%20it.%22)%0A%20%20%20%20if%20'requires-python'%20not%20in%20script_metadata%3A%20raise%20ValueError(%22Script%20metadata%20missing%20'requires-python'.%20This%20should%20be%20auto-generated%20by%20marimo.%22)%0A%20%20%20%20if%20'dependencies'%20not%20in%20script_metadata%3A%20raise%20ValueError(%22Script%20metadata%20missing%20'dependencies'.%20This%20should%20be%20auto-generated%20by%20marimo.%22)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Extraction%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20extract_script_metadata(%0A%20%20%20%20notebook_path%3A%20str%20%20%23%20Path%20to%20the%20marimo%20notebook%20file%0A)%20-%3E%20dict%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Dictionary%20containing%20requires-python%20and%20dependencies%0A%20%20%20%20%22Extract%20PEP%20723%20script%20metadata%20from%20marimo%20notebook%20header%22%0A%0A%20%20%20%20with%20open(notebook_path)%20as%20f%3A%0A%20%20%20%20%20%20%20%20script%20%3D%20f.read()%0A%0A%20%20%20%20matches%20%3D%20%5Bm%20for%20m%20in%20re.finditer(PEP723Parser.REGEX%2C%20script)%20if%20m.group('type')%20%3D%3D%20'script'%5D%0A%0A%20%20%20%20if%20len(matches)%20%3E%201%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError('Multiple%20script%20blocks%20found')%0A%20%20%20%20elif%20len(matches)%20%3D%3D%201%3A%0A%20%20%20%20%20%20%20%20content%20%3D%20PEP723Parser.extract_content(matches%5B0%5D)%0A%20%20%20%20%20%20%20%20return%20tomllib.loads(content)%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20return%20%7B%7D%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20extract_exports(%0A%20%20%20%20notebook_path%3A%20str%20%20%23%20Notebook%20path%20%2F%20name%0A)%20-%3E%20tuple%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Tuple%20contaning%20(setup_metadata%2C%20setup_imports%2C%20setup_packages%2C%20exports)%0A%20%20%20%20%22Extract%20metadata%2C%20imports%2C%20and%20exportable%20functions%2Fclasses%20from%20marimo%20notebook%22%0A%20%20%20%20source_code%20%3D%20Path(notebook_path).read_text()%0A%0A%20%20%20%20tree%20%3D%20ast.parse(source_code)%0A%20%20%20%20setup_metadata%2C%20setup_imports%2C%20setup_packages%2C%20exports%20%3D%20(%7B%7D%2C%20%5B%5D%2C%20%5B%5D%2C%20%5B%5D)%0A%0A%20%20%20%20for%20node%20in%20tree.body%3A%0A%20%20%20%20%20%20%20%20if%20isinstance(node%2C%20ast.With)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20stmt%20in%20node.body%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20isinstance(stmt%2C%20ast.Assign)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setup_metadata%5Bstmt.targets%5B0%5D.id%5D%20%3D%20ast.literal_eval(stmt.value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20elif%20isinstance(stmt%2C%20(ast.Import%2C%20ast.ImportFrom))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setup_imports.append(ast.unparse(stmt))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20isinstance(stmt%2C%20ast.Import)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20alias%20in%20stmt.names%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setup_packages.append(alias.name)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20elif%20isinstance(stmt%2C%20ast.ImportFrom)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setup_packages.append(stmt.module.split('.')%5B0%5D)%0A%0A%20%20%20%20%20%20%20%20elif%20isinstance(node%2C%20(ast.FunctionDef%2C%20ast.ClassDef))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20any(is_marimo_export_decorator(d)%20for%20d%20in%20node.decorator_list)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20node.name.startswith('test_')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Extract%20original%20source%20with%20comments%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20original_source%20%3D%20ast.get_source_segment(source_code%2C%20node)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Remove%20the%20marimo%20decorators%20from%20the%20source%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines%20%3D%20original_source.split('%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filtered_lines%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20line%20in%20lines%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stripped%20%3D%20line.strip()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20(stripped.startswith('%40app.function')%20or%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stripped.startswith('%40app.class_definition'))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filtered_lines.append(line)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20exports.append('%5Cn'.join(filtered_lines))%0A%0A%20%20%20%20return%20(setup_metadata%2C%20setup_imports%2C%20setup_packages%2C%20exports)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Write%20Files%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20generate_pyproject_toml(%0A%20%20%20%20setup_metadata%3A%20dict%2C%20%20%20%20%20%20%20%20%20%23%20package%20metadata%20from%20setup%20cell%20%0A%20%20%20%20script_metadata%3A%20dict%2C%20%20%20%20%20%20%20%20%23%20metadata%20from%20%2F%2F%2F%20script%20block%20%0A%20%20%20%20setup_packages%3A%20list%2C%20%20%20%20%20%20%20%20%20%23%20Package%20Dependencies%3B%20inner%20join%20from%20script%20and%20setup%20%0A%20%20%20%20output_file%3D'pyproject.toml'%20%20%23%20Path%20for%20output%20file%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20written%20file%0A%20%20%20%20%22Generate%20pyproject.toml%20from%20notebook%20using%20%2F%2F%2Fscript%20block%20and%20setup%20cell%22%0A%0A%20%20%20%20validate_setup_metadata(setup_metadata)%0A%20%20%20%20readme_line%20%3D%20'readme%20%3D%20%22README.md%22'%20if%20Path('README.md').exists()%20else%20''%0A%20%20%20%20pkg_names%20%3D%20%5Bget_package_name(pkg)%20for%20pkg%20in%20setup_packages%5D%0A%20%20%20%20prod_deps%20%3D%20%5Bdep%20for%20dep%20in%20script_metadata%5B'dependencies'%5D%20if%20any((dep.split('%3D%3D')%5B0%5D.strip()%20%3D%3D%20pkg%20for%20pkg%20in%20pkg_names))%5D%0A%20%20%20%20toml_content%20%3D%20f'''%5Bbuild-system%5D%5Cnrequires%20%3D%20%5B%22setuptools%3E%3D45%22%2C%20%22wheel%22%5D%5Cnbuild-backend%20%3D%20%22setuptools.build_meta%22%5Cn%5Cn%5Bproject%5D%5Cn%7Breadme_line%7D%5Cnname%20%3D%20%22%7Bsetup_metadata%5B'__package_name__'%5D%7D%22%5Cnversion%20%3D%20%22%7Bsetup_metadata%5B'__version__'%5D%7D%22%5Cndescription%20%3D%20%22%7Bsetup_metadata%5B'__description__'%5D%7D%22%5Cnauthors%20%3D%20%5B%5Cn%20%20%20%20%7B%7Bname%20%3D%20%22%7Bsetup_metadata%5B'__author__'%5D.split('%3C')%5B0%5D.strip()%7D%22%2C%20email%20%3D%20%22%7Bsetup_metadata%5B'__author__'%5D.split('%3C')%5B1%5D.strip('%3E')%7D%22%7D%7D%2C%5Cn%5D%5Cnlicense%20%3D%20%7B%7Btext%20%3D%20%22%7Bsetup_metadata%5B'__license__'%5D%7D%22%7D%7D%5Cnrequires-python%20%3D%20%22%7Bscript_metadata%5B'requires-python'%5D%7D%22%5Cndependencies%20%3D%20%7Bprod_deps%7D%5Cn'''%0A%20%20%20%20Path(output_file).write_text(toml_content)%0A%20%20%20%20return%20output_file%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20write_module(%0A%20%20%20%20setup_imports%3A%20list%2C%20%23%20Import%20statements%20from%20setup%20cell%0A%20%20%20%20exports%3A%20list%2C%20%20%20%20%20%20%20%23%20Exported%20function%2Fclass%20definitions%0A%20%20%20%20output_file%3A%20str%20%20%20%20%20%23%20Path%20for%20output%20Python%20module%20file%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20written%20file%0A%20%20%20%20%22Write%20Python%20module%20file%20with%20imports%20and%20exported%20code%22%0A%0A%20%20%20%20with%20Path(output_file).open('w')%20as%20f%3A%0A%20%20%20%20%20%20%20%20for%20imp%20in%20setup_imports%3A%20f.write(imp%20%2B%20'%5Cn')%0A%20%20%20%20%20%20%20%20f.write('%5Cn')%0A%20%20%20%20%20%20%20%20for%20export%20in%20exports%3A%20f.write(export%20%2B%20'%5Cn%5Cn')%0A%20%20%20%20return%20output_file%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20process_exports(%0A%20%20%20%20exports%3A%20list%2C%20%20%20%20%20%20%20%20%23%20List%20of%20exported%20function%2Fclass%20source%20strings%0A%20%20%20%20docstring_style%3A%20str%20%20%23%20Target%20docstring%20style%3A%20'google'%2C%20'numpy'%2C%20or%20'nbdev'%0A)%20-%3E%20list%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20List%20of%20processed%20exports%0A%20%20%20%20%22Process%20exports%20list%2C%20reformatting%20docstrings%20if%20needed%22%0A%20%20%20%20if%20docstring_style%20%3D%3D%20'nbdev'%3A%0A%20%20%20%20%20%20%20%20return%20exports%20%20%23%20No%20processing%20needed%0A%0A%20%20%20%20processed%20%3D%20%5B%5D%0A%20%20%20%20for%20export%20in%20exports%3A%0A%20%20%20%20%20%20%20%20reformatted%20%3D%20reformat_function_docstring(export%2C%20docstring_style)%0A%20%20%20%20%20%20%20%20processed.append(reformatted)%0A%0A%20%20%20%20return%20processed%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Readme%20Extraction%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20extract_readme(%0A%20%20%20%20notebook_path%3A%20str%2C%20%20%20%20%20%20%23%20Path%20to%20the%20marimo%20notebook%20file%0A%20%20%20%20output_dir%3A%20str%2C%20%20%20%20%20%20%20%20%20%23%20Directory%20where%20README.md%20will%20be%20written%0A%20%20%20%20setup_metadata%3A%20dict%20%20%20%20%20%23%20Setup%20cell%20metadata%20for%20f-string%20substitution%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20written%20README.md%20file%2C%20or%20empty%20string%20if%20no%20readme%20cell%20found%0A%20%20%20%20%22Extract%20README%20from%20notebook%20cell%20marked%20with%20%23%7C%20readme%20and%20write%20to%20output%20directory%22%0A%0A%20%20%20%20source_code%20%3D%20Path(notebook_path).read_text()%0A%0A%20%20%20%20tree%20%3D%20ast.parse(source_code)%0A%20%20%20%20readme_contents%20%3D%20%5B%5D%0A%0A%20%20%20%20%23%20Check%20both%20regular%20cells%20(FunctionDef)%20and%20setup%20cells%20(With%20blocks)%0A%20%20%20%20for%20node%20in%20tree.body%3A%0A%20%20%20%20%20%20%20%20%23%20Check%20%40app.cell%20decorated%20functions%20(hidden%20or%20not)%0A%20%20%20%20%20%20%20%20if%20isinstance(node%2C%20ast.FunctionDef)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20func_source%20%3D%20ast.get_source_segment(source_code%2C%20node)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20func_source%20and%20'mo.md('%20in%20func_source%20and%20'%23%7C%20README'%20in%20func_source%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Extract%20the%20string%20content%20from%20mo.md(...)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20content%20%3D%20extract_mo_md_content(func_source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20content%20and%20'%23%7C%20README'%20in%20content%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines%20%3D%20content.split('%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20readme_text%20%3D%20'%5Cn'.join(line%20for%20line%20in%20lines%20if%20not%20line.strip().startswith('%23%7C%20README'))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20readme_contents.append(readme_text.strip())%0A%0A%20%20%20%20%20%20%20%20%23%20Check%20setup%20cell%20(with%20app.setup%3A)%0A%20%20%20%20%20%20%20%20elif%20isinstance(node%2C%20ast.With)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20stmt%20in%20node.body%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20isinstance(stmt%2C%20ast.Expr)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stmt_source%20%3D%20ast.get_source_segment(source_code%2C%20stmt)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20stmt_source%20and%20'mo.md('%20in%20stmt_source%20and%20'%23%7C%20README'%20in%20stmt_source%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20content%20%3D%20extract_mo_md_content(stmt_source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20content%20and%20'%23%7C%20README'%20in%20content%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines%20%3D%20content.split('%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20readme_text%20%3D%20'%5Cn'.join(line%20for%20line%20in%20lines%20if%20not%20line.strip().startswith('%23%7C%20README'))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20readme_contents.append(readme_text.strip())%0A%0A%20%20%20%20if%20len(readme_contents)%20%3D%3D%200%3A%0A%20%20%20%20%20%20%20%20print('%E2%9A%A0%EF%B8%8F%20%20Warning%3A%20No%20%23%7C%20README%20cell%20found.%20README.md%20will%20not%20be%20generated.')%0A%20%20%20%20%20%20%20%20print('%20%20%20For%20PyPI%20distribution%2C%20consider%20adding%20a%20cell%20with%20mo.md()%20containing%20%23%7C%20README')%0A%20%20%20%20%20%20%20%20return%20''%0A%0A%20%20%20%20if%20len(readme_contents)%20%3E%201%3A%0A%20%20%20%20%20%20%20%20print(f'%E2%9A%A0%EF%B8%8F%20%20Warning%3A%20Found%20%7Blen(readme_contents)%7D%20cells%20with%20%23%7C%20README%20marker.%20Using%20only%20the%20first%20one.')%0A%0A%20%20%20%20%23%20Substitute%20f-string%20variables%20from%20setup_metadata%0A%20%20%20%20readme_text%20%3D%20readme_contents%5B0%5D%0A%20%20%20%20for%20key%2C%20value%20in%20setup_metadata.items()%3A%0A%20%20%20%20%20%20%20%20readme_text%20%3D%20readme_text.replace(f'%7B%7B%7Bkey%7D%7D%7D'%2C%20str(value))%0A%0A%20%20%20%20readme_path%20%3D%20Path(output_dir)%20%2F%20'README.md'%0A%20%20%20%20readme_path.write_text(readme_text)%0A%0A%20%20%20%20print(f'%E2%9C%85%20README.md%20generated%20from%20notebook')%0A%20%20%20%20return%20str(readme_path)%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20extract_mo_md_content(source%3A%20str)%20-%3E%20str%3A%0A%20%20%20%20%22Extract%20the%20string%20content%20from%20a%20mo.md()%20call%2C%20handling%20r%2Ff%2Frf%20string%20prefixes%22%0A%20%20%20%20%23%20Find%20mo.md(%20and%20extract%20everything%20between%20the%20opening%20and%20closing%20quotes%0A%20%20%20%20import%20re%0A%20%20%20%20%23%20Match%20mo.md%20with%20optional%20whitespace%2C%20then%20capture%20string%20with%20various%20prefixes%0A%20%20%20%20pattern%20%3D%20r'mo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%22%22%22(.*%3F)%22%22%22%7Cmo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%5C'%5C'%5C'(.*%3F)%5C'%5C'%5C'%7Cmo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%22(.*%3F)%22%7Cmo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%5C'(.*%3F)%5C''%0A%20%20%20%20match%20%3D%20re.search(pattern%2C%20source%2C%20re.DOTALL)%0A%20%20%20%20if%20match%3A%0A%20%20%20%20%20%20%20%20%23%20Return%20whichever%20group%20matched%20(triple%20quotes%20or%20single%20quotes)%0A%20%20%20%20%20%20%20%20for%20i%20in%20range(1%2C%20len(match.groups())%20%2B%201)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20match.group(i)%20is%20not%20None%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20match.group(i)%0A%20%20%20%20return%20''%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Documentation%20Standardnization%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20extract_param_docs_from_source(%0A%20%20%20%20func_source%3A%20str%20%20%20%23%20function%20source%20to%20be%20tokenized%20and%20processed%0A)%20-%3E%20dict%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20nested%20dict%20%7B'param_name'%3A%20%7B'anno'%3A%20type%2C%20'default'%3A%20value%2C%20'docment'%3A%20'doc'%7D%2C%20'return'%3A%20%7B...%7D%7D%0A%20%20%20%20%22Extract%20parameter%20documentation%20from%20source%20code%20with%20nbdev-style%20comments%22%20%20%20%20%0A%20%20%20%20%23%201.%20Tokenize%20to%20get%20comments%0A%20%20%20%20tokens%20%3D%20tokenize(io.BytesIO(func_source.encode('utf-8')).readline)%0A%20%20%20%20clean_re%20%3D%20re.compile(r'%5E%5Cs*%23(.*)%5Cs*%24')%0A%20%20%20%20comments%20%3D%20%7B%7D%0A%20%20%20%20for%20token%20in%20tokens%3A%0A%20%20%20%20%20%20%20%20if%20token.type%20%3D%3D%20COMMENT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20match%20%3D%20clean_re.findall(token.string)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20match%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20comments%5Btoken.start%5B0%5D%5D%20%3D%20match%5B0%5D.strip()%0A%0A%20%20%20%20%23%202.%20Parse%20AST%20to%20get%20parameter%20locations%20and%20info%0A%20%20%20%20tree%20%3D%20ast.parse(dedent(func_source))%0A%20%20%20%20if%20not%20tree.body%3A%0A%20%20%20%20%20%20%20%20return%20%7B%7D%0A%0A%20%20%20%20defn%20%3D%20tree.body%5B0%5D%0A%20%20%20%20if%20not%20isinstance(defn%2C%20(ast.FunctionDef%2C%20ast.AsyncFunctionDef))%3A%0A%20%20%20%20%20%20%20%20return%20%7B%7D%0A%0A%20%20%20%20%23%20Build%20line%20number%20to%20param%20name%20mapping%0A%20%20%20%20param_locs%20%3D%20%7B%7D%0A%20%20%20%20for%20arg%20in%20defn.args.args%3A%0A%20%20%20%20%20%20%20%20param_locs%5Barg.lineno%5D%20%3D%20arg.arg%0A%20%20%20%20if%20defn.args.vararg%3A%0A%20%20%20%20%20%20%20%20param_locs%5Bdefn.args.vararg.lineno%5D%20%3D%20defn.args.vararg.arg%0A%20%20%20%20for%20arg%20in%20defn.args.kwonlyargs%3A%0A%20%20%20%20%20%20%20%20param_locs%5Barg.lineno%5D%20%3D%20arg.arg%0A%20%20%20%20if%20defn.args.kwarg%3A%0A%20%20%20%20%20%20%20%20param_locs%5Bdefn.args.kwarg.lineno%5D%20%3D%20defn.args.kwarg.arg%0A%20%20%20%20if%20defn.returns%3A%0A%20%20%20%20%20%20%20%20param_locs%5Bdefn.returns.lineno%5D%20%3D%20'return'%0A%0A%20%20%20%20%23%203.%20Match%20comments%20to%20parameters%0A%20%20%20%20def%20get_comment_for_param(line%2C%20param_name)%3A%0A%20%20%20%20%20%20%20%20%23%20Check%20same%20line%0A%20%20%20%20%20%20%20%20if%20line%20in%20comments%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20comments%5Bline%5D%0A%20%20%20%20%20%20%20%20%23%20Check%20lines%20above%20(multi-line%20comments)%0A%20%20%20%20%20%20%20%20line%20-%3D%201%0A%20%20%20%20%20%20%20%20result%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20while%20line%20%3E%200%20and%20line%20in%20comments%20and%20line%20not%20in%20param_locs%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20result.append(comments%5Bline%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20line%20-%3D%201%0A%20%20%20%20%20%20%20%20return%20dedent('%5Cn'.join(reversed(result)))%20if%20result%20else%20None%0A%0A%20%20%20%20param_docs%20%3D%20%7B%7D%0A%20%20%20%20for%20line%2C%20param_name%20in%20param_locs.items()%3A%0A%20%20%20%20%20%20%20%20param_docs%5Bparam_name%5D%20%3D%20get_comment_for_param(line%2C%20param_name)%0A%0A%20%20%20%20%23%204.%20Extract%20full%20signature%20info%20from%20AST%0A%20%20%20%20result%20%3D%20%7B%7D%0A%0A%20%20%20%20%23%20Process%20regular%20args%0A%20%20%20%20for%20i%2C%20arg%20in%20enumerate(defn.args.args)%3A%0A%20%20%20%20%20%20%20%20anno%20%3D%20ast.unparse(arg.annotation)%20if%20arg.annotation%20else%20None%0A%20%20%20%20%20%20%20%20default%20%3D%20None%0A%20%20%20%20%20%20%20%20%23%20Defaults%20are%20stored%20backwards%20from%20the%20end%0A%20%20%20%20%20%20%20%20default_offset%20%3D%20len(defn.args.args)%20-%20len(defn.args.defaults)%0A%20%20%20%20%20%20%20%20if%20i%20%3E%3D%20default_offset%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20default%20%3D%20ast.unparse(defn.args.defaults%5Bi%20-%20default_offset%5D)%0A%0A%20%20%20%20%20%20%20%20result%5Barg.arg%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20anno%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'default'%3A%20default%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'docment'%3A%20param_docs.get(arg.arg)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%23%20Process%20*args%0A%20%20%20%20if%20defn.args.vararg%3A%0A%20%20%20%20%20%20%20%20result%5Bdefn.args.vararg.arg%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20ast.unparse(defn.args.vararg.annotation)%20if%20defn.args.vararg.annotation%20else%20None%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'default'%3A%20None%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'docment'%3A%20param_docs.get(defn.args.vararg.arg)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%23%20Process%20keyword-only%20args%0A%20%20%20%20for%20i%2C%20arg%20in%20enumerate(defn.args.kwonlyargs)%3A%0A%20%20%20%20%20%20%20%20anno%20%3D%20ast.unparse(arg.annotation)%20if%20arg.annotation%20else%20None%0A%20%20%20%20%20%20%20%20default%20%3D%20ast.unparse(defn.args.kw_defaults%5Bi%5D)%20if%20defn.args.kw_defaults%5Bi%5D%20else%20None%0A%0A%20%20%20%20%20%20%20%20result%5Barg.arg%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20anno%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'default'%3A%20default%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'docment'%3A%20param_docs.get(arg.arg)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%23%20Process%20**kwargs%0A%20%20%20%20if%20defn.args.kwarg%3A%0A%20%20%20%20%20%20%20%20result%5Bdefn.args.kwarg.arg%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20ast.unparse(defn.args.kwarg.annotation)%20if%20defn.args.kwarg.annotation%20else%20None%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'default'%3A%20None%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'docment'%3A%20param_docs.get(defn.args.kwarg.arg)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%23%20Process%20return%20annotation%0A%20%20%20%20if%20defn.returns%3A%0A%20%20%20%20%20%20%20%20result%5B'return'%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20ast.unparse(defn.returns)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'default'%3A%20None%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'docment'%3A%20param_docs.get('return')%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20reformat_function_docstring(%0A%20%20%20%20func_source%3A%20str%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20source%20function%0A%20%20%20%20target_style%3A%20str%20%3D%20'google'%20%20%23%20one%20of%20%22google%22%2C%20%22numpy%22%2C%20or%20%22nbdev%22%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Reformatted%20function%20with%20the%20docstring%20in%20the%20target%20style%0A%20%20%20%20%22Reformat%20function%20docstring%20to%20target%20style%2C%20preserving%20nbdev-style%20comments%22%0A%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%23%20Step%201%3A%20Execute%20the%20source%20to%20get%20a%20function%20object%0A%20%20%20%20%20%20%20%20namespace%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20exec(func_source%2C%20namespace)%0A%20%20%20%20%20%20%20%20func%20%3D%20next(v%20for%20v%20in%20namespace.values()%20if%20callable(v)%20and%20hasattr(v%2C%20'__name__'))%0A%0A%20%20%20%20%20%20%20%20%23%20Step%202%3A%20Extract%20structured%20docs%20using%20fastcore%0A%20%20%20%20%20%20%20%20docs%20%3D%20extract_param_docs_from_source(func_source)%0A%0A%20%20%20%20%20%20%20%20%23%20Step%203%3A%20Build%20new%20docstring%20inline%0A%20%20%20%20%20%20%20%20lines%20%3D%20%5B%5D%0A%0A%20%20%20%20%20%20%20%20%23%20Main%20description%0A%20%20%20%20%20%20%20%20if%20func.__doc__%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(func.__doc__.strip())%0A%0A%20%20%20%20%20%20%20%20if%20target_style%20%3D%3D%20'google'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Args%20section%0A%20%20%20%20%20%20%20%20%20%20%20%20params%20%3D%20%7Bk%3A%20v%20for%20k%2C%20v%20in%20docs.items()%20if%20k%20!%3D%20'return'%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20params%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22Args%3A%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20name%2C%20info%20in%20params.items()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20anno%20%3D%20info.get('anno')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20anno_str%20%3D%20getattr(anno%2C%20'__name__'%2C%20str(anno))%20if%20anno%20!%3D%20inspect._empty%20else%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc%20%3D%20info.get('docment'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20anno_str%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bname%7D%20(%7Banno_str%7D)%3A%20%7Bdoc%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bname%7D%3A%20%7Bdoc%7D%22)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Returns%20section%0A%20%20%20%20%20%20%20%20%20%20%20%20ret%20%3D%20docs.get('return')%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20ret%20and%20ret.get('docment')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22Returns%3A%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ret_anno%20%3D%20ret.get('anno')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ret_anno_str%20%3D%20getattr(ret_anno%2C%20'__name__'%2C%20str(ret_anno))%20if%20ret_anno%20!%3D%20inspect._empty%20else%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ret_doc%20%3D%20ret.get('docment'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20ret_anno_str%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bret_anno_str%7D%3A%20%7Bret_doc%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bret_doc%7D%22)%0A%0A%20%20%20%20%20%20%20%20elif%20target_style%20%3D%3D%20'numpy'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Parameters%20section%0A%20%20%20%20%20%20%20%20%20%20%20%20params%20%3D%20%7Bk%3A%20v%20for%20k%2C%20v%20in%20docs.items()%20if%20k%20!%3D%20'return'%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20params%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22Parameters%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22----------%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20name%2C%20info%20in%20params.items()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20anno%20%3D%20info.get('anno')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20anno_str%20%3D%20getattr(anno%2C%20'__name__'%2C%20str(anno))%20if%20anno%20!%3D%20inspect._empty%20else%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc%20%3D%20info.get('docment'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20anno_str%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%7Bname%7D%20%3A%20%7Banno_str%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%7Bname%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20doc%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bdoc%7D%22)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Returns%20section%0A%20%20%20%20%20%20%20%20%20%20%20%20ret%20%3D%20docs.get('return')%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20ret%20and%20ret.get('docment')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22Returns%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22-------%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ret_anno%20%3D%20ret.get('anno')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ret_anno_str%20%3D%20getattr(ret_anno%2C%20'__name__'%2C%20str(ret_anno))%20if%20ret_anno%20!%3D%20inspect._empty%20else%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ret_doc%20%3D%20ret.get('docment'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20ret_anno_str%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%7Bret_anno_str%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20ret_doc%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bret_doc%7D%22)%0A%0A%20%20%20%20%20%20%20%20else%3A%20%20%23%20nbdev%20or%20unknown%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20func_source%0A%0A%20%20%20%20%20%20%20%20new_docstring%20%3D%20'%5Cn'.join(lines)%0A%0A%20%20%20%20%20%20%20%20%23%20Step%204%3A%20Replace%20docstring%20in%20source%20using%20AST%0A%20%20%20%20%20%20%20%20tree%20%3D%20ast.parse(func_source)%0A%0A%20%20%20%20%20%20%20%20for%20node%20in%20ast.walk(tree)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20isinstance(node%2C%20(ast.FunctionDef%2C%20ast.ClassDef%2C%20ast.AsyncFunctionDef))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(node.body%20and%20isinstance(node.body%5B0%5D%2C%20ast.Expr)%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20and%20isinstance(node.body%5B0%5D.value%2C%20ast.Constant))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Has%20existing%20docstring%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20node.body%5B0%5D.value.value%20%3D%20new_docstring%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20No%20docstring%2C%20add%20one%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc_node%20%3D%20ast.Expr(value%3Dast.Constant(value%3Dnew_docstring))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20node.body.insert(0%2C%20doc_node)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%0A%0A%20%20%20%20%20%20%20%20return%20ast.unparse(tree)%0A%0A%20%20%20%20except%20Exception%20as%20e%3A%0A%20%20%20%20%20%20%20%20print(f%22%E2%9A%A0%EF%B8%8F%20%20Could%20not%20reformat%20docstring%3A%20%7Be%7D%22)%0A%20%20%20%20%20%20%20%20return%20func_source%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Build%20Package%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20build_package(%0A%20%20%20%20notebook_path%3A%20str%2C%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20the%20marimo%20notebook%20file%0A%20%20%20%20output_dir%3A%20str%3D'dist'%2C%20%20%20%20%20%20%20%20%23%20Output%20directory%20for%20package%20files%0A%20%20%20%20docstring_style%3A%20str%3D'google'%20%20%23%20Docsignature%20to%20use%20in%20final%20package%20(google%2C%20numpy%2C%20nbdev)%0A)%20-%3E%20str%3A%0A%20%20%20%20%22Build%20a%20Python%20package%20from%20a%20marimo%20notebook%22%0A%0A%20%20%20%20setup_metadata%2C%20setup_imports%2C%20setup_packages%2C%20exports%20%3D%20extract_exports(notebook_path)%0A%20%20%20%20exports%20%3D%20process_exports(exports%2C%20docstring_style)%0A%20%20%20%20script_metadata%20%3D%20extract_script_metadata(notebook_path)%0A%20%20%20%20validate_setup_metadata(setup_metadata)%0A%20%20%20%20validate_script_metadata(script_metadata)%0A%20%20%20%20if%20not%20exports%3A%0A%20%20%20%20%20%20%20%20print('%E2%9A%A0%EF%B8%8F%20%20Warning%3A%20No%20exports%20found.%20Ensure%20functions%2Fclasses%20are%20self%20contained')%0A%20%20%20%20if%20not%20setup_packages%3A%0A%20%20%20%20%20%20%20%20print('%E2%9A%A0%EF%B8%8F%20%20Warning%3A%20No%20packages%20imported%20in%20setup%20cell.%20Ensure%20package%20dependencies%20are%20imported%20there.')%0A%20%20%20%20os.makedirs(output_dir%2C%20exist_ok%3DTrue)%0A%20%20%20%20package_name%20%3D%20setup_metadata%5B'__package_name__'%5D.replace('-'%2C%20'_')%0A%20%20%20%20os.makedirs(f'%7Boutput_dir%7D%2F%7Bpackage_name%7D'%2C%20exist_ok%3DTrue)%0A%20%20%20%20generate_pyproject_toml(setup_metadata%2C%20script_metadata%2C%20setup_packages%2C%20f'%7Boutput_dir%7D%2Fpyproject.toml')%0A%20%20%20%20write_module(setup_imports%2C%20exports%2C%20f'%7Boutput_dir%7D%2F%7Bpackage_name%7D%2F__init__.py')%0A%20%20%20%20extract_readme(notebook_path%2C%20output_dir%2C%20setup_metadata)%0A%20%20%20%20print(f'%E2%9C%85%20Package%20built%20in%20%7Boutput_dir%7D%2F')%0A%20%20%20%20return%20output_dir%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Generate%20Documentation%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20generate_docs(%0A%20%20%20%20notebook_path%3A%20str%2C%20%20%20%20%20%23%20Path%20to%20notebook%0A%20%20%20%20package_dir%3A%20str%2C%20%20%20%20%20%20%20%23%20Path%20to%20built%20package%20(e.g.%2C%20%22src%22)%0A%20%20%20%20output_dir%3A%20str%20%3D%20%22docs%22%20%20%23%20Where%20to%20write%20index.html%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20generated%20index.html%0A%20%20%20%20%22Generate%20static%20HTML%20documentation%20from%20README%20and%20package%20API%22%0A%0A%0A%0A%20%20%20%20%23%20Step%201%3A%20Read%20the%20README%0A%20%20%20%20readme_path%20%3D%20Path(package_dir)%20%2F%20%22README.md%22%0A%20%20%20%20if%20readme_path.exists()%3A%0A%20%20%20%20%20%20%20%20readme_content%20%3D%20readme_path.read_text(encoding%3D'utf-8')%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20readme_content%20%3D%20%22%23%20Documentation%5Cn%5CnNo%20README%20found.%22%0A%0A%20%20%20%20%23%20Step%202%3A%20Dynamically%20import%20the%20built%20package%0A%20%20%20%20package_name%20%3D%20%5Bd.name%20for%20d%20in%20Path(package_dir).iterdir()%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20d.is_dir()%20and%20not%20d.name.startswith('.')%5D%5B0%5D%0A%20%20%20%20sys.path.insert(0%2C%20str(package_dir))%0A%20%20%20%20package%20%3D%20importlib.import_module(package_name)%0A%0A%20%20%20%20%23%20Step%203%3A%20Extract%20functions%2Fclasses%20and%20their%20info%0A%20%20%20%20members%20%3D%20inspect.getmembers(package%2C%20lambda%20x%3A%20inspect.isfunction(x)%20or%20inspect.isclass(x))%0A%20%20%20%20api_docs%20%3D%20%5B%5D%0A%20%20%20%20for%20name%2C%20obj%20in%20members%3A%0A%20%20%20%20%20%20%20%20if%20name.startswith('_')%3A%20%20%23%20Skip%20private%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20sig%20%3D%20inspect.signature(obj)%0A%20%20%20%20%20%20%20%20doc%20%3D%20inspect.getdoc(obj)%20or%20%22No%20documentation%20available.%22%0A%20%20%20%20%20%20%20%20api_docs.append(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'name'%3A%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'signature'%3A%20sig%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'docstring'%3A%20doc%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'type'%3A%20'function'%20if%20inspect.isfunction(obj)%20else%20'class'%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%23%20Step%204%3A%20Convert%20to%20markdown%0A%20%20%20%20markdown_parts%20%3D%20%5Breadme_content%2C%20%22%5Cn%5Cn%23%23%20API%20Reference%5Cn%5Cn%22%5D%0A%20%20%20%20for%20item%20in%20api_docs%3A%0A%20%20%20%20%20%20%20%20markdown_parts.append(f%22%23%23%23%20%7Bitem%5B'name'%5D%7D%5Cn%5Cn%22)%0A%20%20%20%20%20%20%20%20markdown_parts.append(f%22%60%60%60python%5Cn%7Bitem%5B'name'%5D%7D%7Bitem%5B'signature'%5D%7D%5Cn%60%60%60%5Cn%5Cn%22)%0A%20%20%20%20%20%20%20%20markdown_parts.append(f%22%7Bitem%5B'docstring'%5D%7D%5Cn%5Cn%22)%0A%20%20%20%20full_markdown%20%3D%20%22%22.join(markdown_parts)%0A%0A%20%20%20%20%23%20Step%205%3A%20Convert%20to%20HTML%20and%20write%20file%0A%20%20%20%20html_body%20%3D%20markdown(full_markdown)%0A%20%20%20%20html_template%20%3D%20f%22%22%22%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%0A%3Cbody%3E%0A%7Bhtml_body%7D%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E%22%22%22%0A%0A%20%20%20%20output_path%20%3D%20Path(output_dir)%0A%20%20%20%20output_path.mkdir(parents%3DTrue%2C%20exist_ok%3DTrue)%0A%20%20%20%20index_path%20%3D%20output_path%20%2F%20%22index.html%22%0A%20%20%20%20index_path.write_text(html_template%2C%20encoding%3D'utf-8')%0A%0A%20%20%20%20print(f'%E2%9C%85%20Documentation%20generated%20at%20%7Bindex_path%7D')%0A%20%20%20%20return%20str(index_path)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Multi%20Note%20book%20support%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20func()%3A%0A%20%20%20%20x%20%3D%20np.abs(-5)%0A%20%20%20%20return%20print(f%22%7Bx%20%3D%20%7D%22)%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20func()%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20return%0A%0A%0A%40app.cell(column%3D2%2C%20hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Testing%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20test_extract_script_metadata()%3A%0A%0A%0A%20%20%20%20test_content%20%3D%20%22%22%22%23%20%2F%2F%2F%20script%0A%23%20requires-python%20%3D%20%22%3E%3D3.11%22%0A%23%20dependencies%20%3D%20%5B%22numpy%3D%3D1.24.0%22%5D%0A%23%20%2F%2F%2F%0A%22%22%22%0A%0A%20%20%20%20with%20tempfile.NamedTemporaryFile(mode%3D'w'%2C%20suffix%3D'.py'%2C%20delete%3DFalse)%20as%20f%3A%0A%20%20%20%20%20%20%20%20f.write(test_content)%0A%20%20%20%20%20%20%20%20temp_path%20%3D%20f.name%0A%0A%20%20%20%20result%20%3D%20extract_script_metadata(temp_path)%0A%20%20%20%20assert%20result%5B'requires-python'%5D%20%3D%3D%20%22%3E%3D3.11%22%0A%20%20%20%20assert%20result%5B'dependencies'%5D%20%3D%3D%20%5B%22numpy%3D%3D1.24.0%22%5D%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20test_get_package_name_known_modules()%3A%0A%20%20%20%20%23%20Test%20cases%20from%20your%20screenshot%0A%20%20%20%20assert%20get_package_name('sklearn')%20%3D%3D%20'scikit-learn'%0A%20%20%20%20assert%20get_package_name('numpy')%20%3D%3D%20'numpy'%0A%20%20%20%20assert%20get_package_name('bs4')%20%3D%3D%20'bs4'%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(pytest)%3A%0A%20%20%20%20def%20test_get_package_name_unknown_module()%3A%0A%20%20%20%20%20%20%20%20%23%20Should%20return%20the%20module%20name%20itself%20if%20not%20in%20map%0A%20%20%20%20%20%20%20%20assert%20get_package_name('nonexistent_module')%20%3D%3D%20'nonexistent_module'%0A%0A%20%20%20%20def%20test_get_package_name_empty_string()%3A%0A%20%20%20%20%20%20%20%20%23%20Edge%20case%0A%20%20%20%20%20%20%20%20assert%20get_package_name('')%20%3D%3D%20''%0A%0A%20%20%20%20%40pytest.mark.parametrize(%22module%2C%20expected%22%2C%20%5B%0A%20%20%20%20%20%20%20%20('sklearn'%2C%20'scikit-learn')%2C%0A%20%20%20%20%20%20%20%20('numpy'%2C%20'numpy')%2C%0A%20%20%20%20%20%20%20%20('bs4'%2C%20'bs4')%2C%0A%20%20%20%20%20%20%20%20('requests'%2C%20'requests')%2C%20%20%23%20assuming%20it's%20in%20the%20map%0A%20%20%20%20%20%20%20%20('unknown_pkg'%2C%20'unknown_pkg')%2C%0A%20%20%20%20%5D)%0A%20%20%20%20def%20test_get_package_name_parametrized(module%2C%20expected)%3A%0A%20%20%20%20%20%20%20%20assert%20get_package_name(module)%20%3D%3D%20expected%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20test_generate_docs()%3A%0A%20%20%20%20%23%20Build%20the%20package%20first%0A%20%20%20%20build_package(%22.%2Fnotebooks%2F00_core.py%22%2C%20output_dir%3D%22test_output%22%2C%20docstring_style%3D%22google%22)%0A%0A%20%20%20%20%23%20Generate%20docs%0A%20%20%20%20docs_path%20%3D%20generate_docs(%0A%20%20%20%20%20%20%20%20notebook_path%3D%22.%2Fnotebooks%2F00_core.py%22%2C%0A%20%20%20%20%20%20%20%20package_dir%3D%22test_output%22%2C%0A%20%20%20%20%20%20%20%20output_dir%3D%22test_output%2Fdocs%22%0A%20%20%20%20)%0A%0A%20%20%20%20%23%20Check%20the%20output%20exists%0A%20%20%20%20assert%20Path(docs_path).exists()%0A%0A%20%20%20%20%23%20Optional%3A%20check%20content%0A%20%20%20%20content%20%3D%20Path(docs_path).read_text()%0A%20%20%20%20assert%20%22API%20Reference%22%20in%20content%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Build%20Package%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20build_package(%22.%2Fnotebooks%2F00_core.py%22%2C%20output_dir%3D%22src%22%2C%20docstring_style%3D%22google%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20r%22%22%22%0A%20%20%20%20to%20add%20to%20pypi%20run%20%0A%0A%20%20%20%20%60%60%60%0A%20%20%20%20uv%20build%0A%20%20%20%20%60%60%60%0A%0A%20%20%20%20%23%20Test%20PyPi%0A%20%20%20%20%60%60%60%0A%20%20%20%20uv%20publish%20--publish-url%20https%3A%2F%2Ftest.pypi.org%2Flegacy%2F%20dist%2F*%0A%20%20%20%20%60%60%60%0A%0A%20%20%20%20%23%20Real%20PyPi%0A%20%20%20%20%60%60%60%0A%20%20%20%20uv%20publish%20--token%20pypi-...%20dist%2F*%0A%20%20%20%20%60%60%60%0A%20%20%20%20%22%22%22%0A%20%20%20%20)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20_todo_items%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Normalize%20and%20Restructure%20NBDev%20Deocs%20-%3E%20more%20standard%20documentation%22%2C%20%22status%22%3A%20True%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Extract%20README.md%20from%20notebook%22%2C%20%22status%22%3A%20True%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Integrate%20CLI%20for%20init%2C%20test%2C%20and%20mkdocs%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Static%20Docs%20Generation%20with%20no%20dependencies%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Better%20testing%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Better%20PyPI%20integration%22%2C%20%22status%22%3A%20False%7D%2C%0A%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Generate%20PyPI%20setup%20thing%20from%20marimo%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Enhance%20Pyproject.toml%20with%20repo.%20and%20other%20good%20info%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Multi%20notebook%20support%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22GitHub%20Actions%20Support%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Clean%20up%20os.path%20and%20Path%20-%20use%20Path%20throughout%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%5D%0A%0A%20%20%20%20todo_checklist%20%3D%20mo.md(f%22%22%22%0A%20%20%20%20%23%23%20%F0%9F%93%8B%20Package%20Development%20TODOs%0A%0A%20%20%20%20%7Bmo.vstack(%5B%0A%20%20%20%20%20%20%20%20mo.hstack(%5Bmo.ui.checkbox(value%3Dtodo%5B%22status%22%5D)%2C%20mo.md(f%22**%7Btodo%5B'item'%5D%7D**%22)%5D%2C%20align%3D%22center%22%2C%20justify%3D%22start%22)%20%0A%20%20%20%20%20%20%20%20for%20todo%20in%20_todo_items%0A%20%20%20%20%5D)%7D%0A%20%20%20%20%22%22%22)%0A%0A%20%20%20%20todo_checklist%0A%20%20%20%20return%20(todo_checklist%2C)%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20return%0A%0A%0Aif%20__name__%20%3D%3D%20%22__main__%22%3A%0A%20%20%20%20app.run()%0A
</marimo-code>

<marimo-code-hash hidden="">5a5922d63b7a2e383f9ae92d78bdfaec5a1d129492756841012636e724763a4d</marimo-code-hash>
</body>
</html>
