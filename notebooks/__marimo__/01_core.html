<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/gradient-yHQUC_QB.png" as="image" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/noise-60BoTA8O.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/Lora-VariableFont_wght-B2ootaw-.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/PTSans-Regular-CxL0S8W7.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/PTSans-Bold-D9fedIX3.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/FiraMono-Regular-BTCkDNvf.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/FiraMono-Medium-DU3aDxX5.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/FiraMono-Bold-CLVRCuM9.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/apple-touch-icon.png" />
    <link rel="manifest" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        var scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          // Guard against race condition where iframe isn't ready
          if (!obj.contentWindow?.document?.documentElement) {
            return;
          }
          var element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          var hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          var newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((entries) => {
          setHeight();
        });
        // Only observe if iframe content is ready
        if (obj.contentWindow?.document?.body) {
          resizeObserver.observe(obj.contentWindow.document.body);
        }
      }
    </script>
    <marimo-filename hidden>01_core.py</marimo-filename>
    <!-- TODO(Trevor): Legacy, required by VS Code plugin. Remove when plugin is updated (see marimo/server/_templates/template.py) -->
    <marimo-version data-version="{{ version }}" hidden></marimo-version>
    <marimo-user-config data-config="{{ user_config }}" hidden></marimo-user-config>
    <marimo-server-token data-token="{{ server_token }}" hidden></marimo-server-token>
    <!-- /TODO -->
    <title></title>
    <script type="module" crossorigin crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/index-D_l-X6Gn.js"></script>
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/preload-helper-DrOAYyMx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/chunk-DZLz74EQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/react-cj45iF1i.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/compiler-runtime-bbSa6V1W.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useEventListener-B585XJK6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/react-dom-BjyRIiB0.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/jsx-runtime-srqCRIcI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/Combination-ChS5GBa2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/clsx-BlAkgCmw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/cn-BaXqCYqP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/menu-items-C-HcgP3A.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/hotkeys-BxvS_drY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/button-C3DbbTE3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-C8L1g4FL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/createLucideIcon-DjFD6uqw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/check-qhKOrN4z.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/select-C3lT2mrt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/multi-map-D2K3AXi3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/chevron-right-GjRGzRTx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dropdown-menu-BZzIne4N.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/tooltip-DPrt9GJd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/_Uint8Array-D5Z9rM2X.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/_getTag-D4FHE--3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/_baseIsEqual-DxkXZaQt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/jotai-CqcPj6qO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/invariant-L2NCWzlc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/isArrayLikeObject-JtDUKn_v.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/merge-DfSRWBS2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/zod-U2NFpcFA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/utils-BaKzT0lw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/requests-oIXZIVkS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/once-BumILI4b.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/toDate-DvFyyQ0g.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/isSymbol-xTSywenE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/toString-CSTolK5a.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/_baseSlice-B27Cqkm6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/_hasUnicode-CPHpt5EV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useLifecycle-Rh0PP8AP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/capitalize-C7xY7zs_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/ai-model-dropdown-BJLAGM8G.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/badge-Czo8nniw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/use-toast-CRhq8yNT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/constants-BVB3VlsI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/Deferred-CcxW2rNb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/config-BiJechkS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/uuid-JSI5Ub3m.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/DeferredRequestRegistry-Ccjmqswm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/connection-9kD-dTJL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useNonce-DNmDtTkp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/capabilities-DYNQ6-Fr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/createReducer-Dmpo08fh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-BhO6Skm7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-DYRcKBTi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-nXbuW0eA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-hfg5F1cQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-BzGULjtt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-4dBKvAyu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-0fLgeFYh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-Dg2hoRfc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-BIwaxZLx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/stex-p3EifZIQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/cjs-Cm5h4Epc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/_arrayReduce-DDpPg0Qh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/type-CJyAPkYT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/_baseProperty-CIKnF2iY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/toNumber-B2sDWAxt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/now-B6JN1xKT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/debounce-DEligtiB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/toInteger-Dibvs7y1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/marked.esm-DI1fWf7x.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/main-CJaEi7_U.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/cells-CeDLVlyC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/kbd-BFNVm4a_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/renderShortcut-CeCEf8EV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useEvent-Cf8AdHpz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useDeleteCell-Bc3t2abM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/lazy-C9W0-DeZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/defaultLocale-6gZ00BOD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/precisionRound-Cf6SJD9T.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/defaultLocale-UbHGVTRZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/vega-loader.browser-DCTaBKUs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/tooltip-Di3J3oYn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/ErrorBoundary-DwXLP_VL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/alert-dialog-CxCw9oQX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dialog-ClIOAWpQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useDebounce-BjCf8IUS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/numbers-CSz2fa9C.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/SSRProvider-iPaBBhYk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/context-CWS6NbZC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useNumberFormatter-8H_iASaM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/usePress-B4wenCLd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/input-DLOryQh1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/ImperativeModal-ClGQ4GXE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/cell-link-D5-sZD73.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/alert-DY4s_wkY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/links-hfBoJmYS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/state-D_bGND83.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/MarimoErrorOutput-ffUzGr5X.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/copy-ODI3-5mt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/copy-CysUGjt6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/copy-icon-BKJuA7HR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/spinner-5y3x0_Ja.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-BlRyYfZp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/focus-KxLnFZmO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/popover-B62m-yTZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useRunCells-CXTmbRd-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/mode-Cy78x1lY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/purify.es-BVYGX4Ma.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/RenderHTML-BdiVNqB7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/table-C2UxG4br.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/tabs-BLJxco2q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/add-missing-import-C21Sf8A6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useAsyncData-CpUo9WyH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useIframeCapabilities-Bl5E4Sdk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/LazyAnyLanguageCodeMirror-CmIpJ80x.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/error-banner-Blvf_Trz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/formats-Dr-5EPUQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useTheme-4lRYVxu8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/en-US-ClM1rWQO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/isValid-B43jkoR_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/maps-B0oHN5Qo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/shim-CmijwmU8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/download-juEDJvh4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/extends-EzlYz0hD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/emotion-is-prop-valid.esm-D6cn-CSb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useDateFormatter-D2bcOLFs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/katex-DBEwDXZO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-BY77p5Y8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/range-CZ1Fqm86.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/table-i48JTlkp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/Output-C35CXkvU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/name-cell-input-Dm0PF-vI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useHotkey-BBy_zgts.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-CQqxjtPE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-B0W-62VK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-DA4REUWb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-CTnCzwDO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-BeLp8J28.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-CT07wNjy.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-CcT9aH0f.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-Cyd6BKf3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-D6YDRgIP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-D-fgvVNt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-D2OZ4af5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-Cep6eaBU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-CG6nuuxF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/apl-B3qFo22I.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/asciiarmor-BeSUfcJj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/asn1-Yuw4PYDQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/brainfuck-ONQfYmGG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/clike-BYwnXoSp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/clojure-D0qS3s8l.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/cmake-DrUW7k4w.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/cobol-CTy-rAxC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/coffeescript-DvX85jdj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/commonlisp-rN2-4tA3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/crystal-DH9HaNMr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/css-BWSZbBOG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/cypher-CN0hHtlQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/d-CfFhByTO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/diff-D5KX9jWB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dtd-CAOt54Lh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dylan-BRjSQyPa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/ecl-BFmhHLwk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/eiffel-C-yEc4lk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/elm-D-xosfDF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/erlang-DwS6VO1i.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/simple-mode-iIH2XKLC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/factor-BAvqFhQd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/forth-M-b7RVCY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/fortran-BY42hR-9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/gas-DUer3zP4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/gherkin-BOmBFtxo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/groovy-CYRk_Zq8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/haskell-fLeayyju.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/haxe-DiJvQ3PF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/idl-D0PcccZ6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/javascript-oC9cmYGe.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/julia-z0xq3uqV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/livescript-BbVvVfSY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/lua-CtEmKXsU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/mathematica-B-SjlQIm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/mbox-BdnWvTJv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/mirc-Cyycx3am.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/mllike-DSB5KObs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/modelica-DIZcE54y.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/mscgen-MISBZbzR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/mumps-Cnu1tNUa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/nsis-BjqFSJO3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/ntriples-2rre165b.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/octave-C7u5CeUZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/oz-D5aE2uST.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/pascal-DTApZM3o.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/perl-Ckgh9LJK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/pig-jAl9a1Kh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/powershell-C_IKzlOl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/properties-BdVxDpDJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/protobuf-DLu_SUI6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/pug-B4oU-GIl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/puppet-CShRizHW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/python-CV8UgSMV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/q-D2OTJZH4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/r-DRqIAgj1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/rpm-BStFD27m.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/ruby-C37hkPS4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/sas-CCEIl8BG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/scheme-B0jflgrk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/shell-Cq7B0hFW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/sieve-DS0lS4kt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/smalltalk-HHM53Uii.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/sparql-BMqtnWzI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/stylus-Br2gMpMI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/swift-BJ8qi_zI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/tcl-D0knbOX7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/textile-DrRQSuh3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/toml-C2kDGfZi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/troff-2dFxqWQa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/ttcn-cfg-CBXajWEo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/ttcn-Cj4sIofh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/turtle-CDdPtp5F.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/vb-CtEhAMYU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/vbscript-B0nzdgzL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/velocity-DR7TSall.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/verilog-MmKxT9bW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/vhdl-0jJrpQNA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/webidl-D9f20BkN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/xquery-B0eSGN9q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/yacas-BS613OH9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/z80-CJYC52xh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/esm-DIjo4soQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/objectWithoutPropertiesLoose-CVHckof0.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/esm-DHSHWgjO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/trash-DVXuVt6V.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/ConsoleOutput-BatcZKPn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/icons-CiJ1mek2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/blob-BW6MxaEk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/add-cell-with-ai-y1F5Z2Y5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/chart-no-axes-column-Dr7zIwOF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/square-function-Bn-XGt0r.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/spec-BsAvcxPB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useInstallPackage-DboMQFVg.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/column-preview-C1ukCxS-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useAddCell-BiyTaqjl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/toggle-D5gLerI4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/api-CpOepRkn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/globals-CMwEtzs3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/share-BtLtbyWB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-CjyEJrMA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/memoize-CAcr7Wct.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/_toKey-BbfXi6wG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/_baseSet-CAH-_bH2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/utilities.esm-BzRjRyGG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/floating-outline-BNbDM0Mz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/eye-off-GfTQvjwT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/plus-CBaILRil.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/readonly-python-code-BXa7vpHk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/file-video-camera-Dm03euNS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/file-text-DIapyZTO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/file-GcyCxgZE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/types-C9Bp8jO8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/label-g86spPBc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/form-DUdOrxYS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/textarea-Cnpv5prF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/circle-x-D7HuxVjU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/refresh-ccw-CFRARokg.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/trash-2-CZtzD7wN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/form-CJBhqjDq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/field-4Jci0WvL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/switch-C9lQcGwc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useBoolean-eYq94Ok6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/useDeepCompareMemoize-EIl6UkD1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/types-Dv1hfKnk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/prop-types-CHCkBeAL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/es-BEPT_zOX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/VisuallyHidden-lvJcGOAk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/_baseFlatten-umA55KZB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/get-CQF_Dkll.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/hasIn-DgwLm9Ah.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/_basePickBy-DQPJpG_l.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/pick-DJvAHg2T.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/square-CCW7bjI-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/code-xml-DKjdQj9o.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/globe--Wj1_HOr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/send-BChAQAUR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/refresh-cw-DEnZI2dn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/settings-CN8Z3_-5.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/triangle-alert-BGycXz6g.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/bundle.esm-DtrWSlr6.js">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/cells-BvrC6Bsv.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/dist-CUNt1nyj.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/Output-Br1mGKlI.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/ConsoleOutput-BFFTcC5Y.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.1/dist/assets/index-xc2Ie6gg.css">
  
<script data-marimo="true">
    window.__MARIMO_STATIC__ = {};
    window.__MARIMO_STATIC__.files = {};
</script>
</head>
  <body>
    <div id="root"></div>
    <!-- This is a portal for the data editor to render in -->
    <div id="portal" data-testid="glide-portal" style="position: fixed; left: 0; top: 0; z-index: 9999"></div>
    <script data-marimo="true">
      window.__MARIMO_MOUNT_CONFIG__ = {
            "filename": "01_core.py",
            "mode": "read",
            "version": "0.18.1",
            "serverToken": "static",
            "config": {"ai": {"models": {"custom_models": [], "displayed_models": []}}, "completion": {"activate_on_typing": true, "copilot": false}, "diagnostics": {"sql_linter": true}, "display": {"cell_output": "above", "code_editor_font_size": 14, "dataframes": "rich", "default_table_max_columns": 50, "default_table_page_size": 10, "default_width": "full", "reference_highlighting": false, "theme": "system"}, "formatting": {"line_length": 79}, "keymap": {"overrides": {}, "preset": "default"}, "language_servers": {"pylsp": {"enable_flake8": false, "enable_mypy": true, "enable_pydocstyle": false, "enable_pyflakes": false, "enable_pylint": false, "enable_ruff": true, "enabled": false}}, "mcp": {"mcpServers": {}, "presets": []}, "package_management": {"manager": "uv"}, "runtime": {"auto_instantiate": false, "auto_reload": "off", "default_sql_output": "auto", "on_cell_change": "autorun", "output_max_bytes": 8000000, "reactive_tests": true, "std_stream_max_bytes": 1000000, "watcher_on_save": "lazy"}, "save": {"autosave": "after_delay", "autosave_delay": 1000, "format_on_save": false}, "server": {"browser": "default", "follow_symlink": false}, "snippets": {"custom_paths": [], "include_default_snippets": true}},
            "configOverrides": {},
            "appConfig": {"app_title": "", "auto_download": ["html"], "sql_output": "auto", "width": "columns"},
            "view": {"showAppCode": true},
            "notebook": {"cells": [{"code": "import re\nimport ast\nimport tomllib\nimport copy\nimport os\nimport tempfile\nimport shutil\nimport inspect\nimport sys\nimport importlib\nimport io\nimport zipfile\n\nfrom tokenize import tokenize, COMMENT\nfrom pathlib import Path\nfrom textwrap import dedent, indent\nfrom typing import Callable, Literal, Dict, Any, Tuple, TypedDict, List, Optional\nfrom dataclasses import dataclass\n\nfrom fastcore.docments import docments, docstring, empty, DocmentTbl, extract_docstrings\nfrom fastcore.test import test_eq", "code_hash": "5ee7713b1c857e935b76c81ec57bff5b", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "setup", "name": "setup"}, {"code": "mo.md(r\"\"\"\n## Development Packages\n\"\"\")", "code_hash": "8906a921939f0077798aa184cbc18c62", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Hbol", "name": "_"}, {"code": "import marimo as mo\nimport pytest", "code_hash": "6f40f30abab5849aaf986862372ee9b3", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "MJUe", "name": "_"}, {"code": "mo.md(r\"\"\"\n## Utilities\n\"\"\")", "code_hash": "7414d6191eb0541d3c5984e8d8536d5c", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "vblA", "name": "_"}, {"code": "def is_marimo_export_decorator(\n    decorator # the decorator that marimo attached to the cell\n) -\u003E bool:    # True if the function or cell is reusable - should match marimos detection\n    \"Check if decorator is app.function or app.class_definition (with or without args)\"\n    # If it's a call like @app.function(hide_code=True), check the func part\n    if isinstance(decorator, ast.Call):\n        decorator_name = ast.unparse(decorator.func)\n    else:\n        # Simple decorator like @app.function\n        decorator_name = ast.unparse(decorator)\n\n    return decorator_name in ['app.function', 'app.class_definition']", "code_hash": "3e60bdb851fff8e16a959bcf67c7b268", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "bkHC", "name": "*is_marimo_export_decorator"}, {"code": "mo.md(r\"\"\"\n## Simple is not easy\n\"\"\")", "code_hash": "953b2a0d062e473b7b576ae4a4f2937c", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "lEQa", "name": "_"}, {"code": "def find_all_notebooks(\n    notebooks_dir: str = 'notebooks'  # Directory containing notebook files\n) -\u003E list:  # List of dicts with 'path' and 'module_name'\n    \"Find all marimo notebooks in directory and extract module names\"\n    notebooks_path = Path(notebooks_dir)\n    if not notebooks_path.exists():\n        raise ValueError(f\"Notebooks directory '{notebooks_dir}' does not exist\")\n\n    notebook_files = sorted(notebooks_path.glob('*.py'))\n    if not notebook_files:\n        raise ValueError(f\"No .py files found in '{notebooks_dir}'\")\n\n    notebooks = []\n    for nb_file in notebook_files:\n        if nb_file.name.startswith('.'):\n            continue\n        # Strip leading digits and underscore (e.g., \"01_core.py\" -\u003E \"core\")\n        module_name = re.sub(r'^\\d+_', '', nb_file.stem)\n        notebooks.append({\n            'path': str(nb_file),\n            'module_name': module_name,\n            'filename': nb_file.name\n        })\n\n    return notebooks", "code_hash": "838ced66cc28fcae68b48f64d1627a97", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "PKri", "name": "*find_all_notebooks"}, {"code": "find_all_notebooks()", "code_hash": "6fefa38138baf33aaa2dcd552e96febd", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Xref", "name": "_"}, {"code": "def find_exports(notebook_path: str) -\u003E list:  # List of exported function/class names\n    \"Find all functions/classes decorated with @app.function or @app.class_definition\"\n    source = Path(notebook_path).read_text()\n    tree = ast.parse(source)\n\n    exports = []\n    for node in ast.walk(tree):\n        if isinstance(node, (ast.FunctionDef, ast.ClassDef)):\n            if any(is_marimo_export_decorator(d) for d in node.decorator_list):\n                exports.append(node.name)\n\n    return exports", "code_hash": "cf2759e590c817d9c5147b499ea580d8", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "SFPL", "name": "*find_exports"}, {"code": "find_exports(notebook_path=\"./notebooks/01_core.py\")", "code_hash": "db82a27b26a1256318abfee2b4bd47f0", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "BYtC", "name": "_"}, {"code": "def extract_export_info(\n    notebook_path: str,  # Path to marimo notebook\n    func_name: str       # Name of function/class to extract\n) -\u003E dict:               # Dict with 'docs', 'source', 'main_doc'\n    \"Extract full information about an exported function including docs, source, and docstring\"\n    spec = importlib.util.spec_from_file_location(\"temp_module\", notebook_path)\n    module = importlib.util.module_from_spec(spec)\n    spec.loader.exec_module(module)\n\n    func = getattr(module, func_name)\n    source = inspect.getsource(func)\n\n    # Strip marimo decorators\n    lines = source.split('\\n')\n    clean_lines = [line for line in lines \n                   if not line.strip().startswith('@app.function') \n                   and not line.strip().startswith('@app.class_definition')]\n    clean_source = '\\n'.join(clean_lines)\n\n    return {\n        'docs': docments(func, full=True, eval_str=True),\n        'source': clean_source,\n        'main_doc': docstring(func) or ''\n    }", "code_hash": "7fbcccf7d0811eeeb30190479c03b8ef", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "RGSE", "name": "*extract_export_info"}, {"code": "def scan_all_notebooks(\n    notebooks_dir: str = 'notebooks'  # Directory containing notebook files\n) -\u003E dict:  # Dict mapping module names to their exports and docs\n    \"Scan all notebooks and extract exports with their documentation\"\n    notebooks = find_all_notebooks(notebooks_dir)\n\n    result = {}\n    for nb in notebooks:\n        module_name = nb['module_name']\n        exports = find_exports(nb['path'])\n\n        # Get docs for each export\n        exports_docs = {}\n        for export_name in exports:\n            docs = extract_export_info(nb['path'], export_name)\n            exports_docs[export_name] = docs\n\n        result[module_name] = {\n            'exports': exports_docs,\n            'path': nb['path']\n        }\n\n    return result", "code_hash": "7c992372699bd39e9b945b037597698b", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Kclp", "name": "*scan_all_notebooks"}, {"code": "scan_all_notebooks()", "code_hash": "5c20f78ce4ba01c4d28f5c9160ba7570", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "emfo", "name": "_"}, {"code": "def format_docstring(\n    docs: dict,           # Docments dict from get_docs()\n    style: str = 'google', # 'google' or 'numpy'\n    main_doc: str = ''    # Main docstring text\n) -\u003E str:                 # Formatted docstring\n    \"Format docments dict into Google or NumPy style docstring\"\n    lines = [main_doc] if main_doc else []\n\n    # Get params (everything except 'return')\n    params = {k: v for k, v in docs.items() if k != 'return'}\n\n    if style == 'google':\n        if params:\n            lines.append('')\n            lines.append('Args:')\n            for name, info in params.items():\n                anno = info.get('anno')\n                anno_str = f\" ({anno.__name__})\" if anno != empty and hasattr(anno, '__name__') else ''\n                docment = info.get('docment', '') or ''\n                lines.append(f'    {name}{anno_str}: {docment}')\n\n        ret = docs.get('return')\n        if ret and ret.get('anno') != empty:\n            lines.append('')\n            lines.append('Returns:')\n            ret_anno = ret['anno']\n            ret_str = ret_anno.__name__ if hasattr(ret_anno, '__name__') else str(ret_anno)\n            ret_doc = ret.get('docment', '') or ''\n            lines.append(f'    {ret_str}: {ret_doc}')\n\n    elif style == 'numpy':\n        if params:\n            lines.append('')\n            lines.append('Parameters')\n            lines.append('----------')\n            for name, info in params.items():\n                anno = info.get('anno')\n                anno_str = anno.__name__ if anno != empty and hasattr(anno, '__name__') else ''\n                lines.append(f'{name} : {anno_str}')\n                docment = info.get('docment', '') or ''\n                if docment:\n                    lines.append(f'    {docment}')\n\n        ret = docs.get('return')\n        if ret and ret.get('anno') != empty:\n            lines.append('')\n            lines.append('Returns')\n            lines.append('-------')\n            ret_anno = ret['anno']\n            ret_str = ret_anno.__name__ if hasattr(ret_anno, '__name__') else str(ret_anno)\n            lines.append(ret_str)\n            ret_doc = ret.get('docment', '') or ''\n            if ret_doc:\n                lines.append(f'    {ret_doc}')\n\n    return '\\n'.join(lines)", "code_hash": "86aeeb89cabf3c3fac9462c3c089919f", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Hstk", "name": "*format_docstring"}, {"code": "def replace_docstring(\n    func_source: str,      # Original function source code\n    new_docstring: str     # New formatted docstring\n) -\u003E str:                  # Function source with updated docstring\n    \"Replace the docstring in function source code\"\n    tree = ast.parse(func_source)\n    func_node = tree.body[0]\n\n    # Check if first statement is a docstring\n    if (func_node.body and \n        isinstance(func_node.body[0], ast.Expr) and \n        isinstance(func_node.body[0].value, ast.Constant)):\n        # Replace existing docstring\n        func_node.body[0].value.value = new_docstring\n    else:\n        # Insert new docstring at the beginning\n        doc_node = ast.Expr(value=ast.Constant(value=new_docstring))\n        func_node.body.insert(0, doc_node)\n\n    return ast.unparse(tree)", "code_hash": "785ecf39778dc62e2b56d5e1f72bb884", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "nWHF", "name": "*replace_docstring"}, {"code": "mo.md(r\"\"\"\n## Validation\n\"\"\")", "code_hash": "dc928000cdd70bf170403b974c2981c9", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "iLit", "name": "_"}, {"code": "def validate_setup_metadata(\n    setup_metadata: dict  # Package metadata from setup cell\n) -\u003E None:                # Raises ValueError if invalid\n    \"\"\"Validate that required metadata keys exist and have valid values for package generation\"\"\"\n\n    required = ['__version__', '__description__', '__author__', '__license__']\n    missing = [k for k in required if k not in setup_metadata]\n\n    if missing:\n        raise ValueError(\n            f\"Setup cell missing required metadata: {', '.join(missing)}\\n\\n\"\n            f\"Add these to your setup cell:\\n\" + \n            '\\n'.join([f\"    {k} = '...'\" for k in missing])\n        )\n\n    # Validate version\n    version = setup_metadata['__version__']\n    if not version or not version.strip():\n        raise ValueError(\"__version__ cannot be empty\")\n\n    # Validate description\n    desc = setup_metadata['__description__']\n    if not desc or not desc.strip():\n        raise ValueError(\"__description__ cannot be empty\")\n\n    # Validate author format\n    author = setup_metadata['__author__']\n    if not author or not author.strip():\n        raise ValueError(\"__author__ cannot be empty\")\n    if '\u003C' not in author or '\u003E' not in author:\n        raise ValueError(\"__author__ must be in format 'Name \u003Cemail@example.com\u003E'\")\n\n    email_part = author.split('\u003C')[1].split('\u003E')[0].strip()\n    if not email_part or '@' not in email_part:\n        raise ValueError(f\"__author__ email '{email_part}' is not valid\")\n\n    # Validate license\n    license_val = setup_metadata['__license__']\n    if not license_val or not license_val.strip():\n        raise ValueError(\"__license__ cannot be empty\")", "code_hash": "d94687028d19223d54cfe8073ac9f455", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "ZHCJ", "name": "*validate_setup_metadata"}, {"code": "mo.md(r\"\"\"\n## Dynamic Docments test\n\"\"\")", "code_hash": "49f19fa0f1d30d65fb239f897dbf8b6b", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "ROlb", "name": "_"}, {"code": "def extract_docs_dynamic(\n    clean_source: str,          # Function source code (without decorators)\n    func_name: str,             # Name of the function to extract docs from\n    setup_imports: list = None,  # Add this parameter\n    eval_str: bool = True       # Weather to eval strings or not...idk the idfference. \n) -\u003E dict:                      # Docments-style dict with param info\n    \"\"\"Extract parameter docs by dynamically importing the function\"\"\"\n\n    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f:\n        if setup_imports:\n            for imp in setup_imports:\n                f.write(imp + '\\n')\n            f.write('\\n')\n        f.write(clean_source)\n        temp_path = f.name\n\n    try:\n        # Import the module dynamically\n        spec = importlib.util.spec_from_file_location(\"temp_module\", temp_path)\n        module = importlib.util.module_from_spec(spec)\n        spec.loader.exec_module(module)\n\n        # Get the function object\n        func = getattr(module, func_name)\n\n        # Extract docs with fastcore\n        return docments(func, full=True, args_kwargs=True, eval_str= eval_str)\n    finally:\n        os.unlink(temp_path)", "code_hash": "0e85bd2e714befcaf282c15f4d4e2d59", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "qnkX", "name": "*extract_docs_dynamic"}, {"code": "def extract_docs_tbl(\n    clean_source: str,          # Function source code (without decorators)\n    func_name: str,             # Name of the function to extract docs from\n    setup_imports: list = None  # Add this parameter\n) -\u003E dict:                      # Docments-style dict with param info\n    \"\"\"Extract parameter docs by dynamically importing the function\"\"\"\n\n    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f:\n        if setup_imports:\n            for imp in setup_imports:\n                f.write(imp + '\\n')\n            f.write('\\n')\n        f.write(clean_source)\n        temp_path = f.name\n\n    try:\n        # Import the module dynamically\n        spec = importlib.util.spec_from_file_location(\"temp_module\", temp_path)\n        module = importlib.util.module_from_spec(spec)\n        spec.loader.exec_module(module)\n\n        # Get the function object\n        func = getattr(module, func_name)\n\n        # Extract docs with fastcore\n        return DocmentTbl(func)\n    finally:\n        os.unlink(temp_path)", "code_hash": "139ef42d674450d541f3f3b4d83a559a", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "TqIu", "name": "*extract_docs_tbl"}, {"code": "sample_code = \"\"\"\n\"This is a module.\"\n\ndef top_func(\n    a,     # this is the A parameter\n    b,\n    *args,\n    **kw):\n        \"This is top-level.\"\n        pass\n\nclass SampleClass:\n    \"This is a class.\"\n\n    def __init__(self, x, y):\n        \"Constructor for SampleClass.\"\n        pass\n\n    def method1(self, param1):\n        \"This is method1.\"\n        pass\n\n    def _private_method(self):\n        \"This should not be included.\"\n        pass\n\nclass AnotherClass:\n    def __init__(self, a, b):\n        \"This class has no separate docstring.\"\n        pass\"\"\"\n\nexp = {'_module': ('This is a module.', ''),\n       'top_func': ('This is top-level.', 'a, b, *args, **kw'),\n       'SampleClass': ('This is a class.', 'self, x, y'),\n       'SampleClass.method1': ('This is method1.', 'self, param1'),\n       'AnotherClass': ('This class has no separate docstring.', 'self, a, b')}\ntest_eq(extract_docstrings(sample_code), exp)\n\nextract_docstrings(sample_code)", "code_hash": "85bd925f375a1318e417aabbbd1bcb10", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Vxnm", "name": "_"}, {"code": "_test_imports = ['from typing import List']\n_test_imports = None\ntest_regular_class = '''\nclass MyClass:\n    \"\"\"A simple test class\"\"\"\n\n    def __init__(\n        self,\n        name: str,        # Name of the instance\n        value: int = 10   # Initial value\n    ):\n        \"Initialize MyClass\"\n        self.name = name\n        self.value = value\n'''\n\n#extract_docs_dynamic(test_regular_class, 'MyClass')\nextract_docs_tbl(test_regular_class, \"MyClass\")", "code_hash": "969d4c657efa3ecf695a644147de0a53", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "DnEU", "name": "_"}, {"code": "test_source = '''\ndef add(a: int, b: int, *args, **kwargs) -\u003E int:\n    \"Add `a` to `b`\"\n    return a + b\n'''\nextract_docs_dynamic(test_source, 'add', eval_str=False)", "code_hash": "280e4253ef35d56b8ff447a329e1ace4", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ulZA", "name": "_"}, {"code": "test_nbdev = '''\ndef write_init(\n    package_name: str,       # Package name\n    metadata: dict,          # Project metadata\n    output_file: str         # Path to __init__.py\n) -\u003E str:                    # Path to written file\n    \"Write package __init__.py\"\n    return output_file\n'''\n\nresult2 = extract_docs_dynamic(test_nbdev, 'write_init')\nresult2", "code_hash": "4189242c0d4165743b07562a88656564", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ecfG", "name": "_"}, {"code": "test_defaults = '''\ndef scan_notebooks(\n    notebooks_dir: str = 'notebooks',    # Directory containing notebook files\n    docstring_style: str = 'nbdev'       # Docstring style for all exports\n) -\u003E dict:                                # Scan result\n    \"Scan notebooks directory\"\n    return {}\n'''\n\nresult3 = extract_docs_dynamic(test_defaults, 'scan_notebooks')\nresult3", "code_hash": "d70c249999780fca1461e7ae90339e29", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Pvdt", "name": "_"}, {"code": "test4 = '''\ndef add(\n    # The first operand\n    a:int,\n    # This is the second of the operands to the *addition* operator.\n    # Note that passing a negative value here is the equivalent of the *subtraction* operator.\n    b:int = 7\n):\n    \"Add `a` to `b`\"\n    return a+b\n'''\nextract_docs_dynamic(test4, \"add\")", "code_hash": "de4f978fe11b8da6d2b0e7227d1477b9", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "ZBYS", "name": "_"}, {"code": "mo.md(r\"\"\"\n## Scan /notebooks Directory\n\"\"\")", "code_hash": "99071018100f1640cbf07ac406f55e1a", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "aLJB", "name": "_"}, {"code": "def scan_notebooks(\n    notebooks_dir: str = 'notebooks', # Directory containing notebook files\n    docstring_style: str = 'nbdev'    # Docstring style for all exports\n) -\u003E dict:                            # Dict with keys: 'metadata', 'modules', 'index_path'\n    \"Scan notebooks directory and extract all exports, metadata, and README\"\n\n    notebooks_path = Path(notebooks_dir)\n\n    if not notebooks_path.exists():\n        raise ValueError(f\"Notebooks directory '{notebooks_dir}' does not exist\")\n\n    # Get all .py files, sorted\n    notebook_files = sorted(notebooks_path.glob('*.py'))\n\n    if not notebook_files:\n        raise ValueError(f\"No .py files found in '{notebooks_dir}'\")\n\n    metadata = None\n    metadata_found_in = None\n    index_path = None\n    modules = []\n\n    for notebook_file in notebook_files:\n        # Skip __pycache__ and hidden files\n        if notebook_file.name.startswith('.') or notebook_file.name == '__pycache__':\n            continue\n\n        # Extract from this notebook\n        nb_metadata, setup_imports, exports, export_names = extract_exports(\n            str(notebook_file), \n            docstring_style\n        )\n\n        # Check for metadata (should only be in one file)\n        if nb_metadata:\n            if metadata_found_in:\n                raise ValueError(\n                    f\"Project metadata defined in multiple notebooks:\\n\"\n                    f\"  - {metadata_found_in}\\n\"\n                    f\"  - {notebook_file.name}\\n\"\n                    f\"Metadata should only be defined in one notebook (typically 00_index or index.py)\"\n                )\n            metadata = nb_metadata\n            metadata_found_in = notebook_file.name\n            index_path = str(notebook_file)\n\n\n        # Store module info (even if no exports, we track the imports)\n        module_name = re.sub(r'^\\d+_', '', notebook_file.stem)\n\n        modules.append({\n            'name': module_name,\n            'imports': setup_imports,\n            'exports': exports,\n            'export_names': export_names\n        })\n\n    # Validate we found required metadata\n    if not metadata:\n        raise ValueError(\n            f\"No project metadata found in any notebook.\\n\"\n            f\"Add metadata to your config notebook (e.g., 00_index.py) in the setup cell:\\n\"\n            f\"    __version__ = '0.1.0'\\n\"\n            f\"    __description__ = 'My package'\\n\"\n            f\"    __author__ = 'Name \u003Cemail@example.com\u003E'\\n\"\n            f\"    __license__ = 'MIT'\"\n        )\n\n    return {\n        'metadata': metadata,\n        'modules': modules,\n        'index_path': index_path\n    }", "code_hash": "5b385237676be023eca88df0b23b5e46", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "nHfw", "name": "*scan_notebooks"}, {"code": "mo.md(r\"\"\"\n## Extraction\n\"\"\")", "code_hash": "e52dc2e14ebd53c4a3fb94efdedbe9d5", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "xXTn", "name": "_"}, {"code": "def extract_exports(\n    notebook_path: str,             # Path to marimo notebook file\n    docstring_style: str = 'nbdev'  # Target docstring format: 'google', 'numpy', or 'nbdev'\n) -\u003E tuple:                         # (setup_metadata, setup_imports, exports, export_names)\n    \"Extract metadata, imports, and exportable functions/classes from marimo notebook\"\n\n    source_code = Path(notebook_path).read_text()\n    tree = ast.parse(source_code)\n\n    setup_metadata = {}\n    setup_imports = []\n    exports = []\n    export_names = []\n\n    for node in tree.body:\n        # Extract setup cell content\n        if isinstance(node, ast.With):\n            for stmt in node.body:\n                if isinstance(stmt, ast.Assign):\n                    setup_metadata[stmt.targets[0].id] = ast.literal_eval(stmt.value)\n                elif isinstance(stmt, (ast.Import, ast.ImportFrom)):\n                    setup_imports.append(ast.unparse(stmt))\n\n        # Extract exportable functions/classes\n        elif isinstance(node, (ast.FunctionDef, ast.ClassDef)):\n            if any(is_marimo_export_decorator(d) for d in node.decorator_list):\n                if node.name.startswith('test_'):\n                    continue\n\n                # Get original source\n                original_source = ast.get_source_segment(source_code, node)\n\n                # Remove marimo decorators\n                lines = original_source.split('\\n')\n                filtered_lines = []\n                for line in lines:\n                    stripped = line.strip()\n                    if not (stripped.startswith('@app.function') or \n                           stripped.startswith('@app.class_definition')):\n                        filtered_lines.append(line)\n\n                clean_source = '\\n'.join(filtered_lines)\n\n                # Reformat if needed\n                if docstring_style != 'nbdev':\n                    try:\n                        docs = extract_param_docs_from_ast(clean_source)\n                        formatted_source = build_formatted_docstring(\n                            clean_source, docs, docstring_style\n                        )\n                        exports.append(formatted_source)\n                    except Exception as e:\n                        print(f\"\u26a0\ufe0f  Could not reformat {node.name}: {e}\")\n                        exports.append(clean_source)\n                else:\n                    exports.append(clean_source)\n\n                export_names.append(node.name)\n\n    return (setup_metadata, setup_imports, exports, export_names)", "code_hash": "4969c2fede0db613631b313750466918", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "AjVT", "name": "*extract_exports"}, {"code": "def extract_param_docs_from_ast(\n    func_source: str  # Function source code as string\n) -\u003E dict:            # Dict mapping param names to {'anno': type, 'docment': comment}\n    \"Extract parameter docs using AST + tokenizer, no exec needed\"\n\n    # Parse AST to get parameter info\n    tree = ast.parse(func_source)\n    func_node = tree.body[0]\n\n    # Get parameter line numbers and names from AST\n    param_locs = {}\n    for arg in func_node.args.args:\n        param_locs[arg.lineno] = {\n            'name': arg.arg,\n            'anno': ast.unparse(arg.annotation) if arg.annotation else None\n        }\n\n    # Add *args if present\n    if func_node.args.vararg:\n        param_locs[func_node.args.vararg.lineno] = {\n            'name': func_node.args.vararg.arg,\n            'anno': None\n        }\n\n    # Add keyword-only args\n    for arg in func_node.args.kwonlyargs:\n        param_locs[arg.lineno] = {\n            'name': arg.arg,\n            'anno': ast.unparse(arg.annotation) if arg.annotation else None\n        }\n\n    # Add **kwargs if present\n    if func_node.args.kwarg:\n        param_locs[func_node.args.kwarg.lineno] = {\n            'name': func_node.args.kwarg.arg,\n            'anno': None\n        }\n\n    # Add return annotation\n    if func_node.returns:\n        param_locs[func_node.returns.lineno] = {\n            'name': 'return',\n            'anno': ast.unparse(func_node.returns)\n        }\n\n    # Tokenize to get comments\n    tokens = tokenize(io.BytesIO(func_source.encode('utf-8')).readline)\n    clean_re = re.compile(r'^\\s*#(.*)\\s*$')\n    comments = {}\n    for token in tokens:\n        if token.type == COMMENT:\n            match = clean_re.findall(token.string)\n            if match:\n                comments[token.start[0]] = match[0].strip()\n\n    # Match comments to parameters\n    result = {}\n    for line, param_info in param_locs.items():\n        name = param_info['name']\n        comment = comments.get(line, '')\n        result[name] = {\n            'anno': param_info['anno'],\n            'docment': comment\n        }\n\n    return result", "code_hash": "5d2bfda0ac6ceb12d240d2c57c79aa03", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "pHFh", "name": "*extract_param_docs_from_ast"}, {"code": "def build_formatted_docstring(\n    func_source: str,       # Original function source code\n    docs: dict,             # Parameter docs from extract_param_docs_from_ast\n    target_style: str       # 'google' or 'numpy'\n) -\u003E str:                   # Function source with reformatted docstring\n    \"Build formatted docstring from docs dict\"\n\n    tree = ast.parse(func_source)\n    func_node = tree.body[0]\n    existing_doc = ast.get_docstring(func_node) or \"\"\n\n    lines = [existing_doc.strip()] if existing_doc else []\n\n    if target_style == 'google':\n        params = {k: v for k, v in docs.items() if k != 'return' and v.get('docment')}\n        if params:\n            lines.append(\"\")\n            lines.append(\"Args:\")\n            for name, info in params.items():\n                anno = info.get('anno', '')\n                doc = info.get('docment', '')\n                if anno:\n                    lines.append(f\"    {name} ({anno}): {doc}\")\n                else:\n                    lines.append(f\"    {name}: {doc}\")\n\n        ret = docs.get('return')\n        if ret and ret.get('docment'):\n            lines.append(\"\")\n            lines.append(\"Returns:\")\n            ret_anno = ret.get('anno', '')\n            ret_doc = ret.get('docment', '')\n            if ret_anno:\n                lines.append(f\"    {ret_anno}: {ret_doc}\")\n            else:\n                lines.append(f\"    {ret_doc}\")\n\n    elif target_style == 'numpy':\n        params = {k: v for k, v in docs.items() if k != 'return' and v.get('docment')}\n        if params:\n            lines.append(\"\")\n            lines.append(\"Parameters\")\n            lines.append(\"----------\")\n            for name, info in params.items():\n                anno = info.get('anno', '')\n                doc = info.get('docment', '')\n                if anno:\n                    lines.append(f\"{name} : {anno}\")\n                else:\n                    lines.append(f\"{name}\")\n                if doc:\n                    lines.append(f\"    {doc}\")\n\n        ret = docs.get('return')\n        if ret and ret.get('docment'):\n            lines.append(\"\")\n            lines.append(\"Returns\")\n            lines.append(\"-------\")\n            ret_anno = ret.get('anno', '')\n            ret_doc = ret.get('docment', '')\n            if ret_anno:\n                lines.append(f\"{ret_anno}\")\n            if ret_doc:\n                lines.append(f\"    {ret_doc}\")\n\n    new_docstring = '\\n'.join(lines)\n\n    # Replace docstring in AST\n    for node in ast.walk(tree):\n        if isinstance(node, (ast.FunctionDef, ast.AsyncFunctionDef)):\n            if (node.body and isinstance(node.body[0], ast.Expr) \n                and isinstance(node.body[0].value, ast.Constant)):\n                node.body[0].value.value = new_docstring\n            else:\n                doc_node = ast.Expr(value=ast.Constant(value=new_docstring))\n                node.body.insert(0, doc_node)\n            break\n\n    return ast.unparse(tree)", "code_hash": "2e6c9075eec80fa55d13c71f04370492", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "NCOB", "name": "*build_formatted_docstring"}, {"code": "mo.md(r\"\"\"\n## Write Files\n\"\"\")", "code_hash": "40a3fa744de82249576f06362adb2cd6", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "aqbW", "name": "_"}, {"code": "def update_pyproject_toml(\n    setup_metadata: dict,      # Package metadata from setup cell\n    pyproject_path: str = \"pyproject.toml\"  # Path to pyproject.toml\n) -\u003E str:                      # Path to updated file\n    \"Update pyproject.toml with metadata from notebook setup cell\"\n\n    # Validate metadata first\n    validate_setup_metadata(setup_metadata)\n\n    # Read existing pyproject.toml\n    with open(pyproject_path, 'rb') as f:\n        config = tomllib.load(f)\n\n    # Update [project] section with required fields\n    if 'project' not in config:\n        config['project'] = {}\n\n    config['project']['version'] = setup_metadata['__version__']\n    config['project']['description'] = setup_metadata['__description__']\n    config['project']['license'] = {'text': setup_metadata['__license__']}\n\n    # Parse author\n    author_name = setup_metadata['__author__'].split('\u003C')[0].strip()\n    author_email = setup_metadata['__author__'].split('\u003C')[1].strip('\u003E')\n    config['project']['authors'] = [{'name': author_name, 'email': author_email}]\n\n    # Add optional fields if present\n    if '__keywords__' in setup_metadata and setup_metadata['__keywords__']:\n        config['project']['keywords'] = setup_metadata['__keywords__']\n\n    if '__classifiers__' in setup_metadata and setup_metadata['__classifiers__']:\n        config['project']['classifiers'] = setup_metadata['__classifiers__']\n\n    # Add project URLs if present\n    if any(k in setup_metadata for k in ['__repository__', '__homepage__', '__documentation__']):\n        config['project']['urls'] = {}\n        if '__repository__' in setup_metadata:\n            config['project']['urls']['Repository'] = setup_metadata['__repository__']\n        if '__homepage__' in setup_metadata:\n            config['project']['urls']['Homepage'] = setup_metadata['__homepage__']\n        if '__documentation__' in setup_metadata:\n            config['project']['urls']['Documentation'] = setup_metadata['__documentation__']\n\n    # Write back using tomlkit to preserve formatting\n    try:\n        import tomlkit\n        with open(pyproject_path, 'r') as f:\n            doc = tomlkit.load(f)\n\n        # Update with new values\n        if 'project' not in doc:\n            doc['project'] = {}\n\n        doc['project']['version'] = setup_metadata['__version__']\n        doc['project']['description'] = setup_metadata['__description__']\n        doc['project']['license'] = {'text': setup_metadata['__license__']}\n        doc['project']['authors'] = [{'name': author_name, 'email': author_email}]\n\n        if '__keywords__' in setup_metadata and setup_metadata['__keywords__']:\n            doc['project']['keywords'] = setup_metadata['__keywords__']\n\n        if '__classifiers__' in setup_metadata and setup_metadata['__classifiers__']:\n            doc['project']['classifiers'] = setup_metadata['__classifiers__']\n\n        if any(k in setup_metadata for k in ['__repository__', '__homepage__', '__documentation__']):\n            if 'urls' not in doc['project']:\n                doc['project']['urls'] = {}\n            if '__repository__' in setup_metadata:\n                doc['project']['urls']['Repository'] = setup_metadata['__repository__']\n            if '__homepage__' in setup_metadata:\n                doc['project']['urls']['Homepage'] = setup_metadata['__homepage__']\n            if '__documentation__' in setup_metadata:\n                doc['project']['urls']['Documentation'] = setup_metadata['__documentation__']\n\n        with open(pyproject_path, 'w') as f:\n            tomlkit.dump(doc, f)\n\n    except ImportError:\n        # Fallback if tomlkit not available - just append to file\n        print(\"\u26a0\ufe0f  tomlkit not available, using basic TOML writing\")\n        import json\n        # This is a simple fallback - you might want to use tomli-w instead\n        with open(pyproject_path, 'a') as f:\n            f.write(f\"\\n# Updated by m-dev\\n\")\n\n    print(f\"\u2705 Updated {pyproject_path} with metadata\")\n    return pyproject_path", "code_hash": "7170e9fb255fff7fece6eb08bde3d474", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "TRpd", "name": "*update_pyproject_toml"}, {"code": "def write_module(\n    module_name: str,        # Name of the module (without .py)\n    setup_imports: list,     # Import statements from setup cell\n    exports: list,           # Exported function/class source code\n    output_file: str         # Path for output file\n) -\u003E str:                    # Path to written file\n    \"Write Python module file with imports and exported code\"\n    with Path(output_file).open('w') as f:\n        # Write imports\n        if setup_imports:\n            for imp in setup_imports:\n                f.write(imp + '\\n')\n            f.write('\\n')\n\n        # Write exports\n        for export in exports:\n            f.write(export + '\\n\\n')\n\n    return output_file", "code_hash": "fc31fadd178ddf677e60189c38ecb739", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "TXez", "name": "*write_module"}, {"code": "def write_init(\n    package_name: str,       # Package name\n    metadata: dict,          # Project metadata from setup cell\n    modules: list,           # List of module dicts from scan_notebooks\n    output_file: str         # Path to __init__.py\n) -\u003E str:                    # Path to written file\n    \"Write package __init__.py with metadata and cross-module imports \"\n\n    with Path(output_file).open('w') as f:\n        # Write package docstring\n        description = metadata.get('__description__', 'No description provided')\n        f.write(f'\"\"\"{description}\"\"\"\\n\\n')\n\n        # Write metadata\n        f.write(f\"__version__ = '{metadata['__version__']}'\\n\")\n\n        if '__author__' in metadata:\n            author_name = metadata['__author__'].split('\u003C')[0].strip()\n            f.write(f\"__author__ = '{author_name}'\\n\")\n\n        f.write('\\n')\n\n        # Collect all export names across modules\n        all_exports = []\n\n        # Write imports from submodules\n        for module in modules:\n            # Skip the config module (00_config or similar) - no exports usually\n            if module['name'].startswith('00_') or not module['export_names']:\n                continue\n\n            if module['export_names']:\n                exports_str = ', '.join(module['export_names'])\n                f.write(f\"from .{module['name']} import {exports_str}\\n\")  # \u003C-- The key fix: added '.' for relative import\n                all_exports.extend(module['export_names'])\n\n        # Write __all__\n        if all_exports:\n            f.write('\\n')\n            f.write('__all__ = [\\n')\n            for name in all_exports:\n                f.write(f'    \"{name}\",\\n')\n            f.write(']\\n')\n\n    print(f\"\u2705 Generated {output_file}\")\n    return output_file", "code_hash": "6a01136d996e1776e25957c7b45e18ac", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "dNNg", "name": "*write_init"}, {"code": "mo.md(r\"\"\"\n## Readme Extraction\n\"\"\")", "code_hash": "49fd1ad7ca22d8b5264cf62fd3109e6b", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "yCnT", "name": "_"}, {"code": "def extract_mo_md_content(source: str) -\u003E str:\n    \"Extract the string content from a mo.md() call, handling r/f/rf string prefixes\"\n    # Find mo.md( and extract everything between the opening and closing quotes\n    import re\n    # Match mo.md with optional whitespace, then capture string with various prefixes\n    pattern = r'mo\\.md\\s*\\(\\s*[rf]*\"\"\"(.*?)\"\"\"|mo\\.md\\s*\\(\\s*[rf]*\\'\\'\\'(.*?)\\'\\'\\'|mo\\.md\\s*\\(\\s*[rf]*\"(.*?)\"|mo\\.md\\s*\\(\\s*[rf]*\\'(.*?)\\''\n    match = re.search(pattern, source, re.DOTALL)\n    if match:\n        # Return whichever group matched (triple quotes or single quotes)\n        for i in range(1, len(match.groups()) + 1):\n            if match.group(i) is not None:\n                return match.group(i)\n    return ''", "code_hash": "b48d73c2f0aaba523323ed05e96797e4", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "wlCL", "name": "*extract_mo_md_content"}, {"code": "def extract_all_mo_md(source: str) -\u003E list:  # Returns list of strings\n    \"Extract all mo.md() content from source\"\n    pattern = r'mo\\.md\\s*\\(\\s*[rf]*\"\"\"(.*?)\"\"\"|mo\\.md\\s*\\(\\s*[rf]*\\'\\'\\'(.*?)\\'\\'\\'|mo\\.md\\s*\\(\\s*[rf]*\"(.*?)\"|mo\\.md\\s*\\(\\s*[rf]*\\'(.*?)\\''\n    results = []\n    for match in re.finditer(pattern, source, re.DOTALL):\n        for i in range(1, len(match.groups()) + 1):\n            if match.group(i) is not None:\n                results.append(match.group(i))\n    return results", "code_hash": "7c6ca694f84887a17f0fc3604b15b1a3", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "kqZH", "name": "*extract_all_mo_md"}, {"code": "def extract_readme(\n    setup_metadata: dict,     # Setup cell metadata for substitution\n    index_path: str          # Path to index notebook file\n) -\u003E str:                    # Path to README.md or empty string\n    \"Extract all mo.md() cells from index.py and substitute metadata\"\n\n    index_path = Path(index_path) if index_path else None\n    if not index_path or not index_path.exists():\n        print('\u26a0\ufe0f  No index.py found. README.md will not be generated.')\n        return ''\n\n    source_code = index_path.read_text()\n    md_contents = extract_all_mo_md(source_code)\n\n    if not md_contents:\n        print('\u26a0\ufe0f  No mo.md() cells found in index.py')\n        return ''\n\n    # Join all markdown cells, substitute metadata, write\n    readme_text = '\\n\\n'.join(md_contents)\n    for key, value in setup_metadata.items():\n        readme_text = readme_text.replace(f'{{{key}}}', str(value))\n\n    Path('README.md').write_text(readme_text)\n    print('\u2705 README.md generated from index.py')\n    return 'README.md'", "code_hash": "f624e285952fda7bade688c317bd3a8d", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "wAgl", "name": "*extract_readme"}, {"code": "mo.md(r\"\"\"\n## Build Package\n\"\"\")", "code_hash": "1bb040660b559bcb05974ec7749f974d", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "rEll", "name": "_"}, {"code": "def build_package(\n    notebooks_dir: str = 'notebooks',     # Directory with notebook files\n    output_dir: str = 'src',              # Output directory for package\n    docstring_style: str = 'nbdev'        # Docstring format\n) -\u003E str:                                 # Path to built package\n    \"Build a Python package from marimo notebook(s)\"\n\n    print(f\"\ud83d\udd0d Scanning notebooks in {notebooks_dir}/\")\n\n    # Scan all notebooks\n    scan_result = scan_notebooks(notebooks_dir, docstring_style)\n    metadata   = scan_result['metadata']\n    modules    = scan_result['modules']\n    index_path = scan_result['index_path']\n\n    # Get package name from metadata or pyproject.toml\n    package_name = metadata.get('__package_name__')\n    if not package_name:\n        # Try to read from existing pyproject.toml\n        try:\n            import tomllib\n            with open('pyproject.toml', 'rb') as f:\n                config = tomllib.load(f)\n                package_name = config['project']['name']\n        except:\n            raise ValueError(\"No __package_name__ in metadata and no pyproject.toml found\")\n\n    package_name = package_name.replace('-', '_')  # Convert to valid Python identifier\n\n    print(f\"\ud83d\udce6 Building package: {package_name}\")\n\n    # Create output directory structure\n    package_dir = Path(output_dir) / package_name\n    package_dir.mkdir(parents=True, exist_ok=True)\n\n    # Write individual module files\n    for module in modules:\n        # Skip config files (no exports typically)\n        if module['name'] == 'index': continue\n\n        if module['exports']:  # Only write if there are exports\n            module_file = package_dir / f\"{module['name']}.py\"\n            write_module(\n                module['name'],\n                module['imports'],\n                module['exports'],\n                str(module_file)\n            )\n            print(f\"  \u2705 {module['name']}.py\")\n\n    # Write __init__.py\n    init_file = package_dir / '__init__.py'\n    write_init(package_name, metadata, modules, str(init_file))\n\n    # Update pyproject.toml with metadata\n    if Path('pyproject.toml').exists():\n        update_pyproject_toml(metadata, 'pyproject.toml')\n    else:\n        print(\"\u26a0\ufe0f  No pyproject.toml found. Run 'uv init' first.\")\n\n    # Extract README if present\n    extract_readme(metadata, index_path)\n\n    print(f\"\\n\u2705 Package built in {output_dir}/{package_name}/\")\n    return str(output_dir)", "code_hash": "b5006ae9c1aad3655e54475be5ac4593", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "dGlV", "name": "*build_package"}, {"code": "mo.md(r\"\"\"\n## Documentation Converter\n\"\"\")", "code_hash": "cfb18cf7f9dc97b1947d428c8853442a", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "SdmI", "name": "_"}, {"code": "def add(\n    # The first operand\n    a:int,\n    # This is the second of the operands to the *addition* operator.\n    # Note that passing a negative value here is the equivalent of the *subtraction* operator.\n    b:int,\n)-\u003Eint: # The result is calculated using Python's builtin `+` operator.\n    \"Add `a` to `b`\"\n    return a+b", "code_hash": "9fa8ff1d3a81a4dc1961f229da1af791", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "lgWD", "name": "*add"}, {"code": "def convert_docstyle(\n    func,                   # The function to convert documentation for\n    target_style='google',  # One of 'docments', 'google', or 'numpy'\n    include_signature=True  # Whether to include the function signature\n) -\u003E str:                   # String representation in the target documentation style\n    \"Convert function documentation between different styles.\"\n\n    # Extract all the information we need\n    docs_full = docments(func, full=True)\n    main_doc = docstring(func)\n    func_name = func.__name__\n    sig = inspect.signature(func)\n\n    # Separate return from parameters\n    params = {k: v for k, v in docs_full.items() if k != 'return'}\n    return_info = docs_full.get('return', {})\n\n    if target_style == 'docments':\n        return format_docments_style(func_name, params, return_info, main_doc, include_signature)\n    elif target_style == 'google':\n        return format_google_style(func_name, params, return_info, main_doc, include_signature, sig)\n    elif target_style == 'numpy':\n        return format_numpy_style(func_name, params, return_info, main_doc, include_signature, sig)\n    else:\n        raise ValueError(f\"Unknown style: {target_style}. Use 'docments', 'google', or 'numpy'\")", "code_hash": "c69d807972dea2df21af80d52f34b99b", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "yOPj", "name": "*convert_docstyle"}, {"code": "def format_docments_style(\n    func_name,              # Name of the function \n    params: dict,           # Dictionary of parameter information\n    return_info: dict,      # Dictionary of return information \n    main_doc: str,          # Main Docustring content\n    include_signature:bool, # whether to include the function signature\n) -\u003E str:                   # String representation in the target documentation style\n    \"\"\"Format in docments style (inline comments)\"\"\"\n    lines = [f\"def {func_name}(\"]\n\n    for i, (name, info) in enumerate(params.items()):\n        anno = f\":{info['anno'].__name__}\" if info['anno'] != empty and hasattr(info['anno'], '__name__') else \"\"\n        default = f\"={repr(info['default'])}\" if info['default'] != empty else \"\"\n        comment = f\"  # {info['docment']}\" if info['docment'] and info['docment'] != empty else \"\"\n        comma = \",\" if i \u003C len(params) - 1 else \"\"\n        lines.append(f\"    {name}{anno}{default}{comma}{comment}\")\n\n    ret_anno = f\"-\u003E{return_info['anno'].__name__}\" if return_info.get('anno') != empty and hasattr(return_info.get('anno'), '__name__') else \"\"\n    ret_comment = f\"  # {return_info['docment']}\" if return_info.get('docment') and return_info['docment'] != empty else \"\"\n    lines.append(f\"){ret_anno}:{ret_comment}\")\n\n    if main_doc:\n        lines.append(f'    \"{main_doc}\"')\n\n    return '\\n'.join(lines)", "code_hash": "2b1e7425a30e70b912a1855bec21b1dd", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "fwwy", "name": "*format_docments_style"}, {"code": "def format_google_style(\n    func_name,                 # Name of the function\n    params,                    # Dictionary of parameter information\n    return_info,               # Dictionary of return information\n    main_doc,                  # Main docstring content\n    include_signature: bool,   # Whether to include the function signature\n    sig                        # Function signature object\n) -\u003E str:                      # Formatted string in Google style\n    \"Format in Google style\"\n    lines = []\n\n    if include_signature:\n        lines.append(f\"def {func_name}{sig}:\")\n\n    # Main docstring\n    lines.append('    \"\"\"' + (main_doc or \"\"))\n    lines.append(\"\")\n\n    # Args section\n    if params:\n        lines.append(\"    Args:\")\n        for name, info in params.items():\n            type_str = f\" ({info['anno'].__name__})\" if info['anno'] != empty and hasattr(info['anno'], '__name__') else \"\"\n            default_str = f\", optional, default={repr(info['default'])}\" if info['default'] != empty else \"\"\n            desc = info.get('docment', '') or ''\n            lines.append(f\"        {name}{type_str}: {desc}{default_str}\")\n        lines.append(\"\")\n\n    # Returns section\n    if return_info.get('anno') != empty or return_info.get('docment'):\n        lines.append(\"    Returns:\")\n        ret_type = return_info.get('anno')\n        type_str = f\"{ret_type.__name__}: \" if ret_type != empty and hasattr(ret_type, '__name__') else \"\"\n        ret_desc = return_info.get('docment', '') or ''\n        lines.append(f\"        {type_str}{ret_desc}\")\n\n    lines.append('    \"\"\"')\n    return '\\n'.join(lines)", "code_hash": "22a6890c56bd3e5d42f1541549dfc55b", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "LJZf", "name": "*format_google_style"}, {"code": "def format_numpy_style(\n    func_name,               # Name of the function\n    params,                  # Dictionary of parameter information\n    return_info,             # Dictionary of return information\n    main_doc,                # Main docstring content\n    include_signature:bool,  # Whether to include the function signature\n    sig                      # Function signature object\n) -\u003E str:                    # Formatted string in NumPy style\n    \"Format in NumPy style\"\n    lines = []\n\n    if include_signature:\n        lines.append(f\"def {func_name}{sig}:\")\n\n    # Main docstring\n    lines.append('    \"\"\"' + (main_doc or \"\"))\n    lines.append(\"\")\n\n    # Parameters section\n    if params:\n        lines.append(\"    Parameters\")\n        lines.append(\"    ----------\")\n        for name, info in params.items():\n            type_str = info['anno'].__name__ if info['anno'] != empty and hasattr(info['anno'], '__name__') else \"\"\n            lines.append(f\"    {name} : {type_str}\")\n            desc = info.get('docment', '') or ''\n            if desc:\n                # Handle multi-line descriptions\n                for desc_line in desc.split('\\n'):\n                    lines.append(f\"        {desc_line}\")\n            if info['default'] != empty:\n                lines.append(f\"        (default: {repr(info['default'])})\")\n        lines.append(\"\")\n\n    # Returns section\n    if return_info.get('anno') != empty or return_info.get('docment'):\n        lines.append(\"    Returns\")\n        lines.append(\"    -------\")\n        ret_type = return_info.get('anno')\n        type_str = ret_type.__name__ if ret_type != empty and hasattr(ret_type, '__name__') else \"\"\n        lines.append(f\"    {type_str}\")\n        ret_desc = return_info.get('docment', '') or ''\n        if ret_desc:\n            for desc_line in ret_desc.split('\\n'):\n                lines.append(f\"        {desc_line}\")\n\n    lines.append('    \"\"\"')\n    return '\\n'.join(lines)", "code_hash": "b2f94e5938385529ebb9ed2bcb2af428", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "urSm", "name": "*format_numpy_style"}, {"code": "# Convert to Google style\nprint(convert_docstyle(add,))\nprint(\"\\n\" + \"- \"*50 + \"\\n\")\n\n# Convert to NumPy style\nprint(convert_docstyle(add, 'numpy'))\nprint(\"\\n\" + \"- \"*50 + \"\\n\")\n\n# Convert to docments style\nprint(convert_docstyle(add, 'docments'))", "code_hash": "a00a74bdf0256d6cbcbcf72e1e5e053d", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "jxvo", "name": "_"}, {"code": "def convert_library_docstyle(src_path, target_style='google', backup=True):\n    \"\"\"\n    Convert the documentation style of all functions in a library's src/ directory to the target style.\n\n    Args:\n        src_path: Path to the src/ directory.\n        target_style: The target documentation style ('docments', 'google', or 'numpy').\n        backup: Whether to create backup files before modifying.\n    \"\"\"\n    import tomllib\n    src_path = os.path.abspath(src_path)\n    parent_path = os.path.dirname(src_path)\n    package_name = os.path.basename(src_path)\n\n    # Auto-detect if flat or nested based on pyproject.toml\n    flat = False\n    pyproject_path = os.path.join(parent_path, 'pyproject.toml')\n    if os.path.exists(pyproject_path):\n        with open(pyproject_path, 'rb') as f:\n            config = tomllib.load(f)\n        actual_package_name = config.get('project', {}).get('name', '').replace('-', '_')\n        if actual_package_name and package_name != actual_package_name:\n            flat = True\n\n    if flat:\n        sys.path.insert(0, src_path)\n    else:\n        sys.path.insert(0, parent_path)\n\n    for root, dirs, files in os.walk(src_path):\n        for file in files:\n            if not file.endswith('.py') or file.startswith('__'):\n                continue\n\n            rel_path = os.path.relpath(root, src_path)\n            module_parts = []\n            if not flat:\n                module_parts.append(package_name)\n            if rel_path != '.':\n                module_parts.extend(rel_path.split(os.sep))\n            module_parts.append(file[:-3])\n            module_str = '.'.join(module_parts)\n\n            try:\n                module = importlib.import_module(module_str)\n            except Exception as e:\n                print(f\"Failed to import {module_str}: {e}\")\n                continue\n\n            funcs = []\n            for name in dir(module):\n                obj = getattr(module, name)\n                if inspect.isfunction(obj) and obj.__module__ == module.__name__:\n                    try:\n                        _, lineno = inspect.getsourcelines(obj)\n                        funcs.append((obj, name, lineno))\n                    except Exception as e:\n                        print(f\"Failed to get source lines for {name} in {module_str}: {e}\")\n                        continue\n\n            if not funcs:\n                continue\n\n            file_path = os.path.join(root, file)\n            if backup:\n                shutil.copy(file_path, file_path + '.bak')\n\n            with open(file_path, 'r') as f:\n                file_lines = f.readlines()\n\n            # Sort by lineno descending to process from bottom to top\n            funcs.sort(key=lambda x: x[2], reverse=True)\n\n            for obj, name, lineno in funcs:\n                try:\n                    func_source = inspect.getsource(obj)\n                    tree = ast.parse(func_source)\n                    func_def = tree.body[0]\n\n                    # Handle decorators\n                    decorators = []\n                    for dec in func_def.decorator_list:\n                        dec_source = '@' + ast.unparse(dec)\n                        decorators.append(dec_source)\n\n                    # Determine if async\n                    is_async = isinstance(func_def, ast.AsyncFunctionDef)\n\n                    # Get converted header (without indent)\n                    new_header = convert_docstyle(obj, target_style, include_signature=True)\n\n                    # Adjust for async\n                    if is_async:\n                        new_header = new_header.replace('def ', 'async def ', 1)\n\n                    # Get func indent\n                    lines = func_source.splitlines()\n                    func_indent_str = lines[0][:len(lines[0]) - len(lines[0].lstrip())]\n                    func_indent = len(func_indent_str)\n\n                    # Indent decorators\n                    indented_decorators = [func_indent_str + d for d in decorators]\n\n                    # Indent new_header\n                    indented_header_lines = []\n                    for line in new_header.splitlines():\n                        indented_header_lines.append(func_indent_str + line)\n\n                    # Combine decorators and header\n                    full_header_lines = indented_decorators + indented_header_lines\n                    full_header = '\\n'.join(full_header_lines)\n\n                    # Get body AST\n                    body_start = 1 if (len(func_def.body) \u003E 0 and isinstance(func_def.body[0], ast.Expr) and isinstance(func_def.body[0].value, ast.Constant) and isinstance(func_def.body[0].value.value, str)) else 0\n                    body_ast = func_def.body[body_start:]\n\n                    # Unparse body with proper indent\n                    body_indent_str = func_indent_str + '    '\n                    body_lines = []\n                    for node in body_ast:\n                        node_source = ast.unparse(node)\n                        for line in node_source.splitlines():\n                            body_lines.append(body_indent_str + line)\n\n                    body_str = '\\n'.join(body_lines)\n\n                    # Full new source\n                    new_func_source = full_header + '\\n' + body_str + '\\n'  # Add trailing newline for safety\n\n                    # Replace in file_lines\n                    func_lines, _ = inspect.getsourcelines(obj)\n                    start = lineno - 1\n                    end = start + len(func_lines)\n                    replacement = [l + '\\n' for l in new_func_source.splitlines()]\n                    file_lines[start:end] = replacement\n\n                except Exception as e:\n                    print(f\"Failed to convert {name} in {module_str}: {e}\")\n                    continue\n\n            # Write back the file\n            with open(file_path, 'w') as f:\n                f.writelines(file_lines)\n\n# Test the function on src/m_dev\nprint(\"\ud83e\uddea Testing convert_library_docstyle on src/\")\nprint(\"=\" * 60)\nconvert_library_docstyle('src/', target_style='google', backup=True)\nprint(\"=\" * 60)\nprint(\"\u2705 Conversion complete! Check src for updated files\")\nprint(\"\ud83d\udcbe Backup files saved with .bak extension\")", "code_hash": "fff0b6569fafdd4d6a0fdf32e1804fd9", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "mWxS", "name": "_"}, {"code": "", "code_hash": null, "config": {"column": null, "disabled": false, "hide_code": false}, "id": "CcZR", "name": "_"}, {"code": "mo.md(r\"\"\"\n## Testing\n\"\"\")", "code_hash": "1e575f54d5de474259b25cdc8b058e5f", "config": {"column": 1, "disabled": false, "hide_code": true}, "id": "YWSi", "name": "_"}, {"code": "mo.md(r\"\"\"\n## Build Package\n\"\"\")", "code_hash": "1bb040660b559bcb05974ec7749f974d", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "zlud", "name": "_"}, {"code": "build_package(\"./notebooks\", output_dir=\"src2\", docstring_style=\"google\")", "code_hash": "37731e15144d7e86fbcfcece0f4d18d7", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "tZnO", "name": "_"}, {"code": "mo.md(r\"\"\"\nto add to pypi run\n\n```\nuv build\n```\n\n# Test PyPi\n```\nuv publish --publish-url https://test.pypi.org/legacy/ dist/*\n```\n\n# Real PyPi\n```\nuv publish --token pypi-... dist/*\n```\n\"\"\")", "code_hash": "08a75133c49295e337d69410510b3bb4", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "xvXZ", "name": "_"}, {"code": "_todo_items = [\n    {\"item\": \"Normalize and Restructure NBDev Deocs -\u003E more standard documentation\", \"status\": True},\n    {\"item\": \"Extract README.md from notebook\", \"status\": True},\n    {\"item\": \"Integrate CLI for init, test, and mkdocs\", \"status\": False},\n    {\"item\": \"Static Docs Generation with no dependencies\", \"status\": False},\n    {\"item\": \"Better testing\", \"status\": False},\n    {\"item\": \"Better PyPI integration\", \"status\": False},\n\n    {\"item\": \"Generate PyPI setup thing from marimo\", \"status\": False},\n    {\"item\": \"Enhance Pyproject.toml with repo. and other good info\", \"status\": False},\n    {\"item\": \"Multi notebook support\", \"status\": False},\n    {\"item\": \"GitHub Actions Support\", \"status\": False},\n    {\"item\": \"Clean up os.path and Path - use Path throughout\", \"status\": False},\n]\n\ntodo_checklist = mo.md(f\"\"\"\n## \ud83d\udccb Package Development TODOs\n\n{mo.vstack([\n    mo.hstack([mo.ui.checkbox(value=todo[\"status\"]), mo.md(f\"**{todo['item']}**\")], align=\"center\", justify=\"start\") \n    for todo in _todo_items\n])}\n\"\"\")\n\ntodo_checklist", "code_hash": "e4477f8b93acedb9c36f9c5fe1907c30", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "CLip", "name": "_"}, {"code": "", "code_hash": null, "config": {"column": null, "disabled": false, "hide_code": false}, "id": "YECM", "name": "_"}], "metadata": {"marimo_version": "0.18.1"}, "version": "1"},
            "session": {"cells": [{"code_hash": "5ee7713b1c857e935b76c81ec57bff5b", "console": [], "id": "setup", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "8906a921939f0077798aa184cbc18c62", "console": [], "id": "Hbol", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"development-packages\"\u003EDevelopment Packages\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "6f40f30abab5849aaf986862372ee9b3", "console": [], "id": "MJUe", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "7414d6191eb0541d3c5984e8d8536d5c", "console": [], "id": "vblA", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"utilities\"\u003EUtilities\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "3e60bdb851fff8e16a959bcf67c7b268", "console": [], "id": "bkHC", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "953b2a0d062e473b7b576ae4a4f2937c", "console": [], "id": "lEQa", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"simple-is-not-easy\"\u003ESimple is not easy\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "838ced66cc28fcae68b48f64d1627a97", "console": [], "id": "PKri", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "6fefa38138baf33aaa2dcd552e96febd", "console": [], "id": "Xref", "outputs": [{"data": {"application/json": "[{\"path\": \"notebooks/00_index.py\", \"module_name\": \"index\", \"filename\": \"00_index.py\"}, {\"path\": \"notebooks/01_core.py\", \"module_name\": \"core\", \"filename\": \"01_core.py\"}, {\"path\": \"notebooks/02_docs.py\", \"module_name\": \"docs\", \"filename\": \"02_docs.py\"}]"}, "type": "data"}]}, {"code_hash": "cf2759e590c817d9c5147b499ea580d8", "console": [], "id": "SFPL", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "db82a27b26a1256318abfee2b4bd47f0", "console": [], "id": "BYtC", "outputs": [{"data": {"application/json": "[\"is_marimo_export_decorator\", \"find_all_notebooks\", \"find_exports\", \"extract_export_info\", \"scan_all_notebooks\", \"format_docstring\", \"replace_docstring\", \"validate_setup_metadata\", \"extract_docs_dynamic\", \"extract_docs_tbl\", \"scan_notebooks\", \"extract_exports\", \"extract_param_docs_from_ast\", \"build_formatted_docstring\", \"update_pyproject_toml\", \"write_module\", \"write_init\", \"extract_mo_md_content\", \"extract_all_mo_md\", \"extract_readme\", \"build_package\", \"add\", \"convert_docstyle\", \"format_docments_style\", \"format_google_style\", \"format_numpy_style\"]"}, "type": "data"}]}, {"code_hash": "7fbcccf7d0811eeeb30190479c03b8ef", "console": [], "id": "RGSE", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "7c992372699bd39e9b945b037597698b", "console": [], "id": "Kclp", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "5c20f78ce4ba01c4d28f5c9160ba7570", "console": [], "id": "emfo", "outputs": [{"data": {"application/json": "{\"index\": {\"exports\": {}, \"path\": \"notebooks/00_index.py\"}, \"core\": {\"exports\": {\"is_marimo_export_decorator\": {\"docs\": {\"decorator\": {\"docment\": \"the decorator that marimo attached to the cell\", \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"True if the function or cell is reusable - should match marimos detection\", \"anno\": \"text/plain:\u003Cclass 'bool'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def is_marimo_export_decorator(\\n    decorator # the decorator that marimo attached to the cell\\n) -\u003E bool:    # True if the function or cell is reusable - should match marimos detection\\n    \\\"Check if decorator is app.function or app.class_definition (with or without args)\\\"\\n    # If it's a call like @app.function(hide_code=True), check the func part\\n    if isinstance(decorator, ast.Call):\\n        decorator_name = ast.unparse(decorator.func)\\n    else:\\n        # Simple decorator like @app.function\\n        decorator_name = ast.unparse(decorator)\\n\\n    return decorator_name in ['app.function', 'app.class_definition']\\n\", \"main_doc\": \"Check if decorator is app.function or app.class_definition (with or without args)\"}, \"find_all_notebooks\": {\"docs\": {\"notebooks_dir\": {\"docment\": \"Directory containing notebook files\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"notebooks\"}, \"return\": {\"docment\": \"List of dicts with 'path' and 'module_name'\", \"anno\": \"text/plain:\u003Cclass 'list'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def find_all_notebooks(\\n    notebooks_dir: str = 'notebooks'  # Directory containing notebook files\\n) -\u003E list:  # List of dicts with 'path' and 'module_name'\\n    \\\"Find all marimo notebooks in directory and extract module names\\\"\\n    notebooks_path = Path(notebooks_dir)\\n    if not notebooks_path.exists():\\n        raise ValueError(f\\\"Notebooks directory '{notebooks_dir}' does not exist\\\")\\n\\n    notebook_files = sorted(notebooks_path.glob('*.py'))\\n    if not notebook_files:\\n        raise ValueError(f\\\"No .py files found in '{notebooks_dir}'\\\")\\n\\n    notebooks = []\\n    for nb_file in notebook_files:\\n        if nb_file.name.startswith('.'):\\n            continue\\n        # Strip leading digits and underscore (e.g., \\\"01_core.py\\\" -\u003E \\\"core\\\")\\n        module_name = re.sub(r'^\\\\d+_', '', nb_file.stem)\\n        notebooks.append({\\n            'path': str(nb_file),\\n            'module_name': module_name,\\n            'filename': nb_file.name\\n        })\\n\\n    return notebooks\\n\", \"main_doc\": \"Find all marimo notebooks in directory and extract module names\"}, \"find_exports\": {\"docs\": {\"notebook_path\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"List of exported function/class names\", \"anno\": \"text/plain:\u003Cclass 'list'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def find_exports(notebook_path: str) -\u003E list:  # List of exported function/class names\\n    \\\"Find all functions/classes decorated with @app.function or @app.class_definition\\\"\\n    source = Path(notebook_path).read_text()\\n    tree = ast.parse(source)\\n\\n    exports = []\\n    for node in ast.walk(tree):\\n        if isinstance(node, (ast.FunctionDef, ast.ClassDef)):\\n            if any(is_marimo_export_decorator(d) for d in node.decorator_list):\\n                exports.append(node.name)\\n\\n    return exports\\n\", \"main_doc\": \"Find all functions/classes decorated with @app.function or @app.class_definition\"}, \"extract_export_info\": {\"docs\": {\"notebook_path\": {\"docment\": \"Path to marimo notebook\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"func_name\": {\"docment\": \"Name of function/class to extract\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"Dict with 'docs', 'source', 'main_doc'\", \"anno\": \"text/plain:\u003Cclass 'dict'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def extract_export_info(\\n    notebook_path: str,  # Path to marimo notebook\\n    func_name: str       # Name of function/class to extract\\n) -\u003E dict:               # Dict with 'docs', 'source', 'main_doc'\\n    \\\"Extract full information about an exported function including docs, source, and docstring\\\"\\n    spec = importlib.util.spec_from_file_location(\\\"temp_module\\\", notebook_path)\\n    module = importlib.util.module_from_spec(spec)\\n    spec.loader.exec_module(module)\\n\\n    func = getattr(module, func_name)\\n    source = inspect.getsource(func)\\n\\n    # Strip marimo decorators\\n    lines = source.split('\\\\n')\\n    clean_lines = [line for line in lines \\n                   if not line.strip().startswith('@app.function') \\n                   and not line.strip().startswith('@app.class_definition')]\\n    clean_source = '\\\\n'.join(clean_lines)\\n\\n    return {\\n        'docs': docments(func, full=True, eval_str=True),\\n        'source': clean_source,\\n        'main_doc': docstring(func) or ''\\n    }\\n\", \"main_doc\": \"Extract full information about an exported function including docs, source, and docstring\"}, \"scan_all_notebooks\": {\"docs\": {\"notebooks_dir\": {\"docment\": \"Directory containing notebook files\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"notebooks\"}, \"return\": {\"docment\": \"Dict mapping module names to their exports and docs\", \"anno\": \"text/plain:\u003Cclass 'dict'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def scan_all_notebooks(\\n    notebooks_dir: str = 'notebooks'  # Directory containing notebook files\\n) -\u003E dict:  # Dict mapping module names to their exports and docs\\n    \\\"Scan all notebooks and extract exports with their documentation\\\"\\n    notebooks = find_all_notebooks(notebooks_dir)\\n\\n    result = {}\\n    for nb in notebooks:\\n        module_name = nb['module_name']\\n        exports = find_exports(nb['path'])\\n\\n        # Get docs for each export\\n        exports_docs = {}\\n        for export_name in exports:\\n            docs = extract_export_info(nb['path'], export_name)\\n            exports_docs[export_name] = docs\\n\\n        result[module_name] = {\\n            'exports': exports_docs,\\n            'path': nb['path']\\n        }\\n\\n    return result\\n\", \"main_doc\": \"Scan all notebooks and extract exports with their documentation\"}, \"format_docstring\": {\"docs\": {\"docs\": {\"docment\": \"Docments dict from get_docs()\", \"anno\": \"text/plain:\u003Cclass 'dict'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"style\": {\"docment\": \"'google' or 'numpy'\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"google\"}, \"main_doc\": {\"docment\": \"Main docstring text\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"\"}, \"return\": {\"docment\": \"Formatted docstring\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def format_docstring(\\n    docs: dict,           # Docments dict from get_docs()\\n    style: str = 'google', # 'google' or 'numpy'\\n    main_doc: str = ''    # Main docstring text\\n) -\u003E str:                 # Formatted docstring\\n    \\\"Format docments dict into Google or NumPy style docstring\\\"\\n    lines = [main_doc] if main_doc else []\\n\\n    # Get params (everything except 'return')\\n    params = {k: v for k, v in docs.items() if k != 'return'}\\n\\n    if style == 'google':\\n        if params:\\n            lines.append('')\\n            lines.append('Args:')\\n            for name, info in params.items():\\n                anno = info.get('anno')\\n                anno_str = f\\\" ({anno.__name__})\\\" if anno != empty and hasattr(anno, '__name__') else ''\\n                docment = info.get('docment', '') or ''\\n                lines.append(f'    {name}{anno_str}: {docment}')\\n\\n        ret = docs.get('return')\\n        if ret and ret.get('anno') != empty:\\n            lines.append('')\\n            lines.append('Returns:')\\n            ret_anno = ret['anno']\\n            ret_str = ret_anno.__name__ if hasattr(ret_anno, '__name__') else str(ret_anno)\\n            ret_doc = ret.get('docment', '') or ''\\n            lines.append(f'    {ret_str}: {ret_doc}')\\n\\n    elif style == 'numpy':\\n        if params:\\n            lines.append('')\\n            lines.append('Parameters')\\n            lines.append('----------')\\n            for name, info in params.items():\\n                anno = info.get('anno')\\n                anno_str = anno.__name__ if anno != empty and hasattr(anno, '__name__') else ''\\n                lines.append(f'{name} : {anno_str}')\\n                docment = info.get('docment', '') or ''\\n                if docment:\\n                    lines.append(f'    {docment}')\\n\\n        ret = docs.get('return')\\n        if ret and ret.get('anno') != empty:\\n            lines.append('')\\n            lines.append('Returns')\\n            lines.append('-------')\\n            ret_anno = ret['anno']\\n            ret_str = ret_anno.__name__ if hasattr(ret_anno, '__name__') else str(ret_anno)\\n            lines.append(ret_str)\\n            ret_doc = ret.get('docment', '') or ''\\n            if ret_doc:\\n                lines.append(f'    {ret_doc}')\\n\\n    return '\\\\n'.join(lines)\\n\", \"main_doc\": \"Format docments dict into Google or NumPy style docstring\"}, \"replace_docstring\": {\"docs\": {\"func_source\": {\"docment\": \"Original function source code\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"new_docstring\": {\"docment\": \"New formatted docstring\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"Function source with updated docstring\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def replace_docstring(\\n    func_source: str,      # Original function source code\\n    new_docstring: str     # New formatted docstring\\n) -\u003E str:                  # Function source with updated docstring\\n    \\\"Replace the docstring in function source code\\\"\\n    tree = ast.parse(func_source)\\n    func_node = tree.body[0]\\n\\n    # Check if first statement is a docstring\\n    if (func_node.body and \\n        isinstance(func_node.body[0], ast.Expr) and \\n        isinstance(func_node.body[0].value, ast.Constant)):\\n        # Replace existing docstring\\n        func_node.body[0].value.value = new_docstring\\n    else:\\n        # Insert new docstring at the beginning\\n        doc_node = ast.Expr(value=ast.Constant(value=new_docstring))\\n        func_node.body.insert(0, doc_node)\\n\\n    return ast.unparse(tree)\\n\", \"main_doc\": \"Replace the docstring in function source code\"}, \"validate_setup_metadata\": {\"docs\": {\"setup_metadata\": {\"docment\": \"Package metadata from setup cell\", \"anno\": \"text/plain:\u003Cclass 'dict'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"Raises ValueError if invalid\", \"anno\": \"text/plain:\u003Cclass 'NoneType'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def validate_setup_metadata(\\n    setup_metadata: dict  # Package metadata from setup cell\\n) -\u003E None:                # Raises ValueError if invalid\\n    \\\"\\\"\\\"Validate that required metadata keys exist and have valid values for package generation\\\"\\\"\\\"\\n\\n    required = ['__version__', '__description__', '__author__', '__license__']\\n    missing = [k for k in required if k not in setup_metadata]\\n\\n    if missing:\\n        raise ValueError(\\n            f\\\"Setup cell missing required metadata: {', '.join(missing)}\\\\n\\\\n\\\"\\n            f\\\"Add these to your setup cell:\\\\n\\\" + \\n            '\\\\n'.join([f\\\"    {k} = '...'\\\" for k in missing])\\n        )\\n\\n    # Validate version\\n    version = setup_metadata['__version__']\\n    if not version or not version.strip():\\n        raise ValueError(\\\"__version__ cannot be empty\\\")\\n\\n    # Validate description\\n    desc = setup_metadata['__description__']\\n    if not desc or not desc.strip():\\n        raise ValueError(\\\"__description__ cannot be empty\\\")\\n\\n    # Validate author format\\n    author = setup_metadata['__author__']\\n    if not author or not author.strip():\\n        raise ValueError(\\\"__author__ cannot be empty\\\")\\n    if '\u003C' not in author or '\u003E' not in author:\\n        raise ValueError(\\\"__author__ must be in format 'Name \u003Cemail@example.com\u003E'\\\")\\n\\n    email_part = author.split('\u003C')[1].split('\u003E')[0].strip()\\n    if not email_part or '@' not in email_part:\\n        raise ValueError(f\\\"__author__ email '{email_part}' is not valid\\\")\\n\\n    # Validate license\\n    license_val = setup_metadata['__license__']\\n    if not license_val or not license_val.strip():\\n        raise ValueError(\\\"__license__ cannot be empty\\\")\\n\", \"main_doc\": \"Validate that required metadata keys exist and have valid values for package generation\"}, \"extract_docs_dynamic\": {\"docs\": {\"clean_source\": {\"docment\": \"Function source code (without decorators)\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"func_name\": {\"docment\": \"Name of the function to extract docs from\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"setup_imports\": {\"docment\": \"Add this parameter\", \"anno\": \"text/plain:\u003Cclass 'list'\u003E\", \"default\": null}, \"eval_str\": {\"docment\": \"Weather to eval strings or not...idk the idfference.\", \"anno\": \"text/plain:\u003Cclass 'bool'\u003E\", \"default\": true}, \"return\": {\"docment\": \"Docments-style dict with param info\", \"anno\": \"text/plain:\u003Cclass 'dict'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def extract_docs_dynamic(\\n    clean_source: str,          # Function source code (without decorators)\\n    func_name: str,             # Name of the function to extract docs from\\n    setup_imports: list = None,  # Add this parameter\\n    eval_str: bool = True       # Weather to eval strings or not...idk the idfference. \\n) -\u003E dict:                      # Docments-style dict with param info\\n    \\\"\\\"\\\"Extract parameter docs by dynamically importing the function\\\"\\\"\\\"\\n\\n    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f:\\n        if setup_imports:\\n            for imp in setup_imports:\\n                f.write(imp + '\\\\n')\\n            f.write('\\\\n')\\n        f.write(clean_source)\\n        temp_path = f.name\\n\\n    try:\\n        # Import the module dynamically\\n        spec = importlib.util.spec_from_file_location(\\\"temp_module\\\", temp_path)\\n        module = importlib.util.module_from_spec(spec)\\n        spec.loader.exec_module(module)\\n\\n        # Get the function object\\n        func = getattr(module, func_name)\\n\\n        # Extract docs with fastcore\\n        return docments(func, full=True, eval_str= eval_str)\\n    finally:\\n        os.unlink(temp_path)\\n\", \"main_doc\": \"Extract parameter docs by dynamically importing the function\"}, \"extract_docs_tbl\": {\"docs\": {\"clean_source\": {\"docment\": \"Function source code (without decorators)\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"func_name\": {\"docment\": \"Name of the function to extract docs from\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"setup_imports\": {\"docment\": \"Add this parameter\", \"anno\": \"text/plain:\u003Cclass 'list'\u003E\", \"default\": null}, \"return\": {\"docment\": \"Docments-style dict with param info\", \"anno\": \"text/plain:\u003Cclass 'dict'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def extract_docs_tbl(\\n    clean_source: str,          # Function source code (without decorators)\\n    func_name: str,             # Name of the function to extract docs from\\n    setup_imports: list = None  # Add this parameter\\n) -\u003E dict:                      # Docments-style dict with param info\\n    \\\"\\\"\\\"Extract parameter docs by dynamically importing the function\\\"\\\"\\\"\\n\\n    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f:\\n        if setup_imports:\\n            for imp in setup_imports:\\n                f.write(imp + '\\\\n')\\n            f.write('\\\\n')\\n        f.write(clean_source)\\n        temp_path = f.name\\n\\n    try:\\n        # Import the module dynamically\\n        spec = importlib.util.spec_from_file_location(\\\"temp_module\\\", temp_path)\\n        module = importlib.util.module_from_spec(spec)\\n        spec.loader.exec_module(module)\\n\\n        # Get the function object\\n        func = getattr(module, func_name)\\n\\n        # Extract docs with fastcore\\n        return DocmentTbl(func)\\n    finally:\\n        os.unlink(temp_path)\\n\", \"main_doc\": \"Extract parameter docs by dynamically importing the function\"}, \"scan_notebooks\": {\"docs\": {\"notebooks_dir\": {\"docment\": \"Directory containing notebook files\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"notebooks\"}, \"docstring_style\": {\"docment\": \"Docstring style for all exports\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"nbdev\"}, \"return\": {\"docment\": \"Dict with keys: 'metadata', 'modules', 'index_path'\", \"anno\": \"text/plain:\u003Cclass 'dict'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def scan_notebooks(\\n    notebooks_dir: str = 'notebooks', # Directory containing notebook files\\n    docstring_style: str = 'nbdev'    # Docstring style for all exports\\n) -\u003E dict:                            # Dict with keys: 'metadata', 'modules', 'index_path'\\n    \\\"Scan notebooks directory and extract all exports, metadata, and README\\\"\\n\\n    notebooks_path = Path(notebooks_dir)\\n\\n    if not notebooks_path.exists():\\n        raise ValueError(f\\\"Notebooks directory '{notebooks_dir}' does not exist\\\")\\n\\n    # Get all .py files, sorted\\n    notebook_files = sorted(notebooks_path.glob('*.py'))\\n\\n    if not notebook_files:\\n        raise ValueError(f\\\"No .py files found in '{notebooks_dir}'\\\")\\n\\n    metadata = None\\n    metadata_found_in = None\\n    index_path = None\\n    modules = []\\n\\n    for notebook_file in notebook_files:\\n        # Skip __pycache__ and hidden files\\n        if notebook_file.name.startswith('.') or notebook_file.name == '__pycache__':\\n            continue\\n\\n        # Extract from this notebook\\n        nb_metadata, setup_imports, exports, export_names = extract_exports(\\n            str(notebook_file), \\n            docstring_style\\n        )\\n\\n        # Check for metadata (should only be in one file)\\n        if nb_metadata:\\n            if metadata_found_in:\\n                raise ValueError(\\n                    f\\\"Project metadata defined in multiple notebooks:\\\\n\\\"\\n                    f\\\"  - {metadata_found_in}\\\\n\\\"\\n                    f\\\"  - {notebook_file.name}\\\\n\\\"\\n                    f\\\"Metadata should only be defined in one notebook (typically 00_index or index.py)\\\"\\n                )\\n            metadata = nb_metadata\\n            metadata_found_in = notebook_file.name\\n            index_path = str(notebook_file)\\n\\n\\n        # Store module info (even if no exports, we track the imports)\\n        module_name = re.sub(r'^\\\\d+_', '', notebook_file.stem)\\n\\n        modules.append({\\n            'name': module_name,\\n            'imports': setup_imports,\\n            'exports': exports,\\n            'export_names': export_names\\n        })\\n\\n    # Validate we found required metadata\\n    if not metadata:\\n        raise ValueError(\\n            f\\\"No project metadata found in any notebook.\\\\n\\\"\\n            f\\\"Add metadata to your config notebook (e.g., 00_index.py) in the setup cell:\\\\n\\\"\\n            f\\\"    __version__ = '0.1.0'\\\\n\\\"\\n            f\\\"    __description__ = 'My package'\\\\n\\\"\\n            f\\\"    __author__ = 'Name \u003Cemail@example.com\u003E'\\\\n\\\"\\n            f\\\"    __license__ = 'MIT'\\\"\\n        )\\n\\n    return {\\n        'metadata': metadata,\\n        'modules': modules,\\n        'index_path': index_path\\n    }\\n\", \"main_doc\": \"Scan notebooks directory and extract all exports, metadata, and README\"}, \"extract_exports\": {\"docs\": {\"notebook_path\": {\"docment\": \"Path to marimo notebook file\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"docstring_style\": {\"docment\": \"Target docstring format: 'google', 'numpy', or 'nbdev'\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"nbdev\"}, \"return\": {\"docment\": \"(setup_metadata, setup_imports, exports, export_names)\", \"anno\": \"text/plain:\u003Cclass 'tuple'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def extract_exports(\\n    notebook_path: str,             # Path to marimo notebook file\\n    docstring_style: str = 'nbdev'  # Target docstring format: 'google', 'numpy', or 'nbdev'\\n) -\u003E tuple:                         # (setup_metadata, setup_imports, exports, export_names)\\n    \\\"Extract metadata, imports, and exportable functions/classes from marimo notebook\\\"\\n\\n    source_code = Path(notebook_path).read_text()\\n    tree = ast.parse(source_code)\\n\\n    setup_metadata = {}\\n    setup_imports = []\\n    exports = []\\n    export_names = []\\n\\n    for node in tree.body:\\n        # Extract setup cell content\\n        if isinstance(node, ast.With):\\n            for stmt in node.body:\\n                if isinstance(stmt, ast.Assign):\\n                    setup_metadata[stmt.targets[0].id] = ast.literal_eval(stmt.value)\\n                elif isinstance(stmt, (ast.Import, ast.ImportFrom)):\\n                    setup_imports.append(ast.unparse(stmt))\\n\\n        # Extract exportable functions/classes\\n        elif isinstance(node, (ast.FunctionDef, ast.ClassDef)):\\n            if any(is_marimo_export_decorator(d) for d in node.decorator_list):\\n                if node.name.startswith('test_'):\\n                    continue\\n\\n                # Get original source\\n                original_source = ast.get_source_segment(source_code, node)\\n\\n                # Remove marimo decorators\\n                lines = original_source.split('\\\\n')\\n                filtered_lines = []\\n                for line in lines:\\n                    stripped = line.strip()\\n                    if not (stripped.startswith('@app.function') or \\n                           stripped.startswith('@app.class_definition')):\\n                        filtered_lines.append(line)\\n\\n                clean_source = '\\\\n'.join(filtered_lines)\\n\\n                # Reformat if needed\\n                if docstring_style != 'nbdev':\\n                    try:\\n                        docs = extract_param_docs_from_ast(clean_source)\\n                        formatted_source = build_formatted_docstring(\\n                            clean_source, docs, docstring_style\\n                        )\\n                        exports.append(formatted_source)\\n                    except Exception as e:\\n                        print(f\\\"\\u26a0\\ufe0f  Could not reformat {node.name}: {e}\\\")\\n                        exports.append(clean_source)\\n                else:\\n                    exports.append(clean_source)\\n\\n                export_names.append(node.name)\\n\\n    return (setup_metadata, setup_imports, exports, export_names)\\n\", \"main_doc\": \"Extract metadata, imports, and exportable functions/classes from marimo notebook\"}, \"extract_param_docs_from_ast\": {\"docs\": {\"func_source\": {\"docment\": \"Function source code as string\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"Dict mapping param names to {'anno': type, 'docment': comment}\", \"anno\": \"text/plain:\u003Cclass 'dict'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def extract_param_docs_from_ast(\\n    func_source: str  # Function source code as string\\n) -\u003E dict:            # Dict mapping param names to {'anno': type, 'docment': comment}\\n    \\\"Extract parameter docs using AST + tokenizer, no exec needed\\\"\\n\\n    # Parse AST to get parameter info\\n    tree = ast.parse(func_source)\\n    func_node = tree.body[0]\\n\\n    # Get parameter line numbers and names from AST\\n    param_locs = {}\\n    for arg in func_node.args.args:\\n        param_locs[arg.lineno] = {\\n            'name': arg.arg,\\n            'anno': ast.unparse(arg.annotation) if arg.annotation else None\\n        }\\n\\n    # Add *args if present\\n    if func_node.args.vararg:\\n        param_locs[func_node.args.vararg.lineno] = {\\n            'name': func_node.args.vararg.arg,\\n            'anno': None\\n        }\\n\\n    # Add keyword-only args\\n    for arg in func_node.args.kwonlyargs:\\n        param_locs[arg.lineno] = {\\n            'name': arg.arg,\\n            'anno': ast.unparse(arg.annotation) if arg.annotation else None\\n        }\\n\\n    # Add **kwargs if present\\n    if func_node.args.kwarg:\\n        param_locs[func_node.args.kwarg.lineno] = {\\n            'name': func_node.args.kwarg.arg,\\n            'anno': None\\n        }\\n\\n    # Add return annotation\\n    if func_node.returns:\\n        param_locs[func_node.returns.lineno] = {\\n            'name': 'return',\\n            'anno': ast.unparse(func_node.returns)\\n        }\\n\\n    # Tokenize to get comments\\n    tokens = tokenize(io.BytesIO(func_source.encode('utf-8')).readline)\\n    clean_re = re.compile(r'^\\\\s*#(.*)\\\\s*$')\\n    comments = {}\\n    for token in tokens:\\n        if token.type == COMMENT:\\n            match = clean_re.findall(token.string)\\n            if match:\\n                comments[token.start[0]] = match[0].strip()\\n\\n    # Match comments to parameters\\n    result = {}\\n    for line, param_info in param_locs.items():\\n        name = param_info['name']\\n        comment = comments.get(line, '')\\n        result[name] = {\\n            'anno': param_info['anno'],\\n            'docment': comment\\n        }\\n\\n    return result\\n\", \"main_doc\": \"Extract parameter docs using AST + tokenizer, no exec needed\"}, \"build_formatted_docstring\": {\"docs\": {\"func_source\": {\"docment\": \"Original function source code\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"docs\": {\"docment\": \"Parameter docs from extract_param_docs_from_ast\", \"anno\": \"text/plain:\u003Cclass 'dict'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"target_style\": {\"docment\": \"'google' or 'numpy'\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"Function source with reformatted docstring\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def build_formatted_docstring(\\n    func_source: str,       # Original function source code\\n    docs: dict,             # Parameter docs from extract_param_docs_from_ast\\n    target_style: str       # 'google' or 'numpy'\\n) -\u003E str:                   # Function source with reformatted docstring\\n    \\\"Build formatted docstring from docs dict\\\"\\n\\n    tree = ast.parse(func_source)\\n    func_node = tree.body[0]\\n    existing_doc = ast.get_docstring(func_node) or \\\"\\\"\\n\\n    lines = [existing_doc.strip()] if existing_doc else []\\n\\n    if target_style == 'google':\\n        params = {k: v for k, v in docs.items() if k != 'return' and v.get('docment')}\\n        if params:\\n            lines.append(\\\"\\\")\\n            lines.append(\\\"Args:\\\")\\n            for name, info in params.items():\\n                anno = info.get('anno', '')\\n                doc = info.get('docment', '')\\n                if anno:\\n                    lines.append(f\\\"    {name} ({anno}): {doc}\\\")\\n                else:\\n                    lines.append(f\\\"    {name}: {doc}\\\")\\n\\n        ret = docs.get('return')\\n        if ret and ret.get('docment'):\\n            lines.append(\\\"\\\")\\n            lines.append(\\\"Returns:\\\")\\n            ret_anno = ret.get('anno', '')\\n            ret_doc = ret.get('docment', '')\\n            if ret_anno:\\n                lines.append(f\\\"    {ret_anno}: {ret_doc}\\\")\\n            else:\\n                lines.append(f\\\"    {ret_doc}\\\")\\n\\n    elif target_style == 'numpy':\\n        params = {k: v for k, v in docs.items() if k != 'return' and v.get('docment')}\\n        if params:\\n            lines.append(\\\"\\\")\\n            lines.append(\\\"Parameters\\\")\\n            lines.append(\\\"----------\\\")\\n            for name, info in params.items():\\n                anno = info.get('anno', '')\\n                doc = info.get('docment', '')\\n                if anno:\\n                    lines.append(f\\\"{name} : {anno}\\\")\\n                else:\\n                    lines.append(f\\\"{name}\\\")\\n                if doc:\\n                    lines.append(f\\\"    {doc}\\\")\\n\\n        ret = docs.get('return')\\n        if ret and ret.get('docment'):\\n            lines.append(\\\"\\\")\\n            lines.append(\\\"Returns\\\")\\n            lines.append(\\\"-------\\\")\\n            ret_anno = ret.get('anno', '')\\n            ret_doc = ret.get('docment', '')\\n            if ret_anno:\\n                lines.append(f\\\"{ret_anno}\\\")\\n            if ret_doc:\\n                lines.append(f\\\"    {ret_doc}\\\")\\n\\n    new_docstring = '\\\\n'.join(lines)\\n\\n    # Replace docstring in AST\\n    for node in ast.walk(tree):\\n        if isinstance(node, (ast.FunctionDef, ast.AsyncFunctionDef)):\\n            if (node.body and isinstance(node.body[0], ast.Expr) \\n                and isinstance(node.body[0].value, ast.Constant)):\\n                node.body[0].value.value = new_docstring\\n            else:\\n                doc_node = ast.Expr(value=ast.Constant(value=new_docstring))\\n                node.body.insert(0, doc_node)\\n            break\\n\\n    return ast.unparse(tree)\\n\", \"main_doc\": \"Build formatted docstring from docs dict\"}, \"update_pyproject_toml\": {\"docs\": {\"setup_metadata\": {\"docment\": \"Package metadata from setup cell\", \"anno\": \"text/plain:\u003Cclass 'dict'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"pyproject_path\": {\"docment\": \"Path to pyproject.toml\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"pyproject.toml\"}, \"return\": {\"docment\": \"Path to updated file\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def update_pyproject_toml(\\n    setup_metadata: dict,      # Package metadata from setup cell\\n    pyproject_path: str = \\\"pyproject.toml\\\"  # Path to pyproject.toml\\n) -\u003E str:                      # Path to updated file\\n    \\\"Update pyproject.toml with metadata from notebook setup cell\\\"\\n\\n    # Validate metadata first\\n    validate_setup_metadata(setup_metadata)\\n\\n    # Read existing pyproject.toml\\n    with open(pyproject_path, 'rb') as f:\\n        config = tomllib.load(f)\\n\\n    # Update [project] section with required fields\\n    if 'project' not in config:\\n        config['project'] = {}\\n\\n    config['project']['version'] = setup_metadata['__version__']\\n    config['project']['description'] = setup_metadata['__description__']\\n    config['project']['license'] = {'text': setup_metadata['__license__']}\\n\\n    # Parse author\\n    author_name = setup_metadata['__author__'].split('\u003C')[0].strip()\\n    author_email = setup_metadata['__author__'].split('\u003C')[1].strip('\u003E')\\n    config['project']['authors'] = [{'name': author_name, 'email': author_email}]\\n\\n    # Add optional fields if present\\n    if '__keywords__' in setup_metadata and setup_metadata['__keywords__']:\\n        config['project']['keywords'] = setup_metadata['__keywords__']\\n\\n    if '__classifiers__' in setup_metadata and setup_metadata['__classifiers__']:\\n        config['project']['classifiers'] = setup_metadata['__classifiers__']\\n\\n    # Add project URLs if present\\n    if any(k in setup_metadata for k in ['__repository__', '__homepage__', '__documentation__']):\\n        config['project']['urls'] = {}\\n        if '__repository__' in setup_metadata:\\n            config['project']['urls']['Repository'] = setup_metadata['__repository__']\\n        if '__homepage__' in setup_metadata:\\n            config['project']['urls']['Homepage'] = setup_metadata['__homepage__']\\n        if '__documentation__' in setup_metadata:\\n            config['project']['urls']['Documentation'] = setup_metadata['__documentation__']\\n\\n    # Write back using tomlkit to preserve formatting\\n    try:\\n        import tomlkit\\n        with open(pyproject_path, 'r') as f:\\n            doc = tomlkit.load(f)\\n\\n        # Update with new values\\n        if 'project' not in doc:\\n            doc['project'] = {}\\n\\n        doc['project']['version'] = setup_metadata['__version__']\\n        doc['project']['description'] = setup_metadata['__description__']\\n        doc['project']['license'] = {'text': setup_metadata['__license__']}\\n        doc['project']['authors'] = [{'name': author_name, 'email': author_email}]\\n\\n        if '__keywords__' in setup_metadata and setup_metadata['__keywords__']:\\n            doc['project']['keywords'] = setup_metadata['__keywords__']\\n\\n        if '__classifiers__' in setup_metadata and setup_metadata['__classifiers__']:\\n            doc['project']['classifiers'] = setup_metadata['__classifiers__']\\n\\n        if any(k in setup_metadata for k in ['__repository__', '__homepage__', '__documentation__']):\\n            if 'urls' not in doc['project']:\\n                doc['project']['urls'] = {}\\n            if '__repository__' in setup_metadata:\\n                doc['project']['urls']['Repository'] = setup_metadata['__repository__']\\n            if '__homepage__' in setup_metadata:\\n                doc['project']['urls']['Homepage'] = setup_metadata['__homepage__']\\n            if '__documentation__' in setup_metadata:\\n                doc['project']['urls']['Documentation'] = setup_metadata['__documentation__']\\n\\n        with open(pyproject_path, 'w') as f:\\n            tomlkit.dump(doc, f)\\n\\n    except ImportError:\\n        # Fallback if tomlkit not available - just append to file\\n        print(\\\"\\u26a0\\ufe0f  tomlkit not available, using basic TOML writing\\\")\\n        import json\\n        # This is a simple fallback - you might want to use tomli-w instead\\n        with open(pyproject_path, 'a') as f:\\n            f.write(f\\\"\\\\n# Updated by m-dev\\\\n\\\")\\n\\n    print(f\\\"\\u2705 Updated {pyproject_path} with metadata\\\")\\n    return pyproject_path\\n\", \"main_doc\": \"Update pyproject.toml with metadata from notebook setup cell\"}, \"write_module\": {\"docs\": {\"module_name\": {\"docment\": \"Name of the module (without .py)\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"setup_imports\": {\"docment\": \"Import statements from setup cell\", \"anno\": \"text/plain:\u003Cclass 'list'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"exports\": {\"docment\": \"Exported function/class source code\", \"anno\": \"text/plain:\u003Cclass 'list'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"output_file\": {\"docment\": \"Path for output file\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"Path to written file\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def write_module(\\n    module_name: str,        # Name of the module (without .py)\\n    setup_imports: list,     # Import statements from setup cell\\n    exports: list,           # Exported function/class source code\\n    output_file: str         # Path for output file\\n) -\u003E str:                    # Path to written file\\n    \\\"Write Python module file with imports and exported code\\\"\\n    with Path(output_file).open('w') as f:\\n        # Write imports\\n        if setup_imports:\\n            for imp in setup_imports:\\n                f.write(imp + '\\\\n')\\n            f.write('\\\\n')\\n\\n        # Write exports\\n        for export in exports:\\n            f.write(export + '\\\\n\\\\n')\\n\\n    return output_file\\n\", \"main_doc\": \"Write Python module file with imports and exported code\"}, \"write_init\": {\"docs\": {\"package_name\": {\"docment\": \"Package name\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"metadata\": {\"docment\": \"Project metadata from setup cell\", \"anno\": \"text/plain:\u003Cclass 'dict'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"modules\": {\"docment\": \"List of module dicts from scan_notebooks\", \"anno\": \"text/plain:\u003Cclass 'list'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"output_file\": {\"docment\": \"Path to __init__.py\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"Path to written file\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def write_init(\\n    package_name: str,       # Package name\\n    metadata: dict,          # Project metadata from setup cell\\n    modules: list,           # List of module dicts from scan_notebooks\\n    output_file: str         # Path to __init__.py\\n) -\u003E str:                    # Path to written file\\n    \\\"Write package __init__.py with metadata and cross-module imports \\\"\\n\\n    with Path(output_file).open('w') as f:\\n        # Write package docstring\\n        description = metadata.get('__description__', 'No description provided')\\n        f.write(f'\\\"\\\"\\\"{description}\\\"\\\"\\\"\\\\n\\\\n')\\n\\n        # Write metadata\\n        f.write(f\\\"__version__ = '{metadata['__version__']}'\\\\n\\\")\\n\\n        if '__author__' in metadata:\\n            author_name = metadata['__author__'].split('\u003C')[0].strip()\\n            f.write(f\\\"__author__ = '{author_name}'\\\\n\\\")\\n\\n        f.write('\\\\n')\\n\\n        # Collect all export names across modules\\n        all_exports = []\\n\\n        # Write imports from submodules\\n        for module in modules:\\n            # Skip the config module (00_config or similar) - no exports usually\\n            if module['name'].startswith('00_') or not module['export_names']:\\n                continue\\n\\n            if module['export_names']:\\n                exports_str = ', '.join(module['export_names'])\\n                f.write(f\\\"from .{module['name']} import {exports_str}\\\\n\\\")  # \u003C-- The key fix: added '.' for relative import\\n                all_exports.extend(module['export_names'])\\n\\n        # Write __all__\\n        if all_exports:\\n            f.write('\\\\n')\\n            f.write('__all__ = [\\\\n')\\n            for name in all_exports:\\n                f.write(f'    \\\"{name}\\\",\\\\n')\\n            f.write(']\\\\n')\\n\\n    print(f\\\"\\u2705 Generated {output_file}\\\")\\n    return output_file\\n\", \"main_doc\": \"Write package __init__.py with metadata and cross-module imports \"}, \"extract_mo_md_content\": {\"docs\": {\"source\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def extract_mo_md_content(source: str) -\u003E str:\\n    \\\"Extract the string content from a mo.md() call, handling r/f/rf string prefixes\\\"\\n    # Find mo.md( and extract everything between the opening and closing quotes\\n    import re\\n    # Match mo.md with optional whitespace, then capture string with various prefixes\\n    pattern = r'mo\\\\.md\\\\s*\\\\(\\\\s*[rf]*\\\"\\\"\\\"(.*?)\\\"\\\"\\\"|mo\\\\.md\\\\s*\\\\(\\\\s*[rf]*\\\\'\\\\'\\\\'(.*?)\\\\'\\\\'\\\\'|mo\\\\.md\\\\s*\\\\(\\\\s*[rf]*\\\"(.*?)\\\"|mo\\\\.md\\\\s*\\\\(\\\\s*[rf]*\\\\'(.*?)\\\\''\\n    match = re.search(pattern, source, re.DOTALL)\\n    if match:\\n        # Return whichever group matched (triple quotes or single quotes)\\n        for i in range(1, len(match.groups()) + 1):\\n            if match.group(i) is not None:\\n                return match.group(i)\\n    return ''\\n\", \"main_doc\": \"Extract the string content from a mo.md() call, handling r/f/rf string prefixes\"}, \"extract_all_mo_md\": {\"docs\": {\"source\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"Returns list of strings\", \"anno\": \"text/plain:\u003Cclass 'list'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def extract_all_mo_md(source: str) -\u003E list:  # Returns list of strings\\n    \\\"Extract all mo.md() content from source\\\"\\n    pattern = r'mo\\\\.md\\\\s*\\\\(\\\\s*[rf]*\\\"\\\"\\\"(.*?)\\\"\\\"\\\"|mo\\\\.md\\\\s*\\\\(\\\\s*[rf]*\\\\'\\\\'\\\\'(.*?)\\\\'\\\\'\\\\'|mo\\\\.md\\\\s*\\\\(\\\\s*[rf]*\\\"(.*?)\\\"|mo\\\\.md\\\\s*\\\\(\\\\s*[rf]*\\\\'(.*?)\\\\''\\n    results = []\\n    for match in re.finditer(pattern, source, re.DOTALL):\\n        for i in range(1, len(match.groups()) + 1):\\n            if match.group(i) is not None:\\n                results.append(match.group(i))\\n    return results\\n\", \"main_doc\": \"Extract all mo.md() content from source\"}, \"extract_readme\": {\"docs\": {\"setup_metadata\": {\"docment\": \"Setup cell metadata for substitution\", \"anno\": \"text/plain:\u003Cclass 'dict'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"index_path\": {\"docment\": \"Path to index notebook file\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"Path to README.md or empty string\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def extract_readme(\\n    setup_metadata: dict,     # Setup cell metadata for substitution\\n    index_path: str          # Path to index notebook file\\n) -\u003E str:                    # Path to README.md or empty string\\n    \\\"Extract all mo.md() cells from index.py and substitute metadata\\\"\\n\\n    index_path = Path(index_path) if index_path else None\\n    if not index_path or not index_path.exists():\\n        print('\\u26a0\\ufe0f  No index.py found. README.md will not be generated.')\\n        return ''\\n\\n    source_code = index_path.read_text()\\n    md_contents = extract_all_mo_md(source_code)\\n\\n    if not md_contents:\\n        print('\\u26a0\\ufe0f  No mo.md() cells found in index.py')\\n        return ''\\n\\n    # Join all markdown cells, substitute metadata, write\\n    readme_text = '\\\\n\\\\n'.join(md_contents)\\n    for key, value in setup_metadata.items():\\n        readme_text = readme_text.replace(f'{{{key}}}', str(value))\\n\\n    Path('README.md').write_text(readme_text)\\n    print('\\u2705 README.md generated from index.py')\\n    return 'README.md'\\n\", \"main_doc\": \"Extract all mo.md() cells from index.py and substitute metadata\"}, \"build_package\": {\"docs\": {\"notebooks_dir\": {\"docment\": \"Directory with notebook files\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"notebooks\"}, \"output_dir\": {\"docment\": \"Output directory for package\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"src\"}, \"docstring_style\": {\"docment\": \"Docstring format\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"nbdev\"}, \"return\": {\"docment\": \"Path to built package\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def build_package(\\n    notebooks_dir: str = 'notebooks',     # Directory with notebook files\\n    output_dir: str = 'src',              # Output directory for package\\n    docstring_style: str = 'nbdev'        # Docstring format\\n) -\u003E str:                                 # Path to built package\\n    \\\"Build a Python package from marimo notebook(s)\\\"\\n\\n    print(f\\\"\\ud83d\\udd0d Scanning notebooks in {notebooks_dir}/\\\")\\n\\n    # Scan all notebooks\\n    scan_result = scan_notebooks(notebooks_dir, docstring_style)\\n    metadata   = scan_result['metadata']\\n    modules    = scan_result['modules']\\n    index_path = scan_result['index_path']\\n\\n    # Get package name from metadata or pyproject.toml\\n    package_name = metadata.get('__package_name__')\\n    if not package_name:\\n        # Try to read from existing pyproject.toml\\n        try:\\n            import tomllib\\n            with open('pyproject.toml', 'rb') as f:\\n                config = tomllib.load(f)\\n                package_name = config['project']['name']\\n        except:\\n            raise ValueError(\\\"No __package_name__ in metadata and no pyproject.toml found\\\")\\n\\n    package_name = package_name.replace('-', '_')  # Convert to valid Python identifier\\n\\n    print(f\\\"\\ud83d\\udce6 Building package: {package_name}\\\")\\n\\n    # Create output directory structure\\n    package_dir = Path(output_dir) / package_name\\n    package_dir.mkdir(parents=True, exist_ok=True)\\n\\n    # Write individual module files\\n    for module in modules:\\n        # Skip config files (no exports typically)\\n        if module['name'] == 'index': continue\\n\\n        if module['exports']:  # Only write if there are exports\\n            module_file = package_dir / f\\\"{module['name']}.py\\\"\\n            write_module(\\n                module['name'],\\n                module['imports'],\\n                module['exports'],\\n                str(module_file)\\n            )\\n            print(f\\\"  \\u2705 {module['name']}.py\\\")\\n\\n    # Write __init__.py\\n    init_file = package_dir / '__init__.py'\\n    write_init(package_name, metadata, modules, str(init_file))\\n\\n    # Update pyproject.toml with metadata\\n    if Path('pyproject.toml').exists():\\n        update_pyproject_toml(metadata, 'pyproject.toml')\\n    else:\\n        print(\\\"\\u26a0\\ufe0f  No pyproject.toml found. Run 'uv init' first.\\\")\\n\\n    # Extract README if present\\n    extract_readme(metadata, index_path)\\n\\n    print(f\\\"\\\\n\\u2705 Package built in {output_dir}/{package_name}/\\\")\\n    return str(output_dir)\\n\", \"main_doc\": \"Build a Python package from marimo notebook(s)\"}, \"add\": {\"docs\": {\"a\": {\"docment\": \"The first operand\", \"anno\": \"text/plain:\u003Cclass 'int'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"b\": {\"docment\": \"This is the second of the operands to the *addition* operator.\\nNote that passing a negative value here is the equivalent of the *subtraction* operator.\", \"anno\": \"text/plain:\u003Cclass 'int'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"The result is calculated using Python's builtin `+` operator.\", \"anno\": \"text/plain:\u003Cclass 'int'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def add(\\n    # The first operand\\n    a:int,\\n    # This is the second of the operands to the *addition* operator.\\n    # Note that passing a negative value here is the equivalent of the *subtraction* operator.\\n    b:int,\\n)-\u003Eint: # The result is calculated using Python's builtin `+` operator.\\n    \\\"Add `a` to `b`\\\"\\n    return a+b\\n\", \"main_doc\": \"Add `a` to `b`\"}, \"convert_docstyle\": {\"docs\": {\"func\": {\"docment\": \"The function to convert documentation for\", \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"target_style\": {\"docment\": \"One of 'docments', 'google', or 'numpy'\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"google\"}, \"include_signature\": {\"docment\": \"Whether to include the function signature\", \"anno\": \"text/plain:\u003Cclass 'bool'\u003E\", \"default\": true}, \"return\": {\"docment\": \"String representation in the target documentation style\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def convert_docstyle(\\n    func,                   # The function to convert documentation for\\n    target_style='google',  # One of 'docments', 'google', or 'numpy'\\n    include_signature=True  # Whether to include the function signature\\n) -\u003E str:                   # String representation in the target documentation style\\n    \\\"Convert function documentation between different styles.\\\"\\n\\n    # Extract all the information we need\\n    docs_full = docments(func, full=True)\\n    main_doc = docstring(func)\\n    func_name = func.__name__\\n    sig = inspect.signature(func)\\n\\n    # Separate return from parameters\\n    params = {k: v for k, v in docs_full.items() if k != 'return'}\\n    return_info = docs_full.get('return', {})\\n\\n    if target_style == 'docments':\\n        return format_docments_style(func_name, params, return_info, main_doc, include_signature)\\n    elif target_style == 'google':\\n        return format_google_style(func_name, params, return_info, main_doc, include_signature, sig)\\n    elif target_style == 'numpy':\\n        return format_numpy_style(func_name, params, return_info, main_doc, include_signature, sig)\\n    else:\\n        raise ValueError(f\\\"Unknown style: {target_style}. Use 'docments', 'google', or 'numpy'\\\")\\n\", \"main_doc\": \"Convert function documentation between different styles.\"}, \"format_docments_style\": {\"docs\": {\"func_name\": {\"docment\": \"Name of the function\", \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"params\": {\"docment\": \"Dictionary of parameter information\", \"anno\": \"text/plain:\u003Cclass 'dict'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return_info\": {\"docment\": \"Dictionary of return information\", \"anno\": \"text/plain:\u003Cclass 'dict'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"main_doc\": {\"docment\": \"Main Docustring content\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"include_signature\": {\"docment\": \"whether to include the function signature\", \"anno\": \"text/plain:\u003Cclass 'bool'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"String representation in the target documentation style\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def format_docments_style(\\n    func_name,              # Name of the function \\n    params: dict,           # Dictionary of parameter information\\n    return_info: dict,      # Dictionary of return information \\n    main_doc: str,          # Main Docustring content\\n    include_signature:bool, # whether to include the function signature\\n) -\u003E str:                   # String representation in the target documentation style\\n    \\\"\\\"\\\"Format in docments style (inline comments)\\\"\\\"\\\"\\n    lines = [f\\\"def {func_name}(\\\"]\\n\\n    for i, (name, info) in enumerate(params.items()):\\n        anno = f\\\":{info['anno'].__name__}\\\" if info['anno'] != empty and hasattr(info['anno'], '__name__') else \\\"\\\"\\n        default = f\\\"={repr(info['default'])}\\\" if info['default'] != empty else \\\"\\\"\\n        comment = f\\\"  # {info['docment']}\\\" if info['docment'] and info['docment'] != empty else \\\"\\\"\\n        comma = \\\",\\\" if i \u003C len(params) - 1 else \\\"\\\"\\n        lines.append(f\\\"    {name}{anno}{default}{comma}{comment}\\\")\\n\\n    ret_anno = f\\\"-\u003E{return_info['anno'].__name__}\\\" if return_info.get('anno') != empty and hasattr(return_info.get('anno'), '__name__') else \\\"\\\"\\n    ret_comment = f\\\"  # {return_info['docment']}\\\" if return_info.get('docment') and return_info['docment'] != empty else \\\"\\\"\\n    lines.append(f\\\"){ret_anno}:{ret_comment}\\\")\\n\\n    if main_doc:\\n        lines.append(f'    \\\"{main_doc}\\\"')\\n\\n    return '\\\\n'.join(lines)\\n\", \"main_doc\": \"Format in docments style (inline comments)\"}, \"format_google_style\": {\"docs\": {\"func_name\": {\"docment\": \"Name of the function\", \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"params\": {\"docment\": \"Dictionary of parameter information\", \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return_info\": {\"docment\": \"Dictionary of return information\", \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"main_doc\": {\"docment\": \"Main docstring content\", \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"include_signature\": {\"docment\": \"Whether to include the function signature\", \"anno\": \"text/plain:\u003Cclass 'bool'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"sig\": {\"docment\": \"Function signature object\", \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"Formatted string in Google style\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def format_google_style(\\n    func_name,                 # Name of the function\\n    params,                    # Dictionary of parameter information\\n    return_info,               # Dictionary of return information\\n    main_doc,                  # Main docstring content\\n    include_signature: bool,   # Whether to include the function signature\\n    sig                        # Function signature object\\n) -\u003E str:                      # Formatted string in Google style\\n    \\\"Format in Google style\\\"\\n    lines = []\\n\\n    if include_signature:\\n        lines.append(f\\\"def {func_name}{sig}:\\\")\\n\\n    # Main docstring\\n    lines.append('    \\\"\\\"\\\"' + (main_doc or \\\"\\\"))\\n    lines.append(\\\"\\\")\\n\\n    # Args section\\n    if params:\\n        lines.append(\\\"    Args:\\\")\\n        for name, info in params.items():\\n            type_str = f\\\" ({info['anno'].__name__})\\\" if info['anno'] != empty and hasattr(info['anno'], '__name__') else \\\"\\\"\\n            default_str = f\\\", optional, default={repr(info['default'])}\\\" if info['default'] != empty else \\\"\\\"\\n            desc = info.get('docment', '') or ''\\n            lines.append(f\\\"        {name}{type_str}: {desc}{default_str}\\\")\\n        lines.append(\\\"\\\")\\n\\n    # Returns section\\n    if return_info.get('anno') != empty or return_info.get('docment'):\\n        lines.append(\\\"    Returns:\\\")\\n        ret_type = return_info.get('anno')\\n        type_str = f\\\"{ret_type.__name__}: \\\" if ret_type != empty and hasattr(ret_type, '__name__') else \\\"\\\"\\n        ret_desc = return_info.get('docment', '') or ''\\n        lines.append(f\\\"        {type_str}{ret_desc}\\\")\\n\\n    lines.append('    \\\"\\\"\\\"')\\n    return '\\\\n'.join(lines)\\n\", \"main_doc\": \"Format in Google style\"}, \"format_numpy_style\": {\"docs\": {\"func_name\": {\"docment\": \"Name of the function\", \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"params\": {\"docment\": \"Dictionary of parameter information\", \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return_info\": {\"docment\": \"Dictionary of return information\", \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"main_doc\": {\"docment\": \"Main docstring content\", \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"include_signature\": {\"docment\": \"Whether to include the function signature\", \"anno\": \"text/plain:\u003Cclass 'bool'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"sig\": {\"docment\": \"Function signature object\", \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": \"Formatted string in NumPy style\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def format_numpy_style(\\n    func_name,               # Name of the function\\n    params,                  # Dictionary of parameter information\\n    return_info,             # Dictionary of return information\\n    main_doc,                # Main docstring content\\n    include_signature:bool,  # Whether to include the function signature\\n    sig                      # Function signature object\\n) -\u003E str:                    # Formatted string in NumPy style\\n    \\\"Format in NumPy style\\\"\\n    lines = []\\n\\n    if include_signature:\\n        lines.append(f\\\"def {func_name}{sig}:\\\")\\n\\n    # Main docstring\\n    lines.append('    \\\"\\\"\\\"' + (main_doc or \\\"\\\"))\\n    lines.append(\\\"\\\")\\n\\n    # Parameters section\\n    if params:\\n        lines.append(\\\"    Parameters\\\")\\n        lines.append(\\\"    ----------\\\")\\n        for name, info in params.items():\\n            type_str = info['anno'].__name__ if info['anno'] != empty and hasattr(info['anno'], '__name__') else \\\"\\\"\\n            lines.append(f\\\"    {name} : {type_str}\\\")\\n            desc = info.get('docment', '') or ''\\n            if desc:\\n                # Handle multi-line descriptions\\n                for desc_line in desc.split('\\\\n'):\\n                    lines.append(f\\\"        {desc_line}\\\")\\n            if info['default'] != empty:\\n                lines.append(f\\\"        (default: {repr(info['default'])})\\\")\\n        lines.append(\\\"\\\")\\n\\n    # Returns section\\n    if return_info.get('anno') != empty or return_info.get('docment'):\\n        lines.append(\\\"    Returns\\\")\\n        lines.append(\\\"    -------\\\")\\n        ret_type = return_info.get('anno')\\n        type_str = ret_type.__name__ if ret_type != empty and hasattr(ret_type, '__name__') else \\\"\\\"\\n        lines.append(f\\\"    {type_str}\\\")\\n        ret_desc = return_info.get('docment', '') or ''\\n        if ret_desc:\\n            for desc_line in ret_desc.split('\\\\n'):\\n                lines.append(f\\\"        {desc_line}\\\")\\n\\n    lines.append('    \\\"\\\"\\\"')\\n    return '\\\\n'.join(lines)\\n\", \"main_doc\": \"Format in NumPy style\"}}, \"path\": \"notebooks/01_core.py\"}, \"docs\": {\"exports\": {\"extract_builtin_func_info\": {\"docs\": {\"func\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def extract_builtin_func_info(func):\\n    \\\"Extract function name, params, return type, and docstring from function object\\\"\\n    is_builtin = inspect.isbuiltin(func)\\n    # some kinf of assert here? \\n    assert inspect.isbuiltin(func) or not inspect.isfunction(func), \\\"Use extract_func_info_docments for regular Python functions\\\"\\n\\n    name = func.__name__\\n    docstr = inspect.getdoc(func) or ''\\n    try:\\n        sig = inspect.signature(func)\\n        params = [(param.name, str(param.annotation) if param.annotation != inspect.Parameter.empty else None) \\n                for param in sig.parameters.values()]\\n        ret_type = str(sig.return_annotation) if sig.return_annotation is not inspect.Signature.empty else None\\n    except ValueError:\\n        params = []\\n        ret_type = None\\n    return {'name': name, 'params': params, 'return': ret_type, 'docstring': docstr, 'source': 'Built-in function', 'is_builtin': True}\\n\", \"main_doc\": \"Extract function name, params, return type, and docstring from function object\"}, \"extract_func_info_docments\": {\"docs\": {\"func\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def extract_func_info_docments(func):\\n    \\\"\\\"\\\"Extract function info using fastcore.docments\\\"\\\"\\\"\\n    try:\\n        # Get the docments with full info (types, defaults, comments)\\n        docs = docments(func, full=True)\\n\\n        # Build params list: [(name, type_annotation)]\\n        params = [(name, str(info['anno']) if info['anno'] != inspect.Parameter.empty else None) \\n                  for name, info in docs.items() \\n                  if name != 'return']\\n\\n        # Get return type\\n        ret_info = docs.get('return', {})\\n        ret_type = str(ret_info.get('anno')) if ret_info.get('anno') != inspect.Parameter.empty else None\\n\\n        return {\\n            'name': func.__name__,\\n            'params': params,\\n            'return': ret_type,\\n            'docstring': docstring(func) or '',\\n            'source': get_source(func),\\n            'is_builtin': False\\n        }\\n    except Exception:\\n        return extract_builtin_func_info(func)\\n\", \"main_doc\": \"Extract function info using fastcore.docments\"}, \"search_form\": {\"docs\": {\"return\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def search_form():\\n    \\\"Render search form with tag support\\\"\\n    return Form(\\n        Input(type='text', placeholder='Live Search ...(enter to add tag)', **{'data-bind:search': True}),\\n        Button('Add Tag', type='submit'),\\n        Button('Clear All', type='button', cls='clear-btn', **{'data-on:click': \\\"$tags = [], $search = ''\\\"}),\\n        cls='search-section',\\n        **{'data-on:submit__prevent': \\\"$search.trim() ? ($tags = [...$tags, $search.trim()], $search = '') : null\\\"}\\n    )\\n\", \"main_doc\": \"Render search form with tag support\"}, \"debug_area\": {\"docs\": {\"return\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def debug_area():\\n    \\\"Render debug/tags display area\\\"\\n    return Div(\\n        Div(\\n            'Tags: ', Span('[]', **{'data-text': 'JSON.stringify($tags)'}), Br(),\\n            'Search: ', Span(**{'data-text': '$search'}),\\n            cls='debug-info'\\n        ),\\n        Button('Clear All', type='button', cls='clear-btn', **{'data-on:click': \\\"$tags = [], $search = ''\\\"}),\\n        cls='debug'\\n    )\\n\", \"main_doc\": \"Render debug/tags display area\"}, \"old_render_func_card\": {\"docs\": {\"info\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"idx\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def old_render_func_card(info, idx):\\n    \\\"Render function with relevance ordering and match counting\\\"\\n    searchable = f\\\"{info['name']} {' '.join([n for n,t in info['params']])} {info['docstring']}\\\".lower().replace(\\\"'\\\", \\\"\\\\\\\\'\\\").replace(\\\"\\\\n\\\", \\\" \\\")\\n    match_var = f\\\"matchCount{idx}\\\"\\n    searchable_var = f\\\"searchable{idx}\\\"\\n    params_str = ', '.join([f\\\"{name}: {typ}\\\" if typ else name for name,typ in info['params']])\\n    sig = f\\\"{info['name']}({params_str})\\\"\\n    if info['return']: sig += f\\\" -\u003E {info['return']}\\\"\\n    return Div(\\n        Span('0', cls='match-badge', style='display: none;', **{'data-show': NotStr('$tags.length \u003E 0 || $search.trim().length \u003E 0'), 'data-text': f'${match_var}'}),\\n        Div(Code(sig), cls='attribute-name'),\\n        Div(info['docstring'], Pre(Code(info['source'])), cls='description'),\\n        id=info['name'],\\n        cls='attribute',\\n        **{'data-signals': NotStr(f\\\"{{ {searchable_var}: '{searchable}', {match_var}: 0 }}\\\"), 'data-effect': NotStr(f\\\"${match_var} = [...$tags, $search.trim()].filter(tag =\u003E tag.length \u003E 0 \u0026\u0026 ${searchable_var}.toLowerCase().includes(tag.toLowerCase())).length\\\"), 'data-show': NotStr(f\\\"($tags.length === 0 \u0026\u0026 $search.trim().length === 0) || ${match_var} \u003E 0\\\"), 'data-style:order': NotStr(f\\\"($tags.length === 0 \u0026\u0026 $search.trim().length === 0) ? {idx} : -${match_var}\\\")}\\n    )\\n\", \"main_doc\": \"Render function with relevance ordering and match counting\"}, \"sidenav\": {\"docs\": {\"funcs_info\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def sidenav(funcs_info):\\n    \\\"Render sidebar navigation with match counts\\\"\\n    items = [A(\\n        Span(info['name']),\\n        Span('0', cls='nav-badge', style='display: none;', **{'data-show': NotStr('$tags.length \u003E 0 || $search.trim().length \u003E 0'), 'data-text': f'$matchCount{i}'}),\\n        href=f\\\"#{info['name']}\\\", cls='nav-item',\\n        **{'data-class:disabled': NotStr(f\\\"($tags.length \u003E 0 || $search.trim().length \u003E 0) \u0026\u0026 $matchCount{i} === 0\\\")}\\n    ) for i,info in enumerate(funcs_info)]\\n    return Aside(H3('Functions'), *items, cls='sidenav')\\n\", \"main_doc\": \"Render sidebar navigation with match counts\"}, \"DS\": {\"docs\": {\"components\": {\"docment\": null, \"anno\": 2, \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"width\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"100%\"}, \"height\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"300px\"}, \"return\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def DS(*components, width='100%', height='300px'):\\n    \\\"\\\"\\\"Display FT components with isolated Datastar in an IFrame\\\"\\\"\\\"\\n    datastar_url = 'https://cdn.jsdelivr.net/gh/starfederation/datastar@1.0.0-RC.6/bundles/datastar.js'\\n    datastar_script = Script(type='module', src=datastar_url)\\n    doc = Html(Head(datastar_script), Body(*components))\\n    return Iframe(srcdoc=to_xml(doc), width=width, height=height)\\n\", \"main_doc\": \"Display FT components with isolated Datastar in an IFrame\"}, \"get_module_funcs\": {\"docs\": {\"module\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def get_module_funcs(module):\\n    \\\"Extract all functions from a module\\\"\\n    return [obj for name, obj in inspect.getmembers(module) \\n            if inspect.isroutine(obj) and obj.__module__ == module.__name__]\\n\", \"main_doc\": \"Extract all functions from a module\"}, \"write_to_docs\": {\"docs\": {\"content\": {\"docment\": \"FTs\", \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"filepath\": {\"docment\": \"filepath\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"./docs/index.html\"}, \"title\": {\"docment\": \"document title\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"docs\"}, \"return\": {\"docment\": \"file:// URI string\", \"anno\": \"text/plain:\u003Cclass 'str'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def write_to_docs(\\n    content,                             # FTs\\n    filepath: str = \\\"./docs/index.html\\\", # filepath\\n    title: str = \\\"docs\\\"                  # document title\\n) -\u003E str:                                # file:// URI string\\n    \\\"\\\"\\\"Save content as a standalone Datastar-ready HTML file and return the path as string\\\"\\\"\\\"\\n\\n    html_string = to_xml(\\n        Html(\\n            Head(\\n                Title(title),\\n                Script(type=\\\"module\\\", src=\\\"https://cdn.jsdelivr.net/gh/starfederation/datastar@1.0.0-RC.6/bundles/datastar.js\\\"),\\n                Style(\\\"\\\"\\\"\\n      * {\\n        scrollbar-gutter: stable;\\n      }\\n      body{\\n        font-family:sans-serif;\\n        max-width:1400px;\\n        margin:1rem auto;\\n        padding:0 1rem;\\n        line-height:1.5;\\n      }\\n      .header{\\n        display:flex;\\n        justify-content:space-between;\\n        align-items:flex-start;\\n        margin-bottom:1rem;\\n        gap:2rem;\\n      }\\n      .title-section{\\n        flex:1;\\n      }\\n      .search-section{\\n        position:fixed;\\n        top:1rem;\\n        right:1rem;\\n        z-index:100;\\n        display:flex;\\n        gap:0.5rem;\\n        align-items:center;\\n        background:white;\\n        padding:0.75rem;\\n        border-radius:0.5rem;\\n        box-shadow:0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);\\n      }\\n      .content-wrapper{\\n        display:grid;\\n        grid-template-columns:250px 1fr;\\n        gap:2rem;\\n      }\\n      .main-content{\\n        min-width:0;\\n      }\\n      .sidenav{\\n        position:sticky;\\n        top:1rem;\\n        height:fit-content;\\n        max-height:calc(100vh - 2rem);\\n        overflow-y:auto;\\n        padding:1rem;\\n        background:#f9fafb;\\n        border-radius:0.375rem;\\n        border:1px solid #e5e7eb;\\n      }\\n      .sidenav h3{\\n        margin:0 0 0.75rem 0;\\n        font-size:0.875rem;\\n        font-weight:600;\\n        color:#6b7280;\\n        text-transform:uppercase;\\n      }\\n      .nav-item{\\n        display:flex;\\n        align-items:center;\\n        justify-content:space-between;\\n        padding:0.5rem;\\n        margin-bottom:0.25rem;\\n        border-radius:0.25rem;\\n        font-size:0.875rem;\\n        color:#374151;\\n        text-decoration:none;\\n        transition:all 0.15s;\\n      }\\n      .nav-item:hover{\\n        background:#e5e7eb;\\n      }\\n      .nav-item.disabled{\\n        opacity:0.4;\\n        cursor:not-allowed;\\n        pointer-events:none;\\n      }\\n      .nav-badge{\\n        background:#3b82f6;\\n        color:white;\\n        padding:0.125rem 0.5rem;\\n        border-radius:9999px;\\n        font-size:0.7rem;\\n        font-weight:600;\\n        min-width:1.5rem;\\n        text-align:center;\\n      }\\n      .attribute-name{font-weight:bold;font-size:1.25rem;margin-bottom:0.25rem;color:#1e40af}\\n      .description{margin:0.5rem 0;color:#374151;font-size:0.9rem}\\n      .attributes{display:flex;flex-direction:column;gap:1rem}\\n      .attribute{\\n        position:relative;\\n        padding:1rem;\\n        border:1px solid #e5e7eb;\\n        border-radius:0.375rem;\\n        background:#fff;\\n        scroll-margin-top:3rem;\\n        transition: order 0.5s cubic-bezier(0.4, 0, 0.2, 1), \\n                    transform 0.5s cubic-bezier(0.4, 0, 0.2, 1),\\n                    opacity 0.3s ease-in-out;\\n      }\\n      .attribute:hover{box-shadow:0 2px 4px rgba(0,0,0,0.1)}\\n      input{padding:0.625rem;border:1px solid #d1d5db;border-radius:0.375rem;min-width:250px;font-size:0.95rem}\\n      input:focus{outline:2px solid #3b82f6;outline-offset:0}\\n      .debug{\\n        margin-bottom:1rem;\\n        padding:0.75rem;\\n        background:#f3f4f6;\\n        font-family:monospace;\\n        font-size:0.8rem;\\n        border-radius:0.375rem;\\n        display:flex;\\n        justify-content:space-between;\\n        align-items:center;\\n        gap:1rem;\\n      }\\n      .debug-info{\\n        flex:1;\\n      }\\n      .match-badge{\\n        position:absolute;\\n        top:1rem;\\n        right:1rem;\\n        background:#3b82f6;\\n        color:white;\\n        padding:0.25rem 0.75rem;\\n        border-radius:9999px;\\n        font-size:0.8rem;\\n        font-weight:600;\\n      }\\n      button{\\n        padding:0.625rem 1.25rem;\\n        background:#3b82f6;\\n        color:white;\\n        border:none;\\n        border-radius:0.375rem;\\n        cursor:pointer;\\n        font-size:0.95rem;\\n        transition:background 0.15s;\\n        white-space:nowrap;\\n      }\\n      button:hover{background:#2563eb}\\n      button:active{background:#1d4ed8}\\n      button.clear-btn{\\n        background:#dc2626;\\n      }\\n      button.clear-btn:hover{\\n        background:#b91c1c;\\n      }\\n      code{background:#f3f4f6;color:#1f2937;padding:0.125rem 0.375rem;border-radius:0.25rem;font-size:0.85rem;font-family:monospace}\\n      h1{color:#111827;margin:0 0 0.25rem 0;font-size:1.75rem}\\n      .subtitle{color:#6b7280;margin:0;font-size:0.9rem}\\n      pre{background:#1f2937;color:#f9fafb;padding:0.75rem;border-radius:0.375rem;overflow-x:auto;font-size:0.8rem;margin:0.375rem 0}\\n      pre code{background:transparent;color:#f9fafb;padding:0}\\n      \\\"\\\"\\\"\\n        )\\n            ),\\n            Body(content)\\n        )\\n    )\\n\\n    path = Path(filepath).resolve()           # clean absolute Path\\n    path.parent.mkdir(parents=True, exist_ok=True)\\n    path.write_text(html_string, encoding=\\\"utf-8\\\")\\n\\n    return path.as_uri()\\n\", \"main_doc\": \"Save content as a standalone Datastar-ready HTML file and return the path as string\"}, \"get_package_links\": {\"docs\": {\"package_name\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def get_package_links(package_name):\\n    from importlib.metadata import metadata\\n    meta = metadata(package_name)\\n\\n    project_urls = meta.get_all(\\\"Project-URL\\\") or []\\n    url_dict = {label.strip(): url.strip() \\n                for entry in project_urls \\n                for label, url in [entry.split(\\\", \\\", 1)]}\\n\\n    if home := meta.get(\\\"Home-page\\\"):\\n        url_dict[\\\"Home-page\\\"] = home\\n\\n    return {'Links': url_dict}\\n\", \"main_doc\": \"\"}, \"get_package_name\": {\"docs\": {\"package_name\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def get_package_name(package_name):\\n    from importlib.metadata import metadata\\n    return {'Name': metadata(package_name)['Name']}\\n\", \"main_doc\": \"\"}, \"get_package_version\": {\"docs\": {\"package_name\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def get_package_version(package_name):\\n    from importlib.metadata import metadata\\n    return {'Version': metadata(package_name)['Version']}\\n\", \"main_doc\": \"\"}, \"get_package_contributers\": {\"docs\": {\"package_name\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def get_package_contributers(package_name):\\n    from importlib.metadata import metadata\\n    meta = metadata(package_name)\\n\\n    authors = meta.get_all('Author') or meta.get_all('Author-email') or []\\n    maintainers = meta.get_all('Maintainer') or meta.get_all('Maintainer-email') or []\\n\\n    return {\\n        'Authors': authors if authors else None,\\n        'Maintainers': maintainers if maintainers else None\\n    }\\n\", \"main_doc\": \"\"}, \"get_package_info\": {\"docs\": {\"package_name\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}, \"return\": {\"docment\": null, \"anno\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\", \"default\": \"text/plain:\u003Cclass 'inspect._empty'\u003E\"}}, \"source\": \"def get_package_info(package_name):\\n    info = {}\\n    info.update(get_package_name(package_name))\\n    info.update(get_package_version(package_name))\\n    info.update(get_package_contributers(package_name))\\n    info.update(get_package_links(package_name))\\n    return info\\n\", \"main_doc\": \"\"}}, \"path\": \"notebooks/02_docs.py\"}}"}, "type": "data"}]}, {"code_hash": "86aeeb89cabf3c3fac9462c3c089919f", "console": [], "id": "Hstk", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "785ecf39778dc62e2b56d5e1f72bb884", "console": [], "id": "nWHF", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "dc928000cdd70bf170403b974c2981c9", "console": [], "id": "iLit", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"validation\"\u003EValidation\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "d94687028d19223d54cfe8073ac9f455", "console": [], "id": "ZHCJ", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "49f19fa0f1d30d65fb239f897dbf8b6b", "console": [], "id": "ROlb", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"dynamic-docments-test\"\u003EDynamic Docments test\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "0e85bd2e714befcaf282c15f4d4e2d59", "console": [], "id": "qnkX", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "139ef42d674450d541f3f3b4d83a559a", "console": [], "id": "TqIu", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "85bd925f375a1318e417aabbbd1bcb10", "console": [], "id": "Vxnm", "outputs": [{"data": {"application/json": "{\"_module\": [\"This is a module.\", \"\"], \"top_func\": [\"This is top-level.\", \"a, b, *args, **kw\"], \"SampleClass\": [\"This is a class.\", \"self, x, y\"], \"SampleClass.method1\": [\"This is method1.\", \"self, param1\"], \"AnotherClass\": [\"This class has no separate docstring.\", \"self, a, b\"]}"}, "type": "data"}]}, {"code_hash": "969d4c657efa3ecf695a644147de0a53", "console": [], "id": "DnEU", "outputs": [{"data": {"text/html": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth\u003E\u003C/th\u003E\n\u003Cth\u003E\u003Cstrong\u003EType\u003C/strong\u003E\u003C/th\u003E\n\u003Cth\u003E\u003Cstrong\u003EDefault\u003C/strong\u003E\u003C/th\u003E\n\u003Cth\u003E\u003Cstrong\u003EDetails\u003C/strong\u003E\u003C/th\u003E\n\u003C/tr\u003E\n\u003C/thead\u003E\n\u003Ctbody\u003E\n\u003Ctr\u003E\n\u003Ctd\u003Ename\u003C/td\u003E\n\u003Ctd\u003Estr\u003C/td\u003E\n\u003Ctd\u003E\u003C/td\u003E\n\u003Ctd\u003EName of the instance\u003C/td\u003E\n\u003C/tr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003Evalue\u003C/td\u003E\n\u003Ctd\u003Eint\u003C/td\u003E\n\u003Ctd\u003E10\u003C/td\u003E\n\u003Ctd\u003EInitial value\u003C/td\u003E\n\u003C/tr\u003E\n\u003C/tbody\u003E\n\u003C/table\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "280e4253ef35d56b8ff447a329e1ace4", "console": [], "id": "ulZA", "outputs": [{"data": {"text/html": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cdiv class=\"language-python codehilite\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Ccode\u003E\u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;a\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Eint\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n         \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Einspect\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003E_empty\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n         \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"kc\"\u003ENone\u003C/span\u003E\u003Cspan class=\"p\"\u003E},\u003C/span\u003E\n  \u003Cspan class=\"s1\"\u003E\u0026#39;args\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"n\"\u003E_ParameterKind\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003EVAR_POSITIONAL\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"mi\"\u003E2\u003C/span\u003E\u003Cspan class=\"o\"\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\"p\"\u003E,\u003C/span\u003E\n            \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Einspect\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003E_empty\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n            \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"kc\"\u003ENone\u003C/span\u003E\u003Cspan class=\"p\"\u003E},\u003C/span\u003E\n  \u003Cspan class=\"s1\"\u003E\u0026#39;b\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Eint\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n         \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Einspect\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003E_empty\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n         \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"kc\"\u003ENone\u003C/span\u003E\u003Cspan class=\"p\"\u003E},\u003C/span\u003E\n  \u003Cspan class=\"s1\"\u003E\u0026#39;kwargs\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"n\"\u003E_ParameterKind\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003EVAR_KEYWORD\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"mi\"\u003E4\u003C/span\u003E\u003Cspan class=\"o\"\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\"p\"\u003E,\u003C/span\u003E\n              \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Einspect\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003E_empty\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n              \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"kc\"\u003ENone\u003C/span\u003E\u003Cspan class=\"p\"\u003E},\u003C/span\u003E\n  \u003Cspan class=\"s1\"\u003E\u0026#39;return\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Eint\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n              \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Einspect\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003E_empty\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n              \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"kc\"\u003ENone\u003C/span\u003E\u003Cspan class=\"p\"\u003E}}\u003C/span\u003E\n\u003C/code\u003E\u003C/pre\u003E\u003C/div\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "4189242c0d4165743b07562a88656564", "console": [], "id": "ecfG", "outputs": [{"data": {"text/html": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cdiv class=\"language-python codehilite\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Ccode\u003E\u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;metadata\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Edict\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n                \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Einspect\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003E_empty\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n                \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;Project metadata\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E},\u003C/span\u003E\n  \u003Cspan class=\"s1\"\u003E\u0026#39;output_file\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Estr\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n                   \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Einspect\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003E_empty\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n                   \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;Path to __init__.py\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E},\u003C/span\u003E\n  \u003Cspan class=\"s1\"\u003E\u0026#39;package_name\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Estr\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n                    \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Einspect\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003E_empty\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n                    \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;Package name\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E},\u003C/span\u003E\n  \u003Cspan class=\"s1\"\u003E\u0026#39;return\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Estr\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n              \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Einspect\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003E_empty\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n              \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;Path to written file\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E}}\u003C/span\u003E\n\u003C/code\u003E\u003C/pre\u003E\u003C/div\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "d70c249999780fca1461e7ae90339e29", "console": [], "id": "Pvdt", "outputs": [{"data": {"text/html": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cdiv class=\"language-python codehilite\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Ccode\u003E\u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;docstring_style\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Estr\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n                       \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;nbdev\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E,\u003C/span\u003E\n                       \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;Docstring style for all exports\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E},\u003C/span\u003E\n  \u003Cspan class=\"s1\"\u003E\u0026#39;notebooks_dir\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Estr\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n                     \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;notebooks\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E,\u003C/span\u003E\n                     \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;Directory containing notebook files\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E},\u003C/span\u003E\n  \u003Cspan class=\"s1\"\u003E\u0026#39;return\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Edict\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n              \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Einspect\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003E_empty\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n              \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;Scan result\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E}}\u003C/span\u003E\n\u003C/code\u003E\u003C/pre\u003E\u003C/div\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "de4f978fe11b8da6d2b0e7227d1477b9", "console": [], "id": "ZBYS", "outputs": [{"data": {"text/html": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cdiv class=\"language-python codehilite\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Ccode\u003E\u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;a\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Eint\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n         \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Einspect\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003E_empty\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n         \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;The first operand\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E},\u003C/span\u003E\n  \u003Cspan class=\"s1\"\u003E\u0026#39;b\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Eint\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n         \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"mi\"\u003E7\u003C/span\u003E\u003Cspan class=\"p\"\u003E,\u003C/span\u003E\n         \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;This is the second of the operands to the *addition* \u0026#39;\u003C/span\u003E\n                    \u003Cspan class=\"s1\"\u003E\u0026#39;operator.\u003C/span\u003E\u003Cspan class=\"se\"\u003E\\n\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u003C/span\u003E\n                    \u003Cspan class=\"s1\"\u003E\u0026#39;Note that passing a negative value here is the equivalent \u0026#39;\u003C/span\u003E\n                    \u003Cspan class=\"s1\"\u003E\u0026#39;of the *subtraction* operator.\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E},\u003C/span\u003E\n  \u003Cspan class=\"s1\"\u003E\u0026#39;return\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"p\"\u003E{\u003C/span\u003E \u003Cspan class=\"s1\"\u003E\u0026#39;anno\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Einspect\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003E_empty\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n              \u003Cspan class=\"s1\"\u003E\u0026#39;default\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"o\"\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\"k\"\u003Eclass\u003C/span\u003E\u003Cspan class=\"w\"\u003E \u003C/span\u003E\u003Cspan class=\"err\"\u003E\u0026#39;\u003C/span\u003E\u003Cspan class=\"nc\"\u003Einspect\u003C/span\u003E\u003Cspan class=\"o\"\u003E.\u003C/span\u003E\u003Cspan class=\"n\"\u003E_empty\u003C/span\u003E\u003Cspan class=\"s1\"\u003E\u0026#39;\u0026gt;,\u003C/span\u003E\n              \u003Cspan class=\"s1\"\u003E\u0026#39;docment\u0026#39;\u003C/span\u003E\u003Cspan class=\"p\"\u003E:\u003C/span\u003E \u003Cspan class=\"kc\"\u003ENone\u003C/span\u003E\u003Cspan class=\"p\"\u003E}}\u003C/span\u003E\n\u003C/code\u003E\u003C/pre\u003E\u003C/div\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "99071018100f1640cbf07ac406f55e1a", "console": [], "id": "aLJB", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"scan-notebooks-directory\"\u003EScan /notebooks Directory\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "5b385237676be023eca88df0b23b5e46", "console": [], "id": "nHfw", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "e52dc2e14ebd53c4a3fb94efdedbe9d5", "console": [], "id": "xXTn", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"extraction\"\u003EExtraction\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "4969c2fede0db613631b313750466918", "console": [], "id": "AjVT", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "5d2bfda0ac6ceb12d240d2c57c79aa03", "console": [], "id": "pHFh", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "2e6c9075eec80fa55d13c71f04370492", "console": [], "id": "NCOB", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "40a3fa744de82249576f06362adb2cd6", "console": [], "id": "aqbW", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"write-files\"\u003EWrite Files\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "7170e9fb255fff7fece6eb08bde3d474", "console": [], "id": "TRpd", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "fc31fadd178ddf677e60189c38ecb739", "console": [], "id": "TXez", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "6a01136d996e1776e25957c7b45e18ac", "console": [], "id": "dNNg", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "49fd1ad7ca22d8b5264cf62fd3109e6b", "console": [], "id": "yCnT", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"readme-extraction\"\u003EReadme Extraction\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "b48d73c2f0aaba523323ed05e96797e4", "console": [], "id": "wlCL", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "7c6ca694f84887a17f0fc3604b15b1a3", "console": [], "id": "kqZH", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "f624e285952fda7bade688c317bd3a8d", "console": [], "id": "wAgl", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "1bb040660b559bcb05974ec7749f974d", "console": [], "id": "rEll", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"build-package\"\u003EBuild Package\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "b5006ae9c1aad3655e54475be5ac4593", "console": [], "id": "dGlV", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "cfb18cf7f9dc97b1947d428c8853442a", "console": [], "id": "SdmI", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"documentation-converter\"\u003EDocumentation Converter\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "9fa8ff1d3a81a4dc1961f229da1af791", "console": [], "id": "lgWD", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "c69d807972dea2df21af80d52f34b99b", "console": [], "id": "yOPj", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "2b1e7425a30e70b912a1855bec21b1dd", "console": [], "id": "fwwy", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "22a6890c56bd3e5d42f1541549dfc55b", "console": [], "id": "LJZf", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "b2f94e5938385529ebb9ed2bcb2af428", "console": [], "id": "urSm", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "a00a74bdf0256d6cbcbcf72e1e5e053d", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "def add(a: int, b: int) -\u003E int:\n    \"\"\"Add `a` to `b`\n\n    Args:\n        a (int): The first operand\n        b (int): This is the second of the operands to the *addition* operator.\nNote that passing a negative value here is the equivalent of the *subtraction* operator.\n\n    Returns:\n        int: The result is calculated using Python's builtin `+` operator.\n    \"\"\"\n\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \n\ndef add(a: int, b: int) -\u003E int:\n    \"\"\"Add `a` to `b`\n\n    Parameters\n    ----------\n    a : int\n        The first operand\n    b : int\n        This is the second of the operands to the *addition* operator.\n        Note that passing a negative value here is the equivalent of the *subtraction* operator.\n\n    Returns\n    -------\n    int\n        The result is calculated using Python's builtin `+` operator.\n    \"\"\"\n\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \n\ndef add(\n    a:int,  # The first operand\n    b:int  # This is the second of the operands to the *addition* operator.\nNote that passing a negative value here is the equivalent of the *subtraction* operator.\n)-\u003Eint:  # The result is calculated using Python's builtin `+` operator.\n    \"Add `a` to `b`\"\n", "type": "stream"}], "id": "jxvo", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "fff0b6569fafdd4d6a0fdf32e1804fd9", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "\ud83e\uddea Testing convert_library_docstyle on src/\n============================================================\n============================================================\n\u2705 Conversion complete! Check src for updated files\n\ud83d\udcbe Backup files saved with .bak extension\n", "type": "stream"}], "id": "mWxS", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": null, "console": [], "id": "CcZR", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "1e575f54d5de474259b25cdc8b058e5f", "console": [], "id": "YWSi", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"testing\"\u003ETesting\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "1bb040660b559bcb05974ec7749f974d", "console": [], "id": "zlud", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"build-package\"\u003EBuild Package\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "37731e15144d7e86fbcfcece0f4d18d7", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "\ud83d\udd0d Scanning notebooks in ./notebooks/\n\ud83d\udce6 Building package: m_dev\n  \u2705 core.py\n  \u2705 docs.py\n\u2705 Generated src2/m_dev/__init__.py\n\u2705 Updated pyproject.toml with metadata\n\u2705 README.md generated from index.py\n\n\u2705 Package built in src2/m_dev/\n", "type": "stream"}], "id": "tZnO", "outputs": [{"data": {"text/html": "\u003Cpre class='text-xs'\u003E\u0026#x27;src2\u0026#x27;\u003C/pre\u003E"}, "type": "data"}]}, {"code_hash": "08a75133c49295e337d69410510b3bb4", "console": [], "id": "xvXZ", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003Eto add to pypi run\u003C/span\u003E\n\u003Cdiv class=\"language-text codehilite\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Ccode\u003Euv build\n\u003C/code\u003E\u003C/pre\u003E\u003C/div\u003E\n\u003Ch1 id=\"test-pypi\"\u003ETest PyPi\u003C/h1\u003E\n\u003Cdiv class=\"language-scdoc codehilite\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Ccode\u003Euv publish --publish-url https://test.pypi.org/legacy/ dist/*\n\u003C/code\u003E\u003C/pre\u003E\u003C/div\u003E\n\u003Ch1 id=\"real-pypi\"\u003EReal PyPi\u003C/h1\u003E\n\u003Cdiv class=\"language-scdoc codehilite\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Ccode\u003Euv publish --token pypi-... dist/*\n\u003C/code\u003E\u003C/pre\u003E\u003C/div\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "e4477f8b93acedb9c36f9c5fe1907c30", "console": [], "id": "CLip", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"package-development-todos\"\u003E\ud83d\udccb Package Development TODOs\u003C/h2\u003E\n\u003Cdiv style='display: flex;flex: 1;flex-direction: column;justify-content: flex-start;align-items: normal;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='CLip-0' random-id='d8638787-97a5-7810-e911-1814264462c2'\u003E\u003Cmarimo-checkbox data-initial-value='true' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003ENormalize and Restructure NBDev Deocs -\u0026gt; more standard documentation\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='CLip-1' random-id='1e126874-8626-d79d-7a8e-39a03545982e'\u003E\u003Cmarimo-checkbox data-initial-value='true' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EExtract README.md from notebook\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='CLip-2' random-id='69d658c4-5ce1-37ed-eeb7-6f37fc84e8c6'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EIntegrate CLI for init, test, and mkdocs\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='CLip-3' random-id='c5f66985-8841-7069-9aae-385dfb80c8ad'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EStatic Docs Generation with no dependencies\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='CLip-4' random-id='17c9f364-e234-e19a-e6b7-712d76edfa7f'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EBetter testing\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='CLip-5' random-id='1f726eec-9e1f-865c-af9a-f97685b011a8'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EBetter PyPI integration\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='CLip-6' random-id='50d59a1e-1382-6bca-83d5-28284b93ce40'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EGenerate PyPI setup thing from marimo\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='CLip-7' random-id='461c570f-42c9-068d-904d-cdcfc6692558'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EEnhance Pyproject.toml with repo. and other good info\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='CLip-8' random-id='a5f78cd7-be26-d021-2d3e-7be90c9cda00'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EMulti notebook support\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='CLip-9' random-id='c00a17f6-453f-c22e-a737-14b6f4c499d9'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EGitHub Actions Support\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='CLip-10' random-id='772e5895-9938-87a2-37a7-e41447db44fc'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EClean up os.path and Path - use Path throughout\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003C/div\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": null, "console": [], "id": "YECM", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}], "metadata": {"marimo_version": "0.18.1"}, "version": "1"},
            "runtimeConfig": null,
        };
    </script>
  
<marimo-code hidden="">
    import%20marimo%0A%0A__generated_with%20%3D%20%220.18.1%22%0Aapp%20%3D%20marimo.App(width%3D%22columns%22%2C%20app_title%3D%22%22%2C%20auto_download%3D%5B%22html%22%5D)%0A%0Awith%20app.setup(hide_code%3DTrue)%3A%0A%20%20%20%20import%20re%0A%20%20%20%20import%20ast%0A%20%20%20%20import%20tomllib%0A%20%20%20%20import%20copy%0A%20%20%20%20import%20os%0A%20%20%20%20import%20tempfile%0A%20%20%20%20import%20shutil%0A%20%20%20%20import%20inspect%0A%20%20%20%20import%20sys%0A%20%20%20%20import%20importlib%0A%20%20%20%20import%20io%0A%20%20%20%20import%20zipfile%0A%0A%20%20%20%20from%20tokenize%20import%20tokenize%2C%20COMMENT%0A%20%20%20%20from%20pathlib%20import%20Path%0A%20%20%20%20from%20textwrap%20import%20dedent%2C%20indent%0A%20%20%20%20from%20typing%20import%20Callable%2C%20Literal%2C%20Dict%2C%20Any%2C%20Tuple%2C%20TypedDict%2C%20List%2C%20Optional%0A%20%20%20%20from%20dataclasses%20import%20dataclass%0A%0A%20%20%20%20from%20fastcore.docments%20import%20docments%2C%20docstring%2C%20empty%2C%20DocmentTbl%2C%20extract_docstrings%0A%20%20%20%20from%20fastcore.test%20import%20test_eq%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Development%20Packages%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_()%3A%0A%20%20%20%20import%20marimo%20as%20mo%0A%20%20%20%20import%20pytest%0A%20%20%20%20return%20(mo%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Utilities%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20is_marimo_export_decorator(%0A%20%20%20%20decorator%20%23%20the%20decorator%20that%20marimo%20attached%20to%20the%20cell%0A)%20-%3E%20bool%3A%20%20%20%20%23%20True%20if%20the%20function%20or%20cell%20is%20reusable%20-%20should%20match%20marimos%20detection%0A%20%20%20%20%22Check%20if%20decorator%20is%20app.function%20or%20app.class_definition%20(with%20or%20without%20args)%22%0A%20%20%20%20%23%20If%20it's%20a%20call%20like%20%40app.function(hide_code%3DTrue)%2C%20check%20the%20func%20part%0A%20%20%20%20if%20isinstance(decorator%2C%20ast.Call)%3A%0A%20%20%20%20%20%20%20%20decorator_name%20%3D%20ast.unparse(decorator.func)%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%23%20Simple%20decorator%20like%20%40app.function%0A%20%20%20%20%20%20%20%20decorator_name%20%3D%20ast.unparse(decorator)%0A%0A%20%20%20%20return%20decorator_name%20in%20%5B'app.function'%2C%20'app.class_definition'%5D%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Simple%20is%20not%20easy%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20find_all_notebooks(%0A%20%20%20%20notebooks_dir%3A%20str%20%3D%20'notebooks'%20%20%23%20Directory%20containing%20notebook%20files%0A)%20-%3E%20list%3A%20%20%23%20List%20of%20dicts%20with%20'path'%20and%20'module_name'%0A%20%20%20%20%22Find%20all%20marimo%20notebooks%20in%20directory%20and%20extract%20module%20names%22%0A%20%20%20%20notebooks_path%20%3D%20Path(notebooks_dir)%0A%20%20%20%20if%20not%20notebooks_path.exists()%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(f%22Notebooks%20directory%20'%7Bnotebooks_dir%7D'%20does%20not%20exist%22)%0A%0A%20%20%20%20notebook_files%20%3D%20sorted(notebooks_path.glob('*.py'))%0A%20%20%20%20if%20not%20notebook_files%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(f%22No%20.py%20files%20found%20in%20'%7Bnotebooks_dir%7D'%22)%0A%0A%20%20%20%20notebooks%20%3D%20%5B%5D%0A%20%20%20%20for%20nb_file%20in%20notebook_files%3A%0A%20%20%20%20%20%20%20%20if%20nb_file.name.startswith('.')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%23%20Strip%20leading%20digits%20and%20underscore%20(e.g.%2C%20%2201_core.py%22%20-%3E%20%22core%22)%0A%20%20%20%20%20%20%20%20module_name%20%3D%20re.sub(r'%5E%5Cd%2B_'%2C%20''%2C%20nb_file.stem)%0A%20%20%20%20%20%20%20%20notebooks.append(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'path'%3A%20str(nb_file)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'module_name'%3A%20module_name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'filename'%3A%20nb_file.name%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20return%20notebooks%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20find_all_notebooks()%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20find_exports(notebook_path%3A%20str)%20-%3E%20list%3A%20%20%23%20List%20of%20exported%20function%2Fclass%20names%0A%20%20%20%20%22Find%20all%20functions%2Fclasses%20decorated%20with%20%40app.function%20or%20%40app.class_definition%22%0A%20%20%20%20source%20%3D%20Path(notebook_path).read_text()%0A%20%20%20%20tree%20%3D%20ast.parse(source)%0A%0A%20%20%20%20exports%20%3D%20%5B%5D%0A%20%20%20%20for%20node%20in%20ast.walk(tree)%3A%0A%20%20%20%20%20%20%20%20if%20isinstance(node%2C%20(ast.FunctionDef%2C%20ast.ClassDef))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20any(is_marimo_export_decorator(d)%20for%20d%20in%20node.decorator_list)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20exports.append(node.name)%0A%0A%20%20%20%20return%20exports%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20find_exports(notebook_path%3D%22.%2Fnotebooks%2F01_core.py%22)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20extract_export_info(%0A%20%20%20%20notebook_path%3A%20str%2C%20%20%23%20Path%20to%20marimo%20notebook%0A%20%20%20%20func_name%3A%20str%20%20%20%20%20%20%20%23%20Name%20of%20function%2Fclass%20to%20extract%0A)%20-%3E%20dict%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Dict%20with%20'docs'%2C%20'source'%2C%20'main_doc'%0A%20%20%20%20%22Extract%20full%20information%20about%20an%20exported%20function%20including%20docs%2C%20source%2C%20and%20docstring%22%0A%20%20%20%20spec%20%3D%20importlib.util.spec_from_file_location(%22temp_module%22%2C%20notebook_path)%0A%20%20%20%20module%20%3D%20importlib.util.module_from_spec(spec)%0A%20%20%20%20spec.loader.exec_module(module)%0A%0A%20%20%20%20func%20%3D%20getattr(module%2C%20func_name)%0A%20%20%20%20source%20%3D%20inspect.getsource(func)%0A%0A%20%20%20%20%23%20Strip%20marimo%20decorators%0A%20%20%20%20lines%20%3D%20source.split('%5Cn')%0A%20%20%20%20clean_lines%20%3D%20%5Bline%20for%20line%20in%20lines%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20line.strip().startswith('%40app.function')%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20and%20not%20line.strip().startswith('%40app.class_definition')%5D%0A%20%20%20%20clean_source%20%3D%20'%5Cn'.join(clean_lines)%0A%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20'docs'%3A%20docments(func%2C%20full%3DTrue%2C%20eval_str%3DTrue)%2C%0A%20%20%20%20%20%20%20%20'source'%3A%20clean_source%2C%0A%20%20%20%20%20%20%20%20'main_doc'%3A%20docstring(func)%20or%20''%0A%20%20%20%20%7D%0A%0A%0A%40app.function%0Adef%20scan_all_notebooks(%0A%20%20%20%20notebooks_dir%3A%20str%20%3D%20'notebooks'%20%20%23%20Directory%20containing%20notebook%20files%0A)%20-%3E%20dict%3A%20%20%23%20Dict%20mapping%20module%20names%20to%20their%20exports%20and%20docs%0A%20%20%20%20%22Scan%20all%20notebooks%20and%20extract%20exports%20with%20their%20documentation%22%0A%20%20%20%20notebooks%20%3D%20find_all_notebooks(notebooks_dir)%0A%0A%20%20%20%20result%20%3D%20%7B%7D%0A%20%20%20%20for%20nb%20in%20notebooks%3A%0A%20%20%20%20%20%20%20%20module_name%20%3D%20nb%5B'module_name'%5D%0A%20%20%20%20%20%20%20%20exports%20%3D%20find_exports(nb%5B'path'%5D)%0A%0A%20%20%20%20%20%20%20%20%23%20Get%20docs%20for%20each%20export%0A%20%20%20%20%20%20%20%20exports_docs%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20for%20export_name%20in%20exports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20docs%20%3D%20extract_export_info(nb%5B'path'%5D%2C%20export_name)%0A%20%20%20%20%20%20%20%20%20%20%20%20exports_docs%5Bexport_name%5D%20%3D%20docs%0A%0A%20%20%20%20%20%20%20%20result%5Bmodule_name%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'exports'%3A%20exports_docs%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'path'%3A%20nb%5B'path'%5D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20scan_all_notebooks()%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20format_docstring(%0A%20%20%20%20docs%3A%20dict%2C%20%20%20%20%20%20%20%20%20%20%20%23%20Docments%20dict%20from%20get_docs()%0A%20%20%20%20style%3A%20str%20%3D%20'google'%2C%20%23%20'google'%20or%20'numpy'%0A%20%20%20%20main_doc%3A%20str%20%3D%20''%20%20%20%20%23%20Main%20docstring%20text%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Formatted%20docstring%0A%20%20%20%20%22Format%20docments%20dict%20into%20Google%20or%20NumPy%20style%20docstring%22%0A%20%20%20%20lines%20%3D%20%5Bmain_doc%5D%20if%20main_doc%20else%20%5B%5D%0A%0A%20%20%20%20%23%20Get%20params%20(everything%20except%20'return')%0A%20%20%20%20params%20%3D%20%7Bk%3A%20v%20for%20k%2C%20v%20in%20docs.items()%20if%20k%20!%3D%20'return'%7D%0A%0A%20%20%20%20if%20style%20%3D%3D%20'google'%3A%0A%20%20%20%20%20%20%20%20if%20params%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append('')%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append('Args%3A')%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20name%2C%20info%20in%20params.items()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20anno%20%3D%20info.get('anno')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20anno_str%20%3D%20f%22%20(%7Banno.__name__%7D)%22%20if%20anno%20!%3D%20empty%20and%20hasattr(anno%2C%20'__name__')%20else%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20docment%20%3D%20info.get('docment'%2C%20'')%20or%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f'%20%20%20%20%7Bname%7D%7Banno_str%7D%3A%20%7Bdocment%7D')%0A%0A%20%20%20%20%20%20%20%20ret%20%3D%20docs.get('return')%0A%20%20%20%20%20%20%20%20if%20ret%20and%20ret.get('anno')%20!%3D%20empty%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append('')%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append('Returns%3A')%0A%20%20%20%20%20%20%20%20%20%20%20%20ret_anno%20%3D%20ret%5B'anno'%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20ret_str%20%3D%20ret_anno.__name__%20if%20hasattr(ret_anno%2C%20'__name__')%20else%20str(ret_anno)%0A%20%20%20%20%20%20%20%20%20%20%20%20ret_doc%20%3D%20ret.get('docment'%2C%20'')%20or%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f'%20%20%20%20%7Bret_str%7D%3A%20%7Bret_doc%7D')%0A%0A%20%20%20%20elif%20style%20%3D%3D%20'numpy'%3A%0A%20%20%20%20%20%20%20%20if%20params%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append('')%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append('Parameters')%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append('----------')%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20name%2C%20info%20in%20params.items()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20anno%20%3D%20info.get('anno')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20anno_str%20%3D%20anno.__name__%20if%20anno%20!%3D%20empty%20and%20hasattr(anno%2C%20'__name__')%20else%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f'%7Bname%7D%20%3A%20%7Banno_str%7D')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20docment%20%3D%20info.get('docment'%2C%20'')%20or%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20docment%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f'%20%20%20%20%7Bdocment%7D')%0A%0A%20%20%20%20%20%20%20%20ret%20%3D%20docs.get('return')%0A%20%20%20%20%20%20%20%20if%20ret%20and%20ret.get('anno')%20!%3D%20empty%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append('')%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append('Returns')%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append('-------')%0A%20%20%20%20%20%20%20%20%20%20%20%20ret_anno%20%3D%20ret%5B'anno'%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20ret_str%20%3D%20ret_anno.__name__%20if%20hasattr(ret_anno%2C%20'__name__')%20else%20str(ret_anno)%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(ret_str)%0A%20%20%20%20%20%20%20%20%20%20%20%20ret_doc%20%3D%20ret.get('docment'%2C%20'')%20or%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20ret_doc%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f'%20%20%20%20%7Bret_doc%7D')%0A%0A%20%20%20%20return%20'%5Cn'.join(lines)%0A%0A%0A%40app.function%0Adef%20replace_docstring(%0A%20%20%20%20func_source%3A%20str%2C%20%20%20%20%20%20%23%20Original%20function%20source%20code%0A%20%20%20%20new_docstring%3A%20str%20%20%20%20%20%23%20New%20formatted%20docstring%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Function%20source%20with%20updated%20docstring%0A%20%20%20%20%22Replace%20the%20docstring%20in%20function%20source%20code%22%0A%20%20%20%20tree%20%3D%20ast.parse(func_source)%0A%20%20%20%20func_node%20%3D%20tree.body%5B0%5D%0A%0A%20%20%20%20%23%20Check%20if%20first%20statement%20is%20a%20docstring%0A%20%20%20%20if%20(func_node.body%20and%20%0A%20%20%20%20%20%20%20%20isinstance(func_node.body%5B0%5D%2C%20ast.Expr)%20and%20%0A%20%20%20%20%20%20%20%20isinstance(func_node.body%5B0%5D.value%2C%20ast.Constant))%3A%0A%20%20%20%20%20%20%20%20%23%20Replace%20existing%20docstring%0A%20%20%20%20%20%20%20%20func_node.body%5B0%5D.value.value%20%3D%20new_docstring%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%23%20Insert%20new%20docstring%20at%20the%20beginning%0A%20%20%20%20%20%20%20%20doc_node%20%3D%20ast.Expr(value%3Dast.Constant(value%3Dnew_docstring))%0A%20%20%20%20%20%20%20%20func_node.body.insert(0%2C%20doc_node)%0A%0A%20%20%20%20return%20ast.unparse(tree)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Validation%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20validate_setup_metadata(%0A%20%20%20%20setup_metadata%3A%20dict%20%20%23%20Package%20metadata%20from%20setup%20cell%0A)%20-%3E%20None%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Raises%20ValueError%20if%20invalid%0A%20%20%20%20%22%22%22Validate%20that%20required%20metadata%20keys%20exist%20and%20have%20valid%20values%20for%20package%20generation%22%22%22%0A%0A%20%20%20%20required%20%3D%20%5B'__version__'%2C%20'__description__'%2C%20'__author__'%2C%20'__license__'%5D%0A%20%20%20%20missing%20%3D%20%5Bk%20for%20k%20in%20required%20if%20k%20not%20in%20setup_metadata%5D%0A%0A%20%20%20%20if%20missing%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22Setup%20cell%20missing%20required%20metadata%3A%20%7B'%2C%20'.join(missing)%7D%5Cn%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22Add%20these%20to%20your%20setup%20cell%3A%5Cn%22%20%2B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20'%5Cn'.join(%5Bf%22%20%20%20%20%7Bk%7D%20%3D%20'...'%22%20for%20k%20in%20missing%5D)%0A%20%20%20%20%20%20%20%20)%0A%0A%20%20%20%20%23%20Validate%20version%0A%20%20%20%20version%20%3D%20setup_metadata%5B'__version__'%5D%0A%20%20%20%20if%20not%20version%20or%20not%20version.strip()%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%22__version__%20cannot%20be%20empty%22)%0A%0A%20%20%20%20%23%20Validate%20description%0A%20%20%20%20desc%20%3D%20setup_metadata%5B'__description__'%5D%0A%20%20%20%20if%20not%20desc%20or%20not%20desc.strip()%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%22__description__%20cannot%20be%20empty%22)%0A%0A%20%20%20%20%23%20Validate%20author%20format%0A%20%20%20%20author%20%3D%20setup_metadata%5B'__author__'%5D%0A%20%20%20%20if%20not%20author%20or%20not%20author.strip()%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%22__author__%20cannot%20be%20empty%22)%0A%20%20%20%20if%20'%3C'%20not%20in%20author%20or%20'%3E'%20not%20in%20author%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%22__author__%20must%20be%20in%20format%20'Name%20%3Cemail%40example.com%3E'%22)%0A%0A%20%20%20%20email_part%20%3D%20author.split('%3C')%5B1%5D.split('%3E')%5B0%5D.strip()%0A%20%20%20%20if%20not%20email_part%20or%20'%40'%20not%20in%20email_part%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(f%22__author__%20email%20'%7Bemail_part%7D'%20is%20not%20valid%22)%0A%0A%20%20%20%20%23%20Validate%20license%0A%20%20%20%20license_val%20%3D%20setup_metadata%5B'__license__'%5D%0A%20%20%20%20if%20not%20license_val%20or%20not%20license_val.strip()%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%22__license__%20cannot%20be%20empty%22)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Dynamic%20Docments%20test%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20extract_docs_dynamic(%0A%20%20%20%20clean_source%3A%20str%2C%20%20%20%20%20%20%20%20%20%20%23%20Function%20source%20code%20(without%20decorators)%0A%20%20%20%20func_name%3A%20str%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Name%20of%20the%20function%20to%20extract%20docs%20from%0A%20%20%20%20setup_imports%3A%20list%20%3D%20None%2C%20%20%23%20Add%20this%20parameter%0A%20%20%20%20eval_str%3A%20bool%20%3D%20True%20%20%20%20%20%20%20%23%20Weather%20to%20eval%20strings%20or%20not...idk%20the%20idfference.%20%0A)%20-%3E%20dict%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Docments-style%20dict%20with%20param%20info%0A%20%20%20%20%22%22%22Extract%20parameter%20docs%20by%20dynamically%20importing%20the%20function%22%22%22%0A%0A%20%20%20%20with%20tempfile.NamedTemporaryFile(mode%3D'w'%2C%20suffix%3D'.py'%2C%20delete%3DFalse)%20as%20f%3A%0A%20%20%20%20%20%20%20%20if%20setup_imports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20imp%20in%20setup_imports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.write(imp%20%2B%20'%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write('%5Cn')%0A%20%20%20%20%20%20%20%20f.write(clean_source)%0A%20%20%20%20%20%20%20%20temp_path%20%3D%20f.name%0A%0A%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%23%20Import%20the%20module%20dynamically%0A%20%20%20%20%20%20%20%20spec%20%3D%20importlib.util.spec_from_file_location(%22temp_module%22%2C%20temp_path)%0A%20%20%20%20%20%20%20%20module%20%3D%20importlib.util.module_from_spec(spec)%0A%20%20%20%20%20%20%20%20spec.loader.exec_module(module)%0A%0A%20%20%20%20%20%20%20%20%23%20Get%20the%20function%20object%0A%20%20%20%20%20%20%20%20func%20%3D%20getattr(module%2C%20func_name)%0A%0A%20%20%20%20%20%20%20%20%23%20Extract%20docs%20with%20fastcore%0A%20%20%20%20%20%20%20%20return%20docments(func%2C%20full%3DTrue%2C%20args_kwargs%3DTrue%2C%20eval_str%3D%20eval_str)%0A%20%20%20%20finally%3A%0A%20%20%20%20%20%20%20%20os.unlink(temp_path)%0A%0A%0A%40app.function%0Adef%20extract_docs_tbl(%0A%20%20%20%20clean_source%3A%20str%2C%20%20%20%20%20%20%20%20%20%20%23%20Function%20source%20code%20(without%20decorators)%0A%20%20%20%20func_name%3A%20str%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Name%20of%20the%20function%20to%20extract%20docs%20from%0A%20%20%20%20setup_imports%3A%20list%20%3D%20None%20%20%23%20Add%20this%20parameter%0A)%20-%3E%20dict%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Docments-style%20dict%20with%20param%20info%0A%20%20%20%20%22%22%22Extract%20parameter%20docs%20by%20dynamically%20importing%20the%20function%22%22%22%0A%0A%20%20%20%20with%20tempfile.NamedTemporaryFile(mode%3D'w'%2C%20suffix%3D'.py'%2C%20delete%3DFalse)%20as%20f%3A%0A%20%20%20%20%20%20%20%20if%20setup_imports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20imp%20in%20setup_imports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.write(imp%20%2B%20'%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write('%5Cn')%0A%20%20%20%20%20%20%20%20f.write(clean_source)%0A%20%20%20%20%20%20%20%20temp_path%20%3D%20f.name%0A%0A%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%23%20Import%20the%20module%20dynamically%0A%20%20%20%20%20%20%20%20spec%20%3D%20importlib.util.spec_from_file_location(%22temp_module%22%2C%20temp_path)%0A%20%20%20%20%20%20%20%20module%20%3D%20importlib.util.module_from_spec(spec)%0A%20%20%20%20%20%20%20%20spec.loader.exec_module(module)%0A%0A%20%20%20%20%20%20%20%20%23%20Get%20the%20function%20object%0A%20%20%20%20%20%20%20%20func%20%3D%20getattr(module%2C%20func_name)%0A%0A%20%20%20%20%20%20%20%20%23%20Extract%20docs%20with%20fastcore%0A%20%20%20%20%20%20%20%20return%20DocmentTbl(func)%0A%20%20%20%20finally%3A%0A%20%20%20%20%20%20%20%20os.unlink(temp_path)%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20sample_code%20%3D%20%22%22%22%0A%20%20%20%20%22This%20is%20a%20module.%22%0A%0A%20%20%20%20def%20top_func(%0A%20%20%20%20%20%20%20%20a%2C%20%20%20%20%20%23%20this%20is%20the%20A%20parameter%0A%20%20%20%20%20%20%20%20b%2C%0A%20%20%20%20%20%20%20%20*args%2C%0A%20%20%20%20%20%20%20%20**kw)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%22This%20is%20top-level.%22%0A%20%20%20%20%20%20%20%20%20%20%20%20pass%0A%0A%20%20%20%20class%20SampleClass%3A%0A%20%20%20%20%20%20%20%20%22This%20is%20a%20class.%22%0A%0A%20%20%20%20%20%20%20%20def%20__init__(self%2C%20x%2C%20y)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Constructor%20for%20SampleClass.%22%0A%20%20%20%20%20%20%20%20%20%20%20%20pass%0A%0A%20%20%20%20%20%20%20%20def%20method1(self%2C%20param1)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%22This%20is%20method1.%22%0A%20%20%20%20%20%20%20%20%20%20%20%20pass%0A%0A%20%20%20%20%20%20%20%20def%20_private_method(self)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%22This%20should%20not%20be%20included.%22%0A%20%20%20%20%20%20%20%20%20%20%20%20pass%0A%0A%20%20%20%20class%20AnotherClass%3A%0A%20%20%20%20%20%20%20%20def%20__init__(self%2C%20a%2C%20b)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%22This%20class%20has%20no%20separate%20docstring.%22%0A%20%20%20%20%20%20%20%20%20%20%20%20pass%22%22%22%0A%0A%20%20%20%20exp%20%3D%20%7B'_module'%3A%20('This%20is%20a%20module.'%2C%20'')%2C%0A%20%20%20%20%20%20%20%20%20%20%20'top_func'%3A%20('This%20is%20top-level.'%2C%20'a%2C%20b%2C%20*args%2C%20**kw')%2C%0A%20%20%20%20%20%20%20%20%20%20%20'SampleClass'%3A%20('This%20is%20a%20class.'%2C%20'self%2C%20x%2C%20y')%2C%0A%20%20%20%20%20%20%20%20%20%20%20'SampleClass.method1'%3A%20('This%20is%20method1.'%2C%20'self%2C%20param1')%2C%0A%20%20%20%20%20%20%20%20%20%20%20'AnotherClass'%3A%20('This%20class%20has%20no%20separate%20docstring.'%2C%20'self%2C%20a%2C%20b')%7D%0A%20%20%20%20test_eq(extract_docstrings(sample_code)%2C%20exp)%0A%0A%20%20%20%20extract_docstrings(sample_code)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20_test_imports%20%3D%20%5B'from%20typing%20import%20List'%5D%0A%20%20%20%20_test_imports%20%3D%20None%0A%20%20%20%20test_regular_class%20%3D%20'''%0A%20%20%20%20class%20MyClass%3A%0A%20%20%20%20%20%20%20%20%22%22%22A%20simple%20test%20class%22%22%22%0A%0A%20%20%20%20%20%20%20%20def%20__init__(%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20str%2C%20%20%20%20%20%20%20%20%23%20Name%20of%20the%20instance%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20int%20%3D%2010%20%20%20%23%20Initial%20value%0A%20%20%20%20%20%20%20%20)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Initialize%20MyClass%22%0A%20%20%20%20%20%20%20%20%20%20%20%20self.name%20%3D%20name%0A%20%20%20%20%20%20%20%20%20%20%20%20self.value%20%3D%20value%0A%20%20%20%20'''%0A%0A%20%20%20%20%23extract_docs_dynamic(test_regular_class%2C%20'MyClass')%0A%20%20%20%20extract_docs_tbl(test_regular_class%2C%20%22MyClass%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20test_source%20%3D%20'''%0A%20%20%20%20def%20add(a%3A%20int%2C%20b%3A%20int%2C%20*args%2C%20**kwargs)%20-%3E%20int%3A%0A%20%20%20%20%20%20%20%20%22Add%20%60a%60%20to%20%60b%60%22%0A%20%20%20%20%20%20%20%20return%20a%20%2B%20b%0A%20%20%20%20'''%0A%20%20%20%20extract_docs_dynamic(test_source%2C%20'add'%2C%20eval_str%3DFalse)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20test_nbdev%20%3D%20'''%0A%20%20%20%20def%20write_init(%0A%20%20%20%20%20%20%20%20package_name%3A%20str%2C%20%20%20%20%20%20%20%23%20Package%20name%0A%20%20%20%20%20%20%20%20metadata%3A%20dict%2C%20%20%20%20%20%20%20%20%20%20%23%20Project%20metadata%0A%20%20%20%20%20%20%20%20output_file%3A%20str%20%20%20%20%20%20%20%20%20%23%20Path%20to%20__init__.py%0A%20%20%20%20)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20written%20file%0A%20%20%20%20%20%20%20%20%22Write%20package%20__init__.py%22%0A%20%20%20%20%20%20%20%20return%20output_file%0A%20%20%20%20'''%0A%0A%20%20%20%20result2%20%3D%20extract_docs_dynamic(test_nbdev%2C%20'write_init')%0A%20%20%20%20result2%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20test_defaults%20%3D%20'''%0A%20%20%20%20def%20scan_notebooks(%0A%20%20%20%20%20%20%20%20notebooks_dir%3A%20str%20%3D%20'notebooks'%2C%20%20%20%20%23%20Directory%20containing%20notebook%20files%0A%20%20%20%20%20%20%20%20docstring_style%3A%20str%20%3D%20'nbdev'%20%20%20%20%20%20%20%23%20Docstring%20style%20for%20all%20exports%0A%20%20%20%20)%20-%3E%20dict%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Scan%20result%0A%20%20%20%20%20%20%20%20%22Scan%20notebooks%20directory%22%0A%20%20%20%20%20%20%20%20return%20%7B%7D%0A%20%20%20%20'''%0A%0A%20%20%20%20result3%20%3D%20extract_docs_dynamic(test_defaults%2C%20'scan_notebooks')%0A%20%20%20%20result3%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20test4%20%3D%20'''%0A%20%20%20%20def%20add(%0A%20%20%20%20%20%20%20%20%23%20The%20first%20operand%0A%20%20%20%20%20%20%20%20a%3Aint%2C%0A%20%20%20%20%20%20%20%20%23%20This%20is%20the%20second%20of%20the%20operands%20to%20the%20*addition*%20operator.%0A%20%20%20%20%20%20%20%20%23%20Note%20that%20passing%20a%20negative%20value%20here%20is%20the%20equivalent%20of%20the%20*subtraction*%20operator.%0A%20%20%20%20%20%20%20%20b%3Aint%20%3D%207%0A%20%20%20%20)%3A%0A%20%20%20%20%20%20%20%20%22Add%20%60a%60%20to%20%60b%60%22%0A%20%20%20%20%20%20%20%20return%20a%2Bb%0A%20%20%20%20'''%0A%20%20%20%20extract_docs_dynamic(test4%2C%20%22add%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Scan%20%2Fnotebooks%20Directory%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20scan_notebooks(%0A%20%20%20%20notebooks_dir%3A%20str%20%3D%20'notebooks'%2C%20%23%20Directory%20containing%20notebook%20files%0A%20%20%20%20docstring_style%3A%20str%20%3D%20'nbdev'%20%20%20%20%23%20Docstring%20style%20for%20all%20exports%0A)%20-%3E%20dict%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Dict%20with%20keys%3A%20'metadata'%2C%20'modules'%2C%20'index_path'%0A%20%20%20%20%22Scan%20notebooks%20directory%20and%20extract%20all%20exports%2C%20metadata%2C%20and%20README%22%0A%0A%20%20%20%20notebooks_path%20%3D%20Path(notebooks_dir)%0A%0A%20%20%20%20if%20not%20notebooks_path.exists()%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(f%22Notebooks%20directory%20'%7Bnotebooks_dir%7D'%20does%20not%20exist%22)%0A%0A%20%20%20%20%23%20Get%20all%20.py%20files%2C%20sorted%0A%20%20%20%20notebook_files%20%3D%20sorted(notebooks_path.glob('*.py'))%0A%0A%20%20%20%20if%20not%20notebook_files%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(f%22No%20.py%20files%20found%20in%20'%7Bnotebooks_dir%7D'%22)%0A%0A%20%20%20%20metadata%20%3D%20None%0A%20%20%20%20metadata_found_in%20%3D%20None%0A%20%20%20%20index_path%20%3D%20None%0A%20%20%20%20modules%20%3D%20%5B%5D%0A%0A%20%20%20%20for%20notebook_file%20in%20notebook_files%3A%0A%20%20%20%20%20%20%20%20%23%20Skip%20__pycache__%20and%20hidden%20files%0A%20%20%20%20%20%20%20%20if%20notebook_file.name.startswith('.')%20or%20notebook_file.name%20%3D%3D%20'__pycache__'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%23%20Extract%20from%20this%20notebook%0A%20%20%20%20%20%20%20%20nb_metadata%2C%20setup_imports%2C%20exports%2C%20export_names%20%3D%20extract_exports(%0A%20%20%20%20%20%20%20%20%20%20%20%20str(notebook_file)%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20docstring_style%0A%20%20%20%20%20%20%20%20)%0A%0A%20%20%20%20%20%20%20%20%23%20Check%20for%20metadata%20(should%20only%20be%20in%20one%20file)%0A%20%20%20%20%20%20%20%20if%20nb_metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20metadata_found_in%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20raise%20ValueError(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22Project%20metadata%20defined%20in%20multiple%20notebooks%3A%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22%20%20-%20%7Bmetadata_found_in%7D%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22%20%20-%20%7Bnotebook_file.name%7D%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22Metadata%20should%20only%20be%20defined%20in%20one%20notebook%20(typically%2000_index%20or%20index.py)%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20metadata%20%3D%20nb_metadata%0A%20%20%20%20%20%20%20%20%20%20%20%20metadata_found_in%20%3D%20notebook_file.name%0A%20%20%20%20%20%20%20%20%20%20%20%20index_path%20%3D%20str(notebook_file)%0A%0A%0A%20%20%20%20%20%20%20%20%23%20Store%20module%20info%20(even%20if%20no%20exports%2C%20we%20track%20the%20imports)%0A%20%20%20%20%20%20%20%20module_name%20%3D%20re.sub(r'%5E%5Cd%2B_'%2C%20''%2C%20notebook_file.stem)%0A%0A%20%20%20%20%20%20%20%20modules.append(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'name'%3A%20module_name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'imports'%3A%20setup_imports%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'exports'%3A%20exports%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'export_names'%3A%20export_names%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%23%20Validate%20we%20found%20required%20metadata%0A%20%20%20%20if%20not%20metadata%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22No%20project%20metadata%20found%20in%20any%20notebook.%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22Add%20metadata%20to%20your%20config%20notebook%20(e.g.%2C%2000_index.py)%20in%20the%20setup%20cell%3A%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%20%20%20%20__version__%20%3D%20'0.1.0'%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%20%20%20%20__description__%20%3D%20'My%20package'%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%20%20%20%20__author__%20%3D%20'Name%20%3Cemail%40example.com%3E'%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%20%20%20%20__license__%20%3D%20'MIT'%22%0A%20%20%20%20%20%20%20%20)%0A%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20'metadata'%3A%20metadata%2C%0A%20%20%20%20%20%20%20%20'modules'%3A%20modules%2C%0A%20%20%20%20%20%20%20%20'index_path'%3A%20index_path%0A%20%20%20%20%7D%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Extraction%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20extract_exports(%0A%20%20%20%20notebook_path%3A%20str%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20marimo%20notebook%20file%0A%20%20%20%20docstring_style%3A%20str%20%3D%20'nbdev'%20%20%23%20Target%20docstring%20format%3A%20'google'%2C%20'numpy'%2C%20or%20'nbdev'%0A)%20-%3E%20tuple%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20(setup_metadata%2C%20setup_imports%2C%20exports%2C%20export_names)%0A%20%20%20%20%22Extract%20metadata%2C%20imports%2C%20and%20exportable%20functions%2Fclasses%20from%20marimo%20notebook%22%0A%0A%20%20%20%20source_code%20%3D%20Path(notebook_path).read_text()%0A%20%20%20%20tree%20%3D%20ast.parse(source_code)%0A%0A%20%20%20%20setup_metadata%20%3D%20%7B%7D%0A%20%20%20%20setup_imports%20%3D%20%5B%5D%0A%20%20%20%20exports%20%3D%20%5B%5D%0A%20%20%20%20export_names%20%3D%20%5B%5D%0A%0A%20%20%20%20for%20node%20in%20tree.body%3A%0A%20%20%20%20%20%20%20%20%23%20Extract%20setup%20cell%20content%0A%20%20%20%20%20%20%20%20if%20isinstance(node%2C%20ast.With)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20stmt%20in%20node.body%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20isinstance(stmt%2C%20ast.Assign)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setup_metadata%5Bstmt.targets%5B0%5D.id%5D%20%3D%20ast.literal_eval(stmt.value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20elif%20isinstance(stmt%2C%20(ast.Import%2C%20ast.ImportFrom))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setup_imports.append(ast.unparse(stmt))%0A%0A%20%20%20%20%20%20%20%20%23%20Extract%20exportable%20functions%2Fclasses%0A%20%20%20%20%20%20%20%20elif%20isinstance(node%2C%20(ast.FunctionDef%2C%20ast.ClassDef))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20any(is_marimo_export_decorator(d)%20for%20d%20in%20node.decorator_list)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20node.name.startswith('test_')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Get%20original%20source%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20original_source%20%3D%20ast.get_source_segment(source_code%2C%20node)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Remove%20marimo%20decorators%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines%20%3D%20original_source.split('%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filtered_lines%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20line%20in%20lines%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stripped%20%3D%20line.strip()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20(stripped.startswith('%40app.function')%20or%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stripped.startswith('%40app.class_definition'))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filtered_lines.append(line)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clean_source%20%3D%20'%5Cn'.join(filtered_lines)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Reformat%20if%20needed%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20docstring_style%20!%3D%20'nbdev'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20docs%20%3D%20extract_param_docs_from_ast(clean_source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20formatted_source%20%3D%20build_formatted_docstring(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clean_source%2C%20docs%2C%20docstring_style%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20exports.append(formatted_source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20except%20Exception%20as%20e%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print(f%22%E2%9A%A0%EF%B8%8F%20%20Could%20not%20reformat%20%7Bnode.name%7D%3A%20%7Be%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20exports.append(clean_source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20exports.append(clean_source)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20export_names.append(node.name)%0A%0A%20%20%20%20return%20(setup_metadata%2C%20setup_imports%2C%20exports%2C%20export_names)%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20extract_param_docs_from_ast(%0A%20%20%20%20func_source%3A%20str%20%20%23%20Function%20source%20code%20as%20string%0A)%20-%3E%20dict%3A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Dict%20mapping%20param%20names%20to%20%7B'anno'%3A%20type%2C%20'docment'%3A%20comment%7D%0A%20%20%20%20%22Extract%20parameter%20docs%20using%20AST%20%2B%20tokenizer%2C%20no%20exec%20needed%22%0A%0A%20%20%20%20%23%20Parse%20AST%20to%20get%20parameter%20info%0A%20%20%20%20tree%20%3D%20ast.parse(func_source)%0A%20%20%20%20func_node%20%3D%20tree.body%5B0%5D%0A%0A%20%20%20%20%23%20Get%20parameter%20line%20numbers%20and%20names%20from%20AST%0A%20%20%20%20param_locs%20%3D%20%7B%7D%0A%20%20%20%20for%20arg%20in%20func_node.args.args%3A%0A%20%20%20%20%20%20%20%20param_locs%5Barg.lineno%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'name'%3A%20arg.arg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20ast.unparse(arg.annotation)%20if%20arg.annotation%20else%20None%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%23%20Add%20*args%20if%20present%0A%20%20%20%20if%20func_node.args.vararg%3A%0A%20%20%20%20%20%20%20%20param_locs%5Bfunc_node.args.vararg.lineno%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'name'%3A%20func_node.args.vararg.arg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20None%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%23%20Add%20keyword-only%20args%0A%20%20%20%20for%20arg%20in%20func_node.args.kwonlyargs%3A%0A%20%20%20%20%20%20%20%20param_locs%5Barg.lineno%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'name'%3A%20arg.arg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20ast.unparse(arg.annotation)%20if%20arg.annotation%20else%20None%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%23%20Add%20**kwargs%20if%20present%0A%20%20%20%20if%20func_node.args.kwarg%3A%0A%20%20%20%20%20%20%20%20param_locs%5Bfunc_node.args.kwarg.lineno%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'name'%3A%20func_node.args.kwarg.arg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20None%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%23%20Add%20return%20annotation%0A%20%20%20%20if%20func_node.returns%3A%0A%20%20%20%20%20%20%20%20param_locs%5Bfunc_node.returns.lineno%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'name'%3A%20'return'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20ast.unparse(func_node.returns)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%23%20Tokenize%20to%20get%20comments%0A%20%20%20%20tokens%20%3D%20tokenize(io.BytesIO(func_source.encode('utf-8')).readline)%0A%20%20%20%20clean_re%20%3D%20re.compile(r'%5E%5Cs*%23(.*)%5Cs*%24')%0A%20%20%20%20comments%20%3D%20%7B%7D%0A%20%20%20%20for%20token%20in%20tokens%3A%0A%20%20%20%20%20%20%20%20if%20token.type%20%3D%3D%20COMMENT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20match%20%3D%20clean_re.findall(token.string)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20match%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20comments%5Btoken.start%5B0%5D%5D%20%3D%20match%5B0%5D.strip()%0A%0A%20%20%20%20%23%20Match%20comments%20to%20parameters%0A%20%20%20%20result%20%3D%20%7B%7D%0A%20%20%20%20for%20line%2C%20param_info%20in%20param_locs.items()%3A%0A%20%20%20%20%20%20%20%20name%20%3D%20param_info%5B'name'%5D%0A%20%20%20%20%20%20%20%20comment%20%3D%20comments.get(line%2C%20'')%0A%20%20%20%20%20%20%20%20result%5Bname%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20param_info%5B'anno'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'docment'%3A%20comment%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20build_formatted_docstring(%0A%20%20%20%20func_source%3A%20str%2C%20%20%20%20%20%20%20%23%20Original%20function%20source%20code%0A%20%20%20%20docs%3A%20dict%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Parameter%20docs%20from%20extract_param_docs_from_ast%0A%20%20%20%20target_style%3A%20str%20%20%20%20%20%20%20%23%20'google'%20or%20'numpy'%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Function%20source%20with%20reformatted%20docstring%0A%20%20%20%20%22Build%20formatted%20docstring%20from%20docs%20dict%22%0A%0A%20%20%20%20tree%20%3D%20ast.parse(func_source)%0A%20%20%20%20func_node%20%3D%20tree.body%5B0%5D%0A%20%20%20%20existing_doc%20%3D%20ast.get_docstring(func_node)%20or%20%22%22%0A%0A%20%20%20%20lines%20%3D%20%5Bexisting_doc.strip()%5D%20if%20existing_doc%20else%20%5B%5D%0A%0A%20%20%20%20if%20target_style%20%3D%3D%20'google'%3A%0A%20%20%20%20%20%20%20%20params%20%3D%20%7Bk%3A%20v%20for%20k%2C%20v%20in%20docs.items()%20if%20k%20!%3D%20'return'%20and%20v.get('docment')%7D%0A%20%20%20%20%20%20%20%20if%20params%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22Args%3A%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20name%2C%20info%20in%20params.items()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20anno%20%3D%20info.get('anno'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc%20%3D%20info.get('docment'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20anno%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bname%7D%20(%7Banno%7D)%3A%20%7Bdoc%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bname%7D%3A%20%7Bdoc%7D%22)%0A%0A%20%20%20%20%20%20%20%20ret%20%3D%20docs.get('return')%0A%20%20%20%20%20%20%20%20if%20ret%20and%20ret.get('docment')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22Returns%3A%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20ret_anno%20%3D%20ret.get('anno'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20ret_doc%20%3D%20ret.get('docment'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20ret_anno%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bret_anno%7D%3A%20%7Bret_doc%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bret_doc%7D%22)%0A%0A%20%20%20%20elif%20target_style%20%3D%3D%20'numpy'%3A%0A%20%20%20%20%20%20%20%20params%20%3D%20%7Bk%3A%20v%20for%20k%2C%20v%20in%20docs.items()%20if%20k%20!%3D%20'return'%20and%20v.get('docment')%7D%0A%20%20%20%20%20%20%20%20if%20params%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22Parameters%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22----------%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20name%2C%20info%20in%20params.items()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20anno%20%3D%20info.get('anno'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc%20%3D%20info.get('docment'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20anno%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%7Bname%7D%20%3A%20%7Banno%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%7Bname%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20doc%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bdoc%7D%22)%0A%0A%20%20%20%20%20%20%20%20ret%20%3D%20docs.get('return')%0A%20%20%20%20%20%20%20%20if%20ret%20and%20ret.get('docment')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22Returns%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22-------%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20ret_anno%20%3D%20ret.get('anno'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20ret_doc%20%3D%20ret.get('docment'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20ret_anno%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%7Bret_anno%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20ret_doc%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bret_doc%7D%22)%0A%0A%20%20%20%20new_docstring%20%3D%20'%5Cn'.join(lines)%0A%0A%20%20%20%20%23%20Replace%20docstring%20in%20AST%0A%20%20%20%20for%20node%20in%20ast.walk(tree)%3A%0A%20%20%20%20%20%20%20%20if%20isinstance(node%2C%20(ast.FunctionDef%2C%20ast.AsyncFunctionDef))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(node.body%20and%20isinstance(node.body%5B0%5D%2C%20ast.Expr)%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20and%20isinstance(node.body%5B0%5D.value%2C%20ast.Constant))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20node.body%5B0%5D.value.value%20%3D%20new_docstring%0A%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc_node%20%3D%20ast.Expr(value%3Dast.Constant(value%3Dnew_docstring))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20node.body.insert(0%2C%20doc_node)%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%0A%20%20%20%20return%20ast.unparse(tree)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Write%20Files%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20update_pyproject_toml(%0A%20%20%20%20setup_metadata%3A%20dict%2C%20%20%20%20%20%20%23%20Package%20metadata%20from%20setup%20cell%0A%20%20%20%20pyproject_path%3A%20str%20%3D%20%22pyproject.toml%22%20%20%23%20Path%20to%20pyproject.toml%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20updated%20file%0A%20%20%20%20%22Update%20pyproject.toml%20with%20metadata%20from%20notebook%20setup%20cell%22%0A%0A%20%20%20%20%23%20Validate%20metadata%20first%0A%20%20%20%20validate_setup_metadata(setup_metadata)%0A%0A%20%20%20%20%23%20Read%20existing%20pyproject.toml%0A%20%20%20%20with%20open(pyproject_path%2C%20'rb')%20as%20f%3A%0A%20%20%20%20%20%20%20%20config%20%3D%20tomllib.load(f)%0A%0A%20%20%20%20%23%20Update%20%5Bproject%5D%20section%20with%20required%20fields%0A%20%20%20%20if%20'project'%20not%20in%20config%3A%0A%20%20%20%20%20%20%20%20config%5B'project'%5D%20%3D%20%7B%7D%0A%0A%20%20%20%20config%5B'project'%5D%5B'version'%5D%20%3D%20setup_metadata%5B'__version__'%5D%0A%20%20%20%20config%5B'project'%5D%5B'description'%5D%20%3D%20setup_metadata%5B'__description__'%5D%0A%20%20%20%20config%5B'project'%5D%5B'license'%5D%20%3D%20%7B'text'%3A%20setup_metadata%5B'__license__'%5D%7D%0A%0A%20%20%20%20%23%20Parse%20author%0A%20%20%20%20author_name%20%3D%20setup_metadata%5B'__author__'%5D.split('%3C')%5B0%5D.strip()%0A%20%20%20%20author_email%20%3D%20setup_metadata%5B'__author__'%5D.split('%3C')%5B1%5D.strip('%3E')%0A%20%20%20%20config%5B'project'%5D%5B'authors'%5D%20%3D%20%5B%7B'name'%3A%20author_name%2C%20'email'%3A%20author_email%7D%5D%0A%0A%20%20%20%20%23%20Add%20optional%20fields%20if%20present%0A%20%20%20%20if%20'__keywords__'%20in%20setup_metadata%20and%20setup_metadata%5B'__keywords__'%5D%3A%0A%20%20%20%20%20%20%20%20config%5B'project'%5D%5B'keywords'%5D%20%3D%20setup_metadata%5B'__keywords__'%5D%0A%0A%20%20%20%20if%20'__classifiers__'%20in%20setup_metadata%20and%20setup_metadata%5B'__classifiers__'%5D%3A%0A%20%20%20%20%20%20%20%20config%5B'project'%5D%5B'classifiers'%5D%20%3D%20setup_metadata%5B'__classifiers__'%5D%0A%0A%20%20%20%20%23%20Add%20project%20URLs%20if%20present%0A%20%20%20%20if%20any(k%20in%20setup_metadata%20for%20k%20in%20%5B'__repository__'%2C%20'__homepage__'%2C%20'__documentation__'%5D)%3A%0A%20%20%20%20%20%20%20%20config%5B'project'%5D%5B'urls'%5D%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20if%20'__repository__'%20in%20setup_metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20config%5B'project'%5D%5B'urls'%5D%5B'Repository'%5D%20%3D%20setup_metadata%5B'__repository__'%5D%0A%20%20%20%20%20%20%20%20if%20'__homepage__'%20in%20setup_metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20config%5B'project'%5D%5B'urls'%5D%5B'Homepage'%5D%20%3D%20setup_metadata%5B'__homepage__'%5D%0A%20%20%20%20%20%20%20%20if%20'__documentation__'%20in%20setup_metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20config%5B'project'%5D%5B'urls'%5D%5B'Documentation'%5D%20%3D%20setup_metadata%5B'__documentation__'%5D%0A%0A%20%20%20%20%23%20Write%20back%20using%20tomlkit%20to%20preserve%20formatting%0A%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20import%20tomlkit%0A%20%20%20%20%20%20%20%20with%20open(pyproject_path%2C%20'r')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20doc%20%3D%20tomlkit.load(f)%0A%0A%20%20%20%20%20%20%20%20%23%20Update%20with%20new%20values%0A%20%20%20%20%20%20%20%20if%20'project'%20not%20in%20doc%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20doc%5B'project'%5D%20%3D%20%7B%7D%0A%0A%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'version'%5D%20%3D%20setup_metadata%5B'__version__'%5D%0A%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'description'%5D%20%3D%20setup_metadata%5B'__description__'%5D%0A%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'license'%5D%20%3D%20%7B'text'%3A%20setup_metadata%5B'__license__'%5D%7D%0A%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'authors'%5D%20%3D%20%5B%7B'name'%3A%20author_name%2C%20'email'%3A%20author_email%7D%5D%0A%0A%20%20%20%20%20%20%20%20if%20'__keywords__'%20in%20setup_metadata%20and%20setup_metadata%5B'__keywords__'%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'keywords'%5D%20%3D%20setup_metadata%5B'__keywords__'%5D%0A%0A%20%20%20%20%20%20%20%20if%20'__classifiers__'%20in%20setup_metadata%20and%20setup_metadata%5B'__classifiers__'%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'classifiers'%5D%20%3D%20setup_metadata%5B'__classifiers__'%5D%0A%0A%20%20%20%20%20%20%20%20if%20any(k%20in%20setup_metadata%20for%20k%20in%20%5B'__repository__'%2C%20'__homepage__'%2C%20'__documentation__'%5D)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20'urls'%20not%20in%20doc%5B'project'%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'urls'%5D%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20'__repository__'%20in%20setup_metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'urls'%5D%5B'Repository'%5D%20%3D%20setup_metadata%5B'__repository__'%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20'__homepage__'%20in%20setup_metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'urls'%5D%5B'Homepage'%5D%20%3D%20setup_metadata%5B'__homepage__'%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20'__documentation__'%20in%20setup_metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'urls'%5D%5B'Documentation'%5D%20%3D%20setup_metadata%5B'__documentation__'%5D%0A%0A%20%20%20%20%20%20%20%20with%20open(pyproject_path%2C%20'w')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20tomlkit.dump(doc%2C%20f)%0A%0A%20%20%20%20except%20ImportError%3A%0A%20%20%20%20%20%20%20%20%23%20Fallback%20if%20tomlkit%20not%20available%20-%20just%20append%20to%20file%0A%20%20%20%20%20%20%20%20print(%22%E2%9A%A0%EF%B8%8F%20%20tomlkit%20not%20available%2C%20using%20basic%20TOML%20writing%22)%0A%20%20%20%20%20%20%20%20import%20json%0A%20%20%20%20%20%20%20%20%23%20This%20is%20a%20simple%20fallback%20-%20you%20might%20want%20to%20use%20tomli-w%20instead%0A%20%20%20%20%20%20%20%20with%20open(pyproject_path%2C%20'a')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write(f%22%5Cn%23%20Updated%20by%20m-dev%5Cn%22)%0A%0A%20%20%20%20print(f%22%E2%9C%85%20Updated%20%7Bpyproject_path%7D%20with%20metadata%22)%0A%20%20%20%20return%20pyproject_path%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20write_module(%0A%20%20%20%20module_name%3A%20str%2C%20%20%20%20%20%20%20%20%23%20Name%20of%20the%20module%20(without%20.py)%0A%20%20%20%20setup_imports%3A%20list%2C%20%20%20%20%20%23%20Import%20statements%20from%20setup%20cell%0A%20%20%20%20exports%3A%20list%2C%20%20%20%20%20%20%20%20%20%20%20%23%20Exported%20function%2Fclass%20source%20code%0A%20%20%20%20output_file%3A%20str%20%20%20%20%20%20%20%20%20%23%20Path%20for%20output%20file%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20written%20file%0A%20%20%20%20%22Write%20Python%20module%20file%20with%20imports%20and%20exported%20code%22%0A%20%20%20%20with%20Path(output_file).open('w')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%23%20Write%20imports%0A%20%20%20%20%20%20%20%20if%20setup_imports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20imp%20in%20setup_imports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.write(imp%20%2B%20'%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write('%5Cn')%0A%0A%20%20%20%20%20%20%20%20%23%20Write%20exports%0A%20%20%20%20%20%20%20%20for%20export%20in%20exports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write(export%20%2B%20'%5Cn%5Cn')%0A%0A%20%20%20%20return%20output_file%0A%0A%0A%40app.function%0Adef%20write_init(%0A%20%20%20%20package_name%3A%20str%2C%20%20%20%20%20%20%20%23%20Package%20name%0A%20%20%20%20metadata%3A%20dict%2C%20%20%20%20%20%20%20%20%20%20%23%20Project%20metadata%20from%20setup%20cell%0A%20%20%20%20modules%3A%20list%2C%20%20%20%20%20%20%20%20%20%20%20%23%20List%20of%20module%20dicts%20from%20scan_notebooks%0A%20%20%20%20output_file%3A%20str%20%20%20%20%20%20%20%20%20%23%20Path%20to%20__init__.py%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20written%20file%0A%20%20%20%20%22Write%20package%20__init__.py%20with%20metadata%20and%20cross-module%20imports%20%22%0A%0A%20%20%20%20with%20Path(output_file).open('w')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%23%20Write%20package%20docstring%0A%20%20%20%20%20%20%20%20description%20%3D%20metadata.get('__description__'%2C%20'No%20description%20provided')%0A%20%20%20%20%20%20%20%20f.write(f'%22%22%22%7Bdescription%7D%22%22%22%5Cn%5Cn')%0A%0A%20%20%20%20%20%20%20%20%23%20Write%20metadata%0A%20%20%20%20%20%20%20%20f.write(f%22__version__%20%3D%20'%7Bmetadata%5B'__version__'%5D%7D'%5Cn%22)%0A%0A%20%20%20%20%20%20%20%20if%20'__author__'%20in%20metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20author_name%20%3D%20metadata%5B'__author__'%5D.split('%3C')%5B0%5D.strip()%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write(f%22__author__%20%3D%20'%7Bauthor_name%7D'%5Cn%22)%0A%0A%20%20%20%20%20%20%20%20f.write('%5Cn')%0A%0A%20%20%20%20%20%20%20%20%23%20Collect%20all%20export%20names%20across%20modules%0A%20%20%20%20%20%20%20%20all_exports%20%3D%20%5B%5D%0A%0A%20%20%20%20%20%20%20%20%23%20Write%20imports%20from%20submodules%0A%20%20%20%20%20%20%20%20for%20module%20in%20modules%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Skip%20the%20config%20module%20(00_config%20or%20similar)%20-%20no%20exports%20usually%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20module%5B'name'%5D.startswith('00_')%20or%20not%20module%5B'export_names'%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20module%5B'export_names'%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20exports_str%20%3D%20'%2C%20'.join(module%5B'export_names'%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.write(f%22from%20.%7Bmodule%5B'name'%5D%7D%20import%20%7Bexports_str%7D%5Cn%22)%20%20%23%20%3C--%20The%20key%20fix%3A%20added%20'.'%20for%20relative%20import%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20all_exports.extend(module%5B'export_names'%5D)%0A%0A%20%20%20%20%20%20%20%20%23%20Write%20__all__%0A%20%20%20%20%20%20%20%20if%20all_exports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write('%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write('__all__%20%3D%20%5B%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20name%20in%20all_exports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.write(f'%20%20%20%20%22%7Bname%7D%22%2C%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write('%5D%5Cn')%0A%0A%20%20%20%20print(f%22%E2%9C%85%20Generated%20%7Boutput_file%7D%22)%0A%20%20%20%20return%20output_file%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Readme%20Extraction%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20extract_mo_md_content(source%3A%20str)%20-%3E%20str%3A%0A%20%20%20%20%22Extract%20the%20string%20content%20from%20a%20mo.md()%20call%2C%20handling%20r%2Ff%2Frf%20string%20prefixes%22%0A%20%20%20%20%23%20Find%20mo.md(%20and%20extract%20everything%20between%20the%20opening%20and%20closing%20quotes%0A%20%20%20%20import%20re%0A%20%20%20%20%23%20Match%20mo.md%20with%20optional%20whitespace%2C%20then%20capture%20string%20with%20various%20prefixes%0A%20%20%20%20pattern%20%3D%20r'mo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%22%22%22(.*%3F)%22%22%22%7Cmo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%5C'%5C'%5C'(.*%3F)%5C'%5C'%5C'%7Cmo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%22(.*%3F)%22%7Cmo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%5C'(.*%3F)%5C''%0A%20%20%20%20match%20%3D%20re.search(pattern%2C%20source%2C%20re.DOTALL)%0A%20%20%20%20if%20match%3A%0A%20%20%20%20%20%20%20%20%23%20Return%20whichever%20group%20matched%20(triple%20quotes%20or%20single%20quotes)%0A%20%20%20%20%20%20%20%20for%20i%20in%20range(1%2C%20len(match.groups())%20%2B%201)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20match.group(i)%20is%20not%20None%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20match.group(i)%0A%20%20%20%20return%20''%0A%0A%0A%40app.function%0Adef%20extract_all_mo_md(source%3A%20str)%20-%3E%20list%3A%20%20%23%20Returns%20list%20of%20strings%0A%20%20%20%20%22Extract%20all%20mo.md()%20content%20from%20source%22%0A%20%20%20%20pattern%20%3D%20r'mo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%22%22%22(.*%3F)%22%22%22%7Cmo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%5C'%5C'%5C'(.*%3F)%5C'%5C'%5C'%7Cmo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%22(.*%3F)%22%7Cmo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%5C'(.*%3F)%5C''%0A%20%20%20%20results%20%3D%20%5B%5D%0A%20%20%20%20for%20match%20in%20re.finditer(pattern%2C%20source%2C%20re.DOTALL)%3A%0A%20%20%20%20%20%20%20%20for%20i%20in%20range(1%2C%20len(match.groups())%20%2B%201)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20match.group(i)%20is%20not%20None%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results.append(match.group(i))%0A%20%20%20%20return%20results%0A%0A%0A%40app.function%0Adef%20extract_readme(%0A%20%20%20%20setup_metadata%3A%20dict%2C%20%20%20%20%20%23%20Setup%20cell%20metadata%20for%20substitution%0A%20%20%20%20index_path%3A%20str%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20index%20notebook%20file%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20README.md%20or%20empty%20string%0A%20%20%20%20%22Extract%20all%20mo.md()%20cells%20from%20index.py%20and%20substitute%20metadata%22%0A%0A%20%20%20%20index_path%20%3D%20Path(index_path)%20if%20index_path%20else%20None%0A%20%20%20%20if%20not%20index_path%20or%20not%20index_path.exists()%3A%0A%20%20%20%20%20%20%20%20print('%E2%9A%A0%EF%B8%8F%20%20No%20index.py%20found.%20README.md%20will%20not%20be%20generated.')%0A%20%20%20%20%20%20%20%20return%20''%0A%0A%20%20%20%20source_code%20%3D%20index_path.read_text()%0A%20%20%20%20md_contents%20%3D%20extract_all_mo_md(source_code)%0A%0A%20%20%20%20if%20not%20md_contents%3A%0A%20%20%20%20%20%20%20%20print('%E2%9A%A0%EF%B8%8F%20%20No%20mo.md()%20cells%20found%20in%20index.py')%0A%20%20%20%20%20%20%20%20return%20''%0A%0A%20%20%20%20%23%20Join%20all%20markdown%20cells%2C%20substitute%20metadata%2C%20write%0A%20%20%20%20readme_text%20%3D%20'%5Cn%5Cn'.join(md_contents)%0A%20%20%20%20for%20key%2C%20value%20in%20setup_metadata.items()%3A%0A%20%20%20%20%20%20%20%20readme_text%20%3D%20readme_text.replace(f'%7B%7B%7Bkey%7D%7D%7D'%2C%20str(value))%0A%0A%20%20%20%20Path('README.md').write_text(readme_text)%0A%20%20%20%20print('%E2%9C%85%20README.md%20generated%20from%20index.py')%0A%20%20%20%20return%20'README.md'%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Build%20Package%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20build_package(%0A%20%20%20%20notebooks_dir%3A%20str%20%3D%20'notebooks'%2C%20%20%20%20%20%23%20Directory%20with%20notebook%20files%0A%20%20%20%20output_dir%3A%20str%20%3D%20'src'%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Output%20directory%20for%20package%0A%20%20%20%20docstring_style%3A%20str%20%3D%20'nbdev'%20%20%20%20%20%20%20%20%23%20Docstring%20format%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20built%20package%0A%20%20%20%20%22Build%20a%20Python%20package%20from%20marimo%20notebook(s)%22%0A%0A%20%20%20%20print(f%22%F0%9F%94%8D%20Scanning%20notebooks%20in%20%7Bnotebooks_dir%7D%2F%22)%0A%0A%20%20%20%20%23%20Scan%20all%20notebooks%0A%20%20%20%20scan_result%20%3D%20scan_notebooks(notebooks_dir%2C%20docstring_style)%0A%20%20%20%20metadata%20%20%20%3D%20scan_result%5B'metadata'%5D%0A%20%20%20%20modules%20%20%20%20%3D%20scan_result%5B'modules'%5D%0A%20%20%20%20index_path%20%3D%20scan_result%5B'index_path'%5D%0A%0A%20%20%20%20%23%20Get%20package%20name%20from%20metadata%20or%20pyproject.toml%0A%20%20%20%20package_name%20%3D%20metadata.get('__package_name__')%0A%20%20%20%20if%20not%20package_name%3A%0A%20%20%20%20%20%20%20%20%23%20Try%20to%20read%20from%20existing%20pyproject.toml%0A%20%20%20%20%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20import%20tomllib%0A%20%20%20%20%20%20%20%20%20%20%20%20with%20open('pyproject.toml'%2C%20'rb')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20config%20%3D%20tomllib.load(f)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20package_name%20%3D%20config%5B'project'%5D%5B'name'%5D%0A%20%20%20%20%20%20%20%20except%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20raise%20ValueError(%22No%20__package_name__%20in%20metadata%20and%20no%20pyproject.toml%20found%22)%0A%0A%20%20%20%20package_name%20%3D%20package_name.replace('-'%2C%20'_')%20%20%23%20Convert%20to%20valid%20Python%20identifier%0A%0A%20%20%20%20print(f%22%F0%9F%93%A6%20Building%20package%3A%20%7Bpackage_name%7D%22)%0A%0A%20%20%20%20%23%20Create%20output%20directory%20structure%0A%20%20%20%20package_dir%20%3D%20Path(output_dir)%20%2F%20package_name%0A%20%20%20%20package_dir.mkdir(parents%3DTrue%2C%20exist_ok%3DTrue)%0A%0A%20%20%20%20%23%20Write%20individual%20module%20files%0A%20%20%20%20for%20module%20in%20modules%3A%0A%20%20%20%20%20%20%20%20%23%20Skip%20config%20files%20(no%20exports%20typically)%0A%20%20%20%20%20%20%20%20if%20module%5B'name'%5D%20%3D%3D%20'index'%3A%20continue%0A%0A%20%20%20%20%20%20%20%20if%20module%5B'exports'%5D%3A%20%20%23%20Only%20write%20if%20there%20are%20exports%0A%20%20%20%20%20%20%20%20%20%20%20%20module_file%20%3D%20package_dir%20%2F%20f%22%7Bmodule%5B'name'%5D%7D.py%22%0A%20%20%20%20%20%20%20%20%20%20%20%20write_module(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module%5B'name'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module%5B'imports'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module%5B'exports'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20str(module_file)%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20print(f%22%20%20%E2%9C%85%20%7Bmodule%5B'name'%5D%7D.py%22)%0A%0A%20%20%20%20%23%20Write%20__init__.py%0A%20%20%20%20init_file%20%3D%20package_dir%20%2F%20'__init__.py'%0A%20%20%20%20write_init(package_name%2C%20metadata%2C%20modules%2C%20str(init_file))%0A%0A%20%20%20%20%23%20Update%20pyproject.toml%20with%20metadata%0A%20%20%20%20if%20Path('pyproject.toml').exists()%3A%0A%20%20%20%20%20%20%20%20update_pyproject_toml(metadata%2C%20'pyproject.toml')%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20print(%22%E2%9A%A0%EF%B8%8F%20%20No%20pyproject.toml%20found.%20Run%20'uv%20init'%20first.%22)%0A%0A%20%20%20%20%23%20Extract%20README%20if%20present%0A%20%20%20%20extract_readme(metadata%2C%20index_path)%0A%0A%20%20%20%20print(f%22%5Cn%E2%9C%85%20Package%20built%20in%20%7Boutput_dir%7D%2F%7Bpackage_name%7D%2F%22)%0A%20%20%20%20return%20str(output_dir)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Documentation%20Converter%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20add(%0A%20%20%20%20%23%20The%20first%20operand%0A%20%20%20%20a%3Aint%2C%0A%20%20%20%20%23%20This%20is%20the%20second%20of%20the%20operands%20to%20the%20*addition*%20operator.%0A%20%20%20%20%23%20Note%20that%20passing%20a%20negative%20value%20here%20is%20the%20equivalent%20of%20the%20*subtraction*%20operator.%0A%20%20%20%20b%3Aint%2C%0A)-%3Eint%3A%20%23%20The%20result%20is%20calculated%20using%20Python's%20builtin%20%60%2B%60%20operator.%0A%20%20%20%20%22Add%20%60a%60%20to%20%60b%60%22%0A%20%20%20%20return%20a%2Bb%0A%0A%0A%40app.function%0Adef%20convert_docstyle(%0A%20%20%20%20func%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20The%20function%20to%20convert%20documentation%20for%0A%20%20%20%20target_style%3D'google'%2C%20%20%23%20One%20of%20'docments'%2C%20'google'%2C%20or%20'numpy'%0A%20%20%20%20include_signature%3DTrue%20%20%23%20Whether%20to%20include%20the%20function%20signature%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20String%20representation%20in%20the%20target%20documentation%20style%0A%20%20%20%20%22Convert%20function%20documentation%20between%20different%20styles.%22%0A%0A%20%20%20%20%23%20Extract%20all%20the%20information%20we%20need%0A%20%20%20%20docs_full%20%3D%20docments(func%2C%20full%3DTrue)%0A%20%20%20%20main_doc%20%3D%20docstring(func)%0A%20%20%20%20func_name%20%3D%20func.__name__%0A%20%20%20%20sig%20%3D%20inspect.signature(func)%0A%0A%20%20%20%20%23%20Separate%20return%20from%20parameters%0A%20%20%20%20params%20%3D%20%7Bk%3A%20v%20for%20k%2C%20v%20in%20docs_full.items()%20if%20k%20!%3D%20'return'%7D%0A%20%20%20%20return_info%20%3D%20docs_full.get('return'%2C%20%7B%7D)%0A%0A%20%20%20%20if%20target_style%20%3D%3D%20'docments'%3A%0A%20%20%20%20%20%20%20%20return%20format_docments_style(func_name%2C%20params%2C%20return_info%2C%20main_doc%2C%20include_signature)%0A%20%20%20%20elif%20target_style%20%3D%3D%20'google'%3A%0A%20%20%20%20%20%20%20%20return%20format_google_style(func_name%2C%20params%2C%20return_info%2C%20main_doc%2C%20include_signature%2C%20sig)%0A%20%20%20%20elif%20target_style%20%3D%3D%20'numpy'%3A%0A%20%20%20%20%20%20%20%20return%20format_numpy_style(func_name%2C%20params%2C%20return_info%2C%20main_doc%2C%20include_signature%2C%20sig)%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(f%22Unknown%20style%3A%20%7Btarget_style%7D.%20Use%20'docments'%2C%20'google'%2C%20or%20'numpy'%22)%0A%0A%0A%40app.function%0Adef%20format_docments_style(%0A%20%20%20%20func_name%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Name%20of%20the%20function%20%0A%20%20%20%20params%3A%20dict%2C%20%20%20%20%20%20%20%20%20%20%20%23%20Dictionary%20of%20parameter%20information%0A%20%20%20%20return_info%3A%20dict%2C%20%20%20%20%20%20%23%20Dictionary%20of%20return%20information%20%0A%20%20%20%20main_doc%3A%20str%2C%20%20%20%20%20%20%20%20%20%20%23%20Main%20Docustring%20content%0A%20%20%20%20include_signature%3Abool%2C%20%23%20whether%20to%20include%20the%20function%20signature%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20String%20representation%20in%20the%20target%20documentation%20style%0A%20%20%20%20%22%22%22Format%20in%20docments%20style%20(inline%20comments)%22%22%22%0A%20%20%20%20lines%20%3D%20%5Bf%22def%20%7Bfunc_name%7D(%22%5D%0A%0A%20%20%20%20for%20i%2C%20(name%2C%20info)%20in%20enumerate(params.items())%3A%0A%20%20%20%20%20%20%20%20anno%20%3D%20f%22%3A%7Binfo%5B'anno'%5D.__name__%7D%22%20if%20info%5B'anno'%5D%20!%3D%20empty%20and%20hasattr(info%5B'anno'%5D%2C%20'__name__')%20else%20%22%22%0A%20%20%20%20%20%20%20%20default%20%3D%20f%22%3D%7Brepr(info%5B'default'%5D)%7D%22%20if%20info%5B'default'%5D%20!%3D%20empty%20else%20%22%22%0A%20%20%20%20%20%20%20%20comment%20%3D%20f%22%20%20%23%20%7Binfo%5B'docment'%5D%7D%22%20if%20info%5B'docment'%5D%20and%20info%5B'docment'%5D%20!%3D%20empty%20else%20%22%22%0A%20%20%20%20%20%20%20%20comma%20%3D%20%22%2C%22%20if%20i%20%3C%20len(params)%20-%201%20else%20%22%22%0A%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bname%7D%7Banno%7D%7Bdefault%7D%7Bcomma%7D%7Bcomment%7D%22)%0A%0A%20%20%20%20ret_anno%20%3D%20f%22-%3E%7Breturn_info%5B'anno'%5D.__name__%7D%22%20if%20return_info.get('anno')%20!%3D%20empty%20and%20hasattr(return_info.get('anno')%2C%20'__name__')%20else%20%22%22%0A%20%20%20%20ret_comment%20%3D%20f%22%20%20%23%20%7Breturn_info%5B'docment'%5D%7D%22%20if%20return_info.get('docment')%20and%20return_info%5B'docment'%5D%20!%3D%20empty%20else%20%22%22%0A%20%20%20%20lines.append(f%22)%7Bret_anno%7D%3A%7Bret_comment%7D%22)%0A%0A%20%20%20%20if%20main_doc%3A%0A%20%20%20%20%20%20%20%20lines.append(f'%20%20%20%20%22%7Bmain_doc%7D%22')%0A%0A%20%20%20%20return%20'%5Cn'.join(lines)%0A%0A%0A%40app.function%0Adef%20format_google_style(%0A%20%20%20%20func_name%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Name%20of%20the%20function%0A%20%20%20%20params%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Dictionary%20of%20parameter%20information%0A%20%20%20%20return_info%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Dictionary%20of%20return%20information%0A%20%20%20%20main_doc%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Main%20docstring%20content%0A%20%20%20%20include_signature%3A%20bool%2C%20%20%20%23%20Whether%20to%20include%20the%20function%20signature%0A%20%20%20%20sig%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Function%20signature%20object%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Formatted%20string%20in%20Google%20style%0A%20%20%20%20%22Format%20in%20Google%20style%22%0A%20%20%20%20lines%20%3D%20%5B%5D%0A%0A%20%20%20%20if%20include_signature%3A%0A%20%20%20%20%20%20%20%20lines.append(f%22def%20%7Bfunc_name%7D%7Bsig%7D%3A%22)%0A%0A%20%20%20%20%23%20Main%20docstring%0A%20%20%20%20lines.append('%20%20%20%20%22%22%22'%20%2B%20(main_doc%20or%20%22%22))%0A%20%20%20%20lines.append(%22%22)%0A%0A%20%20%20%20%23%20Args%20section%0A%20%20%20%20if%20params%3A%0A%20%20%20%20%20%20%20%20lines.append(%22%20%20%20%20Args%3A%22)%0A%20%20%20%20%20%20%20%20for%20name%2C%20info%20in%20params.items()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20type_str%20%3D%20f%22%20(%7Binfo%5B'anno'%5D.__name__%7D)%22%20if%20info%5B'anno'%5D%20!%3D%20empty%20and%20hasattr(info%5B'anno'%5D%2C%20'__name__')%20else%20%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20default_str%20%3D%20f%22%2C%20optional%2C%20default%3D%7Brepr(info%5B'default'%5D)%7D%22%20if%20info%5B'default'%5D%20!%3D%20empty%20else%20%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20desc%20%3D%20info.get('docment'%2C%20'')%20or%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%20%20%20%20%7Bname%7D%7Btype_str%7D%3A%20%7Bdesc%7D%7Bdefault_str%7D%22)%0A%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%0A%20%20%20%20%23%20Returns%20section%0A%20%20%20%20if%20return_info.get('anno')%20!%3D%20empty%20or%20return_info.get('docment')%3A%0A%20%20%20%20%20%20%20%20lines.append(%22%20%20%20%20Returns%3A%22)%0A%20%20%20%20%20%20%20%20ret_type%20%3D%20return_info.get('anno')%0A%20%20%20%20%20%20%20%20type_str%20%3D%20f%22%7Bret_type.__name__%7D%3A%20%22%20if%20ret_type%20!%3D%20empty%20and%20hasattr(ret_type%2C%20'__name__')%20else%20%22%22%0A%20%20%20%20%20%20%20%20ret_desc%20%3D%20return_info.get('docment'%2C%20'')%20or%20''%0A%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%20%20%20%20%7Btype_str%7D%7Bret_desc%7D%22)%0A%0A%20%20%20%20lines.append('%20%20%20%20%22%22%22')%0A%20%20%20%20return%20'%5Cn'.join(lines)%0A%0A%0A%40app.function%0Adef%20format_numpy_style(%0A%20%20%20%20func_name%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Name%20of%20the%20function%0A%20%20%20%20params%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Dictionary%20of%20parameter%20information%0A%20%20%20%20return_info%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Dictionary%20of%20return%20information%0A%20%20%20%20main_doc%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Main%20docstring%20content%0A%20%20%20%20include_signature%3Abool%2C%20%20%23%20Whether%20to%20include%20the%20function%20signature%0A%20%20%20%20sig%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Function%20signature%20object%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Formatted%20string%20in%20NumPy%20style%0A%20%20%20%20%22Format%20in%20NumPy%20style%22%0A%20%20%20%20lines%20%3D%20%5B%5D%0A%0A%20%20%20%20if%20include_signature%3A%0A%20%20%20%20%20%20%20%20lines.append(f%22def%20%7Bfunc_name%7D%7Bsig%7D%3A%22)%0A%0A%20%20%20%20%23%20Main%20docstring%0A%20%20%20%20lines.append('%20%20%20%20%22%22%22'%20%2B%20(main_doc%20or%20%22%22))%0A%20%20%20%20lines.append(%22%22)%0A%0A%20%20%20%20%23%20Parameters%20section%0A%20%20%20%20if%20params%3A%0A%20%20%20%20%20%20%20%20lines.append(%22%20%20%20%20Parameters%22)%0A%20%20%20%20%20%20%20%20lines.append(%22%20%20%20%20----------%22)%0A%20%20%20%20%20%20%20%20for%20name%2C%20info%20in%20params.items()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20type_str%20%3D%20info%5B'anno'%5D.__name__%20if%20info%5B'anno'%5D%20!%3D%20empty%20and%20hasattr(info%5B'anno'%5D%2C%20'__name__')%20else%20%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bname%7D%20%3A%20%7Btype_str%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20desc%20%3D%20info.get('docment'%2C%20'')%20or%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20desc%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Handle%20multi-line%20descriptions%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20desc_line%20in%20desc.split('%5Cn')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%20%20%20%20%7Bdesc_line%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20info%5B'default'%5D%20!%3D%20empty%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%20%20%20%20(default%3A%20%7Brepr(info%5B'default'%5D)%7D)%22)%0A%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%0A%20%20%20%20%23%20Returns%20section%0A%20%20%20%20if%20return_info.get('anno')%20!%3D%20empty%20or%20return_info.get('docment')%3A%0A%20%20%20%20%20%20%20%20lines.append(%22%20%20%20%20Returns%22)%0A%20%20%20%20%20%20%20%20lines.append(%22%20%20%20%20-------%22)%0A%20%20%20%20%20%20%20%20ret_type%20%3D%20return_info.get('anno')%0A%20%20%20%20%20%20%20%20type_str%20%3D%20ret_type.__name__%20if%20ret_type%20!%3D%20empty%20and%20hasattr(ret_type%2C%20'__name__')%20else%20%22%22%0A%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Btype_str%7D%22)%0A%20%20%20%20%20%20%20%20ret_desc%20%3D%20return_info.get('docment'%2C%20'')%20or%20''%0A%20%20%20%20%20%20%20%20if%20ret_desc%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20desc_line%20in%20ret_desc.split('%5Cn')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%20%20%20%20%7Bdesc_line%7D%22)%0A%0A%20%20%20%20lines.append('%20%20%20%20%22%22%22')%0A%20%20%20%20return%20'%5Cn'.join(lines)%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20%23%20Convert%20to%20Google%20style%0A%20%20%20%20print(convert_docstyle(add%2C))%0A%20%20%20%20print(%22%5Cn%22%20%2B%20%22-%20%22*50%20%2B%20%22%5Cn%22)%0A%0A%20%20%20%20%23%20Convert%20to%20NumPy%20style%0A%20%20%20%20print(convert_docstyle(add%2C%20'numpy'))%0A%20%20%20%20print(%22%5Cn%22%20%2B%20%22-%20%22*50%20%2B%20%22%5Cn%22)%0A%0A%20%20%20%20%23%20Convert%20to%20docments%20style%0A%20%20%20%20print(convert_docstyle(add%2C%20'docments'))%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20def%20convert_library_docstyle(src_path%2C%20target_style%3D'google'%2C%20backup%3DTrue)%3A%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20Convert%20the%20documentation%20style%20of%20all%20functions%20in%20a%20library's%20src%2F%20directory%20to%20the%20target%20style.%0A%0A%20%20%20%20%20%20%20%20Args%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20src_path%3A%20Path%20to%20the%20src%2F%20directory.%0A%20%20%20%20%20%20%20%20%20%20%20%20target_style%3A%20The%20target%20documentation%20style%20('docments'%2C%20'google'%2C%20or%20'numpy').%0A%20%20%20%20%20%20%20%20%20%20%20%20backup%3A%20Whether%20to%20create%20backup%20files%20before%20modifying.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20import%20tomllib%0A%20%20%20%20%20%20%20%20src_path%20%3D%20os.path.abspath(src_path)%0A%20%20%20%20%20%20%20%20parent_path%20%3D%20os.path.dirname(src_path)%0A%20%20%20%20%20%20%20%20package_name%20%3D%20os.path.basename(src_path)%0A%0A%20%20%20%20%20%20%20%20%23%20Auto-detect%20if%20flat%20or%20nested%20based%20on%20pyproject.toml%0A%20%20%20%20%20%20%20%20flat%20%3D%20False%0A%20%20%20%20%20%20%20%20pyproject_path%20%3D%20os.path.join(parent_path%2C%20'pyproject.toml')%0A%20%20%20%20%20%20%20%20if%20os.path.exists(pyproject_path)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20with%20open(pyproject_path%2C%20'rb')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20config%20%3D%20tomllib.load(f)%0A%20%20%20%20%20%20%20%20%20%20%20%20actual_package_name%20%3D%20config.get('project'%2C%20%7B%7D).get('name'%2C%20'').replace('-'%2C%20'_')%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20actual_package_name%20and%20package_name%20!%3D%20actual_package_name%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20flat%20%3D%20True%0A%0A%20%20%20%20%20%20%20%20if%20flat%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20sys.path.insert(0%2C%20src_path)%0A%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20sys.path.insert(0%2C%20parent_path)%0A%0A%20%20%20%20%20%20%20%20for%20root%2C%20dirs%2C%20files%20in%20os.walk(src_path)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20file%20in%20files%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20file.endswith('.py')%20or%20file.startswith('__')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rel_path%20%3D%20os.path.relpath(root%2C%20src_path)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module_parts%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20flat%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module_parts.append(package_name)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20rel_path%20!%3D%20'.'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module_parts.extend(rel_path.split(os.sep))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module_parts.append(file%5B%3A-3%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module_str%20%3D%20'.'.join(module_parts)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module%20%3D%20importlib.import_module(module_str)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20except%20Exception%20as%20e%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print(f%22Failed%20to%20import%20%7Bmodule_str%7D%3A%20%7Be%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20funcs%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20name%20in%20dir(module)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20obj%20%3D%20getattr(module%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20inspect.isfunction(obj)%20and%20obj.__module__%20%3D%3D%20module.__name__%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_%2C%20lineno%20%3D%20inspect.getsourcelines(obj)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20funcs.append((obj%2C%20name%2C%20lineno))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20except%20Exception%20as%20e%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print(f%22Failed%20to%20get%20source%20lines%20for%20%7Bname%7D%20in%20%7Bmodule_str%7D%3A%20%7Be%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20funcs%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20file_path%20%3D%20os.path.join(root%2C%20file)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20backup%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shutil.copy(file_path%2C%20file_path%20%2B%20'.bak')%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20with%20open(file_path%2C%20'r')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20file_lines%20%3D%20f.readlines()%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Sort%20by%20lineno%20descending%20to%20process%20from%20bottom%20to%20top%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20funcs.sort(key%3Dlambda%20x%3A%20x%5B2%5D%2C%20reverse%3DTrue)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20obj%2C%20name%2C%20lineno%20in%20funcs%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func_source%20%3D%20inspect.getsource(obj)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tree%20%3D%20ast.parse(func_source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func_def%20%3D%20tree.body%5B0%5D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Handle%20decorators%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20decorators%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20dec%20in%20func_def.decorator_list%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dec_source%20%3D%20'%40'%20%2B%20ast.unparse(dec)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20decorators.append(dec_source)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Determine%20if%20async%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20is_async%20%3D%20isinstance(func_def%2C%20ast.AsyncFunctionDef)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Get%20converted%20header%20(without%20indent)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20new_header%20%3D%20convert_docstyle(obj%2C%20target_style%2C%20include_signature%3DTrue)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Adjust%20for%20async%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20is_async%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20new_header%20%3D%20new_header.replace('def%20'%2C%20'async%20def%20'%2C%201)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Get%20func%20indent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines%20%3D%20func_source.splitlines()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func_indent_str%20%3D%20lines%5B0%5D%5B%3Alen(lines%5B0%5D)%20-%20len(lines%5B0%5D.lstrip())%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func_indent%20%3D%20len(func_indent_str)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Indent%20decorators%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20indented_decorators%20%3D%20%5Bfunc_indent_str%20%2B%20d%20for%20d%20in%20decorators%5D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Indent%20new_header%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20indented_header_lines%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20line%20in%20new_header.splitlines()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20indented_header_lines.append(func_indent_str%20%2B%20line)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Combine%20decorators%20and%20header%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20full_header_lines%20%3D%20indented_decorators%20%2B%20indented_header_lines%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20full_header%20%3D%20'%5Cn'.join(full_header_lines)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Get%20body%20AST%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20body_start%20%3D%201%20if%20(len(func_def.body)%20%3E%200%20and%20isinstance(func_def.body%5B0%5D%2C%20ast.Expr)%20and%20isinstance(func_def.body%5B0%5D.value%2C%20ast.Constant)%20and%20isinstance(func_def.body%5B0%5D.value.value%2C%20str))%20else%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20body_ast%20%3D%20func_def.body%5Bbody_start%3A%5D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Unparse%20body%20with%20proper%20indent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20body_indent_str%20%3D%20func_indent_str%20%2B%20'%20%20%20%20'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20body_lines%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20node%20in%20body_ast%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20node_source%20%3D%20ast.unparse(node)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20line%20in%20node_source.splitlines()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20body_lines.append(body_indent_str%20%2B%20line)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20body_str%20%3D%20'%5Cn'.join(body_lines)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Full%20new%20source%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20new_func_source%20%3D%20full_header%20%2B%20'%5Cn'%20%2B%20body_str%20%2B%20'%5Cn'%20%20%23%20Add%20trailing%20newline%20for%20safety%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Replace%20in%20file_lines%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func_lines%2C%20_%20%3D%20inspect.getsourcelines(obj)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20start%20%3D%20lineno%20-%201%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%20%3D%20start%20%2B%20len(func_lines)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20replacement%20%3D%20%5Bl%20%2B%20'%5Cn'%20for%20l%20in%20new_func_source.splitlines()%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20file_lines%5Bstart%3Aend%5D%20%3D%20replacement%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20except%20Exception%20as%20e%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print(f%22Failed%20to%20convert%20%7Bname%7D%20in%20%7Bmodule_str%7D%3A%20%7Be%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Write%20back%20the%20file%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20with%20open(file_path%2C%20'w')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.writelines(file_lines)%0A%0A%20%20%20%20%23%20Test%20the%20function%20on%20src%2Fm_dev%0A%20%20%20%20print(%22%F0%9F%A7%AA%20Testing%20convert_library_docstyle%20on%20src%2F%22)%0A%20%20%20%20print(%22%3D%22%20*%2060)%0A%20%20%20%20convert_library_docstyle('src%2F'%2C%20target_style%3D'google'%2C%20backup%3DTrue)%0A%20%20%20%20print(%22%3D%22%20*%2060)%0A%20%20%20%20print(%22%E2%9C%85%20Conversion%20complete!%20Check%20src%20for%20updated%20files%22)%0A%20%20%20%20print(%22%F0%9F%92%BE%20Backup%20files%20saved%20with%20.bak%20extension%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20return%0A%0A%0A%40app.cell(column%3D1%2C%20hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Testing%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Build%20Package%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20build_package(%22.%2Fnotebooks%22%2C%20output_dir%3D%22src2%22%2C%20docstring_style%3D%22google%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20to%20add%20to%20pypi%20run%0A%0A%20%20%20%20%60%60%60%0A%20%20%20%20uv%20build%0A%20%20%20%20%60%60%60%0A%0A%20%20%20%20%23%20Test%20PyPi%0A%20%20%20%20%60%60%60%0A%20%20%20%20uv%20publish%20--publish-url%20https%3A%2F%2Ftest.pypi.org%2Flegacy%2F%20dist%2F*%0A%20%20%20%20%60%60%60%0A%0A%20%20%20%20%23%20Real%20PyPi%0A%20%20%20%20%60%60%60%0A%20%20%20%20uv%20publish%20--token%20pypi-...%20dist%2F*%0A%20%20%20%20%60%60%60%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20_todo_items%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Normalize%20and%20Restructure%20NBDev%20Deocs%20-%3E%20more%20standard%20documentation%22%2C%20%22status%22%3A%20True%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Extract%20README.md%20from%20notebook%22%2C%20%22status%22%3A%20True%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Integrate%20CLI%20for%20init%2C%20test%2C%20and%20mkdocs%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Static%20Docs%20Generation%20with%20no%20dependencies%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Better%20testing%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Better%20PyPI%20integration%22%2C%20%22status%22%3A%20False%7D%2C%0A%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Generate%20PyPI%20setup%20thing%20from%20marimo%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Enhance%20Pyproject.toml%20with%20repo.%20and%20other%20good%20info%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Multi%20notebook%20support%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22GitHub%20Actions%20Support%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Clean%20up%20os.path%20and%20Path%20-%20use%20Path%20throughout%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%5D%0A%0A%20%20%20%20todo_checklist%20%3D%20mo.md(f%22%22%22%0A%20%20%20%20%23%23%20%F0%9F%93%8B%20Package%20Development%20TODOs%0A%0A%20%20%20%20%7Bmo.vstack(%5B%0A%20%20%20%20%20%20%20%20mo.hstack(%5Bmo.ui.checkbox(value%3Dtodo%5B%22status%22%5D)%2C%20mo.md(f%22**%7Btodo%5B'item'%5D%7D**%22)%5D%2C%20align%3D%22center%22%2C%20justify%3D%22start%22)%20%0A%20%20%20%20%20%20%20%20for%20todo%20in%20_todo_items%0A%20%20%20%20%5D)%7D%0A%20%20%20%20%22%22%22)%0A%0A%20%20%20%20todo_checklist%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20return%0A%0A%0Aif%20__name__%20%3D%3D%20%22__main__%22%3A%0A%20%20%20%20app.run()%0A
</marimo-code>

<marimo-code-hash hidden="">95d0d9d3b2026596370a37fb4ce8486a</marimo-code-hash>
</body>
</html>
