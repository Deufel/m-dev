<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/gradient-yHQUC_QB.png" as="image" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/noise-60BoTA8O.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/Lora-VariableFont_wght-B2ootaw-.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/PTSans-Regular-CxL0S8W7.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/PTSans-Bold-D9fedIX3.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/FiraMono-Regular-BTCkDNvf.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/FiraMono-Medium-DU3aDxX5.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/FiraMono-Bold-CLVRCuM9.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/apple-touch-icon.png" />
    <link rel="manifest" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        var scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          // Guard against race condition where iframe isn't ready
          if (!obj.contentWindow?.document?.documentElement) {
            return;
          }
          var element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          var hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          var newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((entries) => {
          setHeight();
        });
        // Only observe if iframe content is ready
        if (obj.contentWindow?.document?.body) {
          resizeObserver.observe(obj.contentWindow.document.body);
        }
      }
    </script>
    <marimo-filename hidden>01_core.py</marimo-filename>
    <!-- TODO(Trevor): Legacy, required by VS Code plugin. Remove when plugin is updated (see marimo/server/_templates/template.py) -->
    <marimo-version data-version="{{ version }}" hidden></marimo-version>
    <marimo-user-config data-config="{{ user_config }}" hidden></marimo-user-config>
    <marimo-server-token data-token="{{ server_token }}" hidden></marimo-server-token>
    <!-- /TODO -->
    <title></title>
    <script type="module" crossorigin crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/index-DppOWifW.js"></script>
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/preload-helper-BpItL31i.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/chunk-DZLz74EQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/react-BcIddLXZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/jsx-runtime-DvsdsEjx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useEventListener-C5BS4xuN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/react-dom-D6bRRS5R.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/tslib.es6-sakIzgHM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/Combination-DR4iFoRS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/cn-C5VTNYKf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/menu-items-DOc2hwO2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/hotkeys-Lbk6RHir.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/button-nRVaalxL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-Cei_8ikW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/createLucideIcon-DA8ZBm4D.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/check-BUgsJwxM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/select-DJ0A_oCR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/accordion-BlX0p_kD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/chevron-right-WxQzIptp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dropdown-menu-1SGi7wHR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/tooltip-BQKXsEoT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_Uint8Array-D5Z9rM2X.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_getTag-CVRrQL_Q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_baseIsEqual-BF8660ot.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/jotai-DDOP7CKM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/invariant-DPGusy7Z.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/isArrayLikeObject-DKyJYtr8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/merge-BgA7kxZb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/zod-U2NFpcFA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/utils-DnJCRgaX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/requests-D3Z6okhb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/once-Co7xi2Ip.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/toDate-sQp07c5U.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_baseSlice-B27Cqkm6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_arrayMap-DQI2GUNb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/isSymbol-xTSywenE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/toString-CBnct2wx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_hasUnicode-CPHpt5EV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/upperFirst-DOlTOwhh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/capitalize-CkrfIDeS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/ai-model-dropdown-CtXN4x7s.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/badge-CFi0nvIx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/use-toast-BiL_AQz9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/constants-DIZnpo2K.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/Deferred-zIiWPYX3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/config-BjdJmdrN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/uuid-Dj56ryH_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/key-DWQdrH_J.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/connection-DnLUBy9M.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useLifecycle-CuZnZLRp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useNonce-DECX9FAH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useTheme-BMknLtnH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/capabilities-DdXtcIOa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/createReducer-80xvKyHq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-BPcMnGQn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-C13bkrcz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-pZAIwcZo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-Ba10OKR3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-D-CsU-_R.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-DBeOBCHw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-DZNGKufD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-ClBFnEcy.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-Q3T6mWQ0.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/stex-LEaAsvUb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_baseProperty-CIKnF2iY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/toNumber-CTOPJrpu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/now-B6JN1xKT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/debounce-70y9MzDK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/toInteger-Bor4StOs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/type-Cpth3na1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/marked.esm-DCf1d_lA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/main-CD7jouuS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/cells-B6jS0AIj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/kbd-CZFOBQmt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/renderShortcut-GP8-boTA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useEvent-d8iQXgui.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useDeleteCell-BSTJX7_O.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/icons-j8BJ30se.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useRunCells-uzADaSkg.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/alert-dialog-DM1h8RhU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dialog-CEqVOFHc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useDebounce-BDmbJDbT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/numbers-Hxwz5HuE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/context-BMtIGcq8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useNumberFormatter-DynX1ecE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/input-BPw9p_8N.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/ImperativeModal-CmOSTULR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/cell-link-D9FNaXGs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/spinner-FaMZ5NTl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/datasource-CzmVjgw7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/add-missing-import-BJfCTctT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/ansi_up-HmF1kpkv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/blob-COEMBEnt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dom-DaBOvHqM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/errors-5BnWGoql.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/extends-C-tvimwN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/objectWithoutPropertiesLoose-DDvr5cHq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/esm-ChGlv0th.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/es-Bvr8zSR1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/play-BOSd7i5f.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/sparkles-CyIU0Xy_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/shim-Bk8nzKPV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/add-cell-with-ai-DsqPH829.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/ErrorBoundary-7JQlouA1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/alert-CBA2m-3_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/links-DCKgyNFq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/state-CMOQfD_O.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/MarimoErrorOutput-okxire5Y.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/copy-DAqXDCGN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/copy-CWjpIcfl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/copy-icon-5DWltDxB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/mode-BdfAcJv1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/purify.es-D83HMRRD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/RenderHTML-CUSvJfTV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/emotion-is-prop-valid.esm-BgfwcIY_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/with-selector-B_mpCvmo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/delay-mount-BvJt70jv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_arrayReduce-DDpPg0Qh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/startCase-DOk4LYuA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/strings-DSmr2a_p.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/command-BqJiTpIC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/popover-BM0PuIZH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/table-mB7CFPse.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/tabs-CwHEUPW2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useAsyncData-CsBCDF11.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useIframeCapabilities-w06PAeNM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/error-banner-RIuTelB8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/defaultLocale-DEOAvdte.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/precisionRound-BIK1W-Pu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/defaultLocale-Ca1Ci3kv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/vega-loader.browser.module-B-icPEAc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/loader-g7OmFu5O.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/formats-Q84dqqph.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/en-US-CUvYxyLA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/isValid-BcG0nMKW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dates-CSR6KU2P.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/download-C6eeMKzw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/maps-C9sj23qe.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useDateFormatter-B6Y_k710.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/range-CPekNdzi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/list-filter-pQvV7yyl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/columns-BnRpK2Sj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/focus-NSCHuycv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useInstallPackage-RVnGhNcD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/column-preview-ChwjCH-u.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useAddCell-BcZiZJfL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/toggle-JGbyXN73.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useHotkey-BxEtU0rE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/globals-CqGdf2Mu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/share-H7Fnb7dX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/dist-CIi_Q6L4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/memoize-CAcr7Wct.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_toKey-Di_xoXjD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_baseSet-BlAtwuhp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/utilities.esm-BkSvpyq-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/floating-outline-CUjFOfng.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/eye-off-Dyzb-Ibf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/plus-CmzxQYgQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/readonly-python-code-CViHfG5I.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/file-video-camera-DxgiJa0r.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/file-text-Cng4_CT2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/file-CEq0dl8f.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/types-BT_Kor11.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/label-6DIjJ2sP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/form-b4A0F_Lr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/textarea-CuEW04Ze.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/circle-x-DGA84U3r.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/refresh-ccw-q_wAM7pz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/trash-2-DtsdG6Pf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/form-CDF8FirJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/field-XT1d7zKu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/switch-CEMEIJww.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useBoolean-B-LYLCcg.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/useDeepCompareMemoize-sbXO3Z1K.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/LazyAnyLanguageCodeMirror-PGusm5pp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/types-DZTeU1k8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/prop-types-BdSU55sL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/es-xBjOufca.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/VisuallyHidden-DioJ3bf_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_baseFlatten-8yEsQJi9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/get-BYzWDFJH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/hasIn-WaG0qjy7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/_basePickBy-W59-WIft.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/pick-Ck1LTYI3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/square-CF_LAdAS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/chart-no-axes-column-CQryi5Zm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/download-B7wrfIWv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/globe-BwmpFahE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/send-BWOx6HDI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/refresh-cw-9lSVG80g.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/settings-BR_jkuLF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/square-function-DVIoLDaU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/bundle.esm-DY-5mqxG.js">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/cells-BvrC6Bsv.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/columns-j3zW187k.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.17.2/dist/assets/index-B8ySTPp_.css">
  
<script data-marimo="true">
    window.__MARIMO_STATIC__ = {};
    window.__MARIMO_STATIC__.files = {};
</script>
</head>
  <body>
    <div id="root"></div>
    <!-- This is a portal for the data editor to render in -->
    <div id="portal" data-testid="glide-portal" style="position: fixed; left: 0; top: 0; z-index: 9999"></div>
    <script data-marimo="true">
      window.__MARIMO_MOUNT_CONFIG__ = {
            "filename": "01_core.py",
            "mode": "read",
            "version": "0.17.2",
            "serverToken": "static",
            "config": {"ai": {"models": {"custom_models": [], "displayed_models": []}}, "completion": {"activate_on_typing": true, "copilot": false}, "diagnostics": {"sql_linter": true}, "display": {"cell_output": "above", "code_editor_font_size": 14, "dataframes": "rich", "default_table_max_columns": 50, "default_table_page_size": 10, "default_width": "full", "reference_highlighting": false, "theme": "system"}, "formatting": {"line_length": 79}, "keymap": {"overrides": {}, "preset": "default"}, "language_servers": {"pylsp": {"enable_flake8": false, "enable_mypy": true, "enable_pydocstyle": false, "enable_pyflakes": false, "enable_pylint": false, "enable_ruff": true, "enabled": false}}, "mcp": {"mcpServers": {}, "presets": []}, "package_management": {"manager": "uv"}, "runtime": {"auto_instantiate": false, "auto_reload": "off", "default_sql_output": "auto", "on_cell_change": "autorun", "output_max_bytes": 8000000, "reactive_tests": true, "std_stream_max_bytes": 1000000, "watcher_on_save": "lazy"}, "save": {"autosave": "after_delay", "autosave_delay": 1000, "format_on_save": false}, "server": {"browser": "default", "follow_symlink": false}, "snippets": {"custom_paths": [], "include_default_snippets": true}},
            "configOverrides": {},
            "appConfig": {"app_title": "", "auto_download": ["html"], "sql_output": "auto", "width": "columns"},
            "view": {"showAppCode": true},
            "notebook": {"cells": [{"code": "import re\nimport ast\nimport tomllib\nimport copy\nimport os\nimport tempfile\nimport shutil\nimport inspect\nimport sys\nimport importlib\nimport io\nimport zipfile\n\nfrom tokenize import tokenize, COMMENT\nfrom pathlib import Path\nfrom textwrap import dedent, indent\nfrom typing import Callable, Literal, Dict, Any, Tuple, TypedDict, List, Optional\n\nfrom textwrap import dedent\n\nfrom mistletoe import markdown\n\nimport numpy as np\n\nfrom fastcore.docments import docments, docstring, empty", "code_hash": "735f08cfd8819b2e3c530aeaf80d15cf", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "setup", "name": "setup"}, {"code": "mo.md(r\"\"\"## Development Packages\"\"\")", "code_hash": "2e2072a45e51ece6702f3fb686466459", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Hbol", "name": "_"}, {"code": "import marimo as mo\nimport pytest\nfrom sklearn.model_selection import train_test_split #allows us to test imports", "code_hash": "913b863a99190032070367acb7f1475c", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "MJUe", "name": "_"}, {"code": "mo.md(r\"\"\"## Utilities\"\"\")", "code_hash": "bab72832b3cc74e8da4b8fa4b57d056a", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "vblA", "name": "_"}, {"code": "class ModuleInfo(TypedDict):\n    name: str           # module name (without .py)\n    imports: List[str]  # import statements (assuming strings; adjust if needed)\n    exports: List[str]  # formatted source code (assuming strings)\n    export_names: List[str]", "code_hash": "313d74ebf086eab9633f8328fc4bffe9", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "bkHC", "name": "*ModuleInfo"}, {"code": "class ScanResult(TypedDict):\n    metadata: Optional[dict]  # or a more specific type if known\n    readme_source: Optional[str]  # notebook path or None\n    modules: List[ModuleInfo]", "code_hash": "9ae7355a7e564a9e4415009a24137f0f", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "lEQa", "name": "*ScanResult"}, {"code": "def is_marimo_export_decorator(\n    decorator # the decorator that marimo attached to the cell\n) -\u003E bool:    # True if the function or cell is reusable - should match marimos detection\n    \"Check if decorator is app.function or app.class_definition (with or without args)\"\n    # If it's a call like @app.function(hide_code=True), check the func part\n    if isinstance(decorator, ast.Call):\n        decorator_name = ast.unparse(decorator.func)\n    else:\n        # Simple decorator like @app.function\n        decorator_name = ast.unparse(decorator)\n\n    return decorator_name in ['app.function', 'app.class_definition']", "code_hash": "3e60bdb851fff8e16a959bcf67c7b268", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "PKri", "name": "*is_marimo_export_decorator"}, {"code": "mo.md(r\"\"\"## Validation\"\"\")", "code_hash": "c1f80b168bf137f22880c69346ac8cf2", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Xref", "name": "_"}, {"code": "def validate_setup_metadata(\n    setup_metadata: dict  # Package metadata from setup cell\n) -\u003E None:                # Raises ValueError if invalid\n    \"\"\"Validate that required metadata keys exist and have valid values for package generation\"\"\"\n\n    required = ['__version__', '__description__', '__author__', '__license__']\n    missing = [k for k in required if k not in setup_metadata]\n\n    if missing:\n        raise ValueError(\n            f\"Setup cell missing required metadata: {', '.join(missing)}\\n\\n\"\n            f\"Add these to your setup cell:\\n\" + \n            '\\n'.join([f\"    {k} = '...'\" for k in missing])\n        )\n\n    # Validate version\n    version = setup_metadata['__version__']\n    if not version or not version.strip():\n        raise ValueError(\"__version__ cannot be empty\")\n\n    # Validate description\n    desc = setup_metadata['__description__']\n    if not desc or not desc.strip():\n        raise ValueError(\"__description__ cannot be empty\")\n\n    # Validate author format\n    author = setup_metadata['__author__']\n    if not author or not author.strip():\n        raise ValueError(\"__author__ cannot be empty\")\n    if '\u003C' not in author or '\u003E' not in author:\n        raise ValueError(\"__author__ must be in format 'Name \u003Cemail@example.com\u003E'\")\n\n    email_part = author.split('\u003C')[1].split('\u003E')[0].strip()\n    if not email_part or '@' not in email_part:\n        raise ValueError(f\"__author__ email '{email_part}' is not valid\")\n\n    # Validate license\n    license_val = setup_metadata['__license__']\n    if not license_val or not license_val.strip():\n        raise ValueError(\"__license__ cannot be empty\")", "code_hash": "d94687028d19223d54cfe8073ac9f455", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "SFPL", "name": "*validate_setup_metadata"}, {"code": "mo.md(r\"\"\"## Scan /notebooks Directory\"\"\")", "code_hash": "f9efc9e8656bc5587022a099b4bd5939", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "BYtC", "name": "_"}, {"code": "def scan_notebooks(\n    notebooks_dir: str = 'notebooks', # Directory containing notebook files\n    docstring_style: str = 'nbdev'    # Docstring style for all exports\n) -\u003E ScanResult:                      # A typed dict with the described structure.\n    \"Scan notebooks directory and extract all exports, metadata, and README\"\n\n    notebooks_path = Path(notebooks_dir)\n\n    if not notebooks_path.exists():\n        raise ValueError(f\"Notebooks directory '{notebooks_dir}' does not exist\")\n\n    # Get all .py files, sorted\n    notebook_files = sorted(notebooks_path.glob('*.py'))\n\n    if not notebook_files:\n        raise ValueError(f\"No .py files found in '{notebooks_dir}'\")\n\n    metadata = None\n    metadata_found_in = None\n    readme_found_in = None\n    modules = []\n\n    for notebook_file in notebook_files:\n        # Skip __pycache__ and hidden files\n        if notebook_file.name.startswith('.') or notebook_file.name == '__pycache__':\n            continue\n\n        # Extract from this notebook\n        nb_metadata, setup_imports, exports, export_names = extract_exports(\n            str(notebook_file), \n            docstring_style\n        )\n\n        # Check for metadata (should only be in one file)\n        if nb_metadata:\n            if metadata_found_in:\n                raise ValueError(\n                    f\"Project metadata defined in multiple notebooks:\\n\"\n                    f\"  - {metadata_found_in}\\n\"\n                    f\"  - {notebook_file.name}\\n\"\n                    f\"Metadata should only be defined in one notebook (typically 00_config.py)\"\n                )\n            metadata = nb_metadata\n            metadata_found_in = notebook_file.name\n\n        # Check for README\n        if has_readme_cell(str(notebook_file)):\n            if readme_found_in:\n                raise ValueError(\n                    f\"README defined in multiple notebooks:\\n\"\n                    f\"  - {readme_found_in}\\n\"\n                    f\"  - {notebook_file.name}\\n\"\n                    f\"README should only be defined in one notebook\"\n                )\n            readme_found_in = str(notebook_file)\n\n        # Store module info (even if no exports, we track the imports)\n        module_name = notebook_file.stem  # filename without .py\n        modules.append({\n            'name': module_name,\n            'imports': setup_imports,\n            'exports': exports,\n            'export_names': export_names\n        })\n\n    # Validate we found required metadata\n    if not metadata:\n        raise ValueError(\n            f\"No project metadata found in any notebook.\\n\"\n            f\"Add metadata to your config notebook (e.g., 00_config.py) in the setup cell:\\n\"\n            f\"    __version__ = '0.1.0'\\n\"\n            f\"    __description__ = 'My package'\\n\"\n            f\"    __author__ = 'Name \u003Cemail@example.com\u003E'\\n\"\n            f\"    __license__ = 'MIT'\"\n        )\n\n    return {\n        'metadata': metadata,\n        'readme_source': readme_found_in,\n        'modules': modules\n    }", "code_hash": "56664a414063bdcecc0e8c555e238053", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "RGSE", "name": "*scan_notebooks"}, {"code": "def has_readme_cell(\n    notebook_path: str    # Dir with notebook files\n) -\u003E bool:                # truthy iff readme\n    \"\"\"Check if notebook contains a #| README cell at start of mo.md() content\"\"\"\n    source_code = Path(notebook_path).read_text()\n\n    # Extract mo.md() content\n    content = extract_mo_md_content(source_code)\n    if not content:\n        return False\n\n    # Check if #| README is on first non-empty line\n    lines = content.strip().split('\\n')\n    if lines and lines[0].strip() == '#| README':\n        return True\n\n    return False", "code_hash": "87eb6e2c609e8fe431d5728a6354e0a6", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Kclp", "name": "*has_readme_cell"}, {"code": "mo.md(r\"\"\"## Extraction\"\"\")", "code_hash": "46a5a54695ebe7206884441297cc4359", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "emfo", "name": "_"}, {"code": "def extract_exports(\n    notebook_path: str,             # Path to marimo notebook file\n    docstring_style: str = 'nbdev'  # Target docstring format: 'google', 'numpy', or 'nbdev'\n) -\u003E tuple:                         # (setup_metadata, setup_imports, exports, export_names)\n    \"Extract metadata, imports, and exportable functions/classes from marimo notebook\"\n\n    source_code = Path(notebook_path).read_text()\n    tree = ast.parse(source_code)\n\n    setup_metadata = {}\n    setup_imports = []\n    exports = []\n    export_names = []\n\n    for node in tree.body:\n        # Extract setup cell content\n        if isinstance(node, ast.With):\n            for stmt in node.body:\n                if isinstance(stmt, ast.Assign):\n                    setup_metadata[stmt.targets[0].id] = ast.literal_eval(stmt.value)\n                elif isinstance(stmt, (ast.Import, ast.ImportFrom)):\n                    setup_imports.append(ast.unparse(stmt))\n\n        # Extract exportable functions/classes\n        elif isinstance(node, (ast.FunctionDef, ast.ClassDef)):\n            if any(is_marimo_export_decorator(d) for d in node.decorator_list):\n                if node.name.startswith('test_'):\n                    continue\n\n                # Get original source\n                original_source = ast.get_source_segment(source_code, node)\n\n                # Remove marimo decorators\n                lines = original_source.split('\\n')\n                filtered_lines = []\n                for line in lines:\n                    stripped = line.strip()\n                    if not (stripped.startswith('@app.function') or \n                           stripped.startswith('@app.class_definition')):\n                        filtered_lines.append(line)\n\n                clean_source = '\\n'.join(filtered_lines)\n\n                # Reformat if needed\n                if docstring_style != 'nbdev':\n                    try:\n                        docs = extract_param_docs_from_ast(clean_source)\n                        formatted_source = build_formatted_docstring(\n                            clean_source, docs, docstring_style\n                        )\n                        exports.append(formatted_source)\n                    except Exception as e:\n                        print(f\"\u26a0\ufe0f  Could not reformat {node.name}: {e}\")\n                        exports.append(clean_source)\n                else:\n                    exports.append(clean_source)\n\n                export_names.append(node.name)\n\n    return (setup_metadata, setup_imports, exports, export_names)", "code_hash": "4969c2fede0db613631b313750466918", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Hstk", "name": "*extract_exports"}, {"code": "def extract_param_docs_from_ast(\n    func_source: str  # Function source code as string\n) -\u003E dict:            # Dict mapping param names to {'anno': type, 'docment': comment}\n    \"Extract parameter docs using AST + tokenizer, no exec needed\"\n\n    # Parse AST to get parameter info\n    tree = ast.parse(func_source)\n    func_node = tree.body[0]\n\n    # Get parameter line numbers and names from AST\n    param_locs = {}\n    for arg in func_node.args.args:\n        param_locs[arg.lineno] = {\n            'name': arg.arg,\n            'anno': ast.unparse(arg.annotation) if arg.annotation else None\n        }\n\n    # Add *args if present\n    if func_node.args.vararg:\n        param_locs[func_node.args.vararg.lineno] = {\n            'name': func_node.args.vararg.arg,\n            'anno': None\n        }\n\n    # Add keyword-only args\n    for arg in func_node.args.kwonlyargs:\n        param_locs[arg.lineno] = {\n            'name': arg.arg,\n            'anno': ast.unparse(arg.annotation) if arg.annotation else None\n        }\n\n    # Add **kwargs if present\n    if func_node.args.kwarg:\n        param_locs[func_node.args.kwarg.lineno] = {\n            'name': func_node.args.kwarg.arg,\n            'anno': None\n        }\n\n    # Add return annotation\n    if func_node.returns:\n        param_locs[func_node.returns.lineno] = {\n            'name': 'return',\n            'anno': ast.unparse(func_node.returns)\n        }\n\n    # Tokenize to get comments\n    tokens = tokenize(io.BytesIO(func_source.encode('utf-8')).readline)\n    clean_re = re.compile(r'^\\s*#(.*)\\s*$')\n    comments = {}\n    for token in tokens:\n        if token.type == COMMENT:\n            match = clean_re.findall(token.string)\n            if match:\n                comments[token.start[0]] = match[0].strip()\n\n    # Match comments to parameters\n    result = {}\n    for line, param_info in param_locs.items():\n        name = param_info['name']\n        comment = comments.get(line, '')\n        result[name] = {\n            'anno': param_info['anno'],\n            'docment': comment\n        }\n\n    return result", "code_hash": "5d2bfda0ac6ceb12d240d2c57c79aa03", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "nWHF", "name": "*extract_param_docs_from_ast"}, {"code": "def build_formatted_docstring(\n    func_source: str,       # Original function source code\n    docs: dict,             # Parameter docs from extract_param_docs_from_ast\n    target_style: str       # 'google' or 'numpy'\n) -\u003E str:                   # Function source with reformatted docstring\n    \"Build formatted docstring from docs dict\"\n\n    tree = ast.parse(func_source)\n    func_node = tree.body[0]\n    existing_doc = ast.get_docstring(func_node) or \"\"\n\n    lines = [existing_doc.strip()] if existing_doc else []\n\n    if target_style == 'google':\n        params = {k: v for k, v in docs.items() if k != 'return' and v.get('docment')}\n        if params:\n            lines.append(\"\")\n            lines.append(\"Args:\")\n            for name, info in params.items():\n                anno = info.get('anno', '')\n                doc = info.get('docment', '')\n                if anno:\n                    lines.append(f\"    {name} ({anno}): {doc}\")\n                else:\n                    lines.append(f\"    {name}: {doc}\")\n\n        ret = docs.get('return')\n        if ret and ret.get('docment'):\n            lines.append(\"\")\n            lines.append(\"Returns:\")\n            ret_anno = ret.get('anno', '')\n            ret_doc = ret.get('docment', '')\n            if ret_anno:\n                lines.append(f\"    {ret_anno}: {ret_doc}\")\n            else:\n                lines.append(f\"    {ret_doc}\")\n\n    elif target_style == 'numpy':\n        params = {k: v for k, v in docs.items() if k != 'return' and v.get('docment')}\n        if params:\n            lines.append(\"\")\n            lines.append(\"Parameters\")\n            lines.append(\"----------\")\n            for name, info in params.items():\n                anno = info.get('anno', '')\n                doc = info.get('docment', '')\n                if anno:\n                    lines.append(f\"{name} : {anno}\")\n                else:\n                    lines.append(f\"{name}\")\n                if doc:\n                    lines.append(f\"    {doc}\")\n\n        ret = docs.get('return')\n        if ret and ret.get('docment'):\n            lines.append(\"\")\n            lines.append(\"Returns\")\n            lines.append(\"-------\")\n            ret_anno = ret.get('anno', '')\n            ret_doc = ret.get('docment', '')\n            if ret_anno:\n                lines.append(f\"{ret_anno}\")\n            if ret_doc:\n                lines.append(f\"    {ret_doc}\")\n\n    new_docstring = '\\n'.join(lines)\n\n    # Replace docstring in AST\n    for node in ast.walk(tree):\n        if isinstance(node, (ast.FunctionDef, ast.AsyncFunctionDef)):\n            if (node.body and isinstance(node.body[0], ast.Expr) \n                and isinstance(node.body[0].value, ast.Constant)):\n                node.body[0].value.value = new_docstring\n            else:\n                doc_node = ast.Expr(value=ast.Constant(value=new_docstring))\n                node.body.insert(0, doc_node)\n            break\n\n    return ast.unparse(tree)", "code_hash": "2e6c9075eec80fa55d13c71f04370492", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "iLit", "name": "*build_formatted_docstring"}, {"code": "mo.md(r\"\"\"## Write Files\"\"\")", "code_hash": "a2d5a995878c531f9c5626ba88966ee4", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "ZHCJ", "name": "_"}, {"code": "def update_pyproject_toml(\n    setup_metadata: dict,      # Package metadata from setup cell\n    pyproject_path: str = \"pyproject.toml\"  # Path to pyproject.toml\n) -\u003E str:                      # Path to updated file\n    \"Update pyproject.toml with metadata from notebook setup cell\"\n\n    # Validate metadata first\n    validate_setup_metadata(setup_metadata)\n\n    # Read existing pyproject.toml\n    with open(pyproject_path, 'rb') as f:\n        config = tomllib.load(f)\n\n    # Update [project] section with required fields\n    if 'project' not in config:\n        config['project'] = {}\n\n    config['project']['version'] = setup_metadata['__version__']\n    config['project']['description'] = setup_metadata['__description__']\n    config['project']['license'] = {'text': setup_metadata['__license__']}\n\n    # Parse author\n    author_name = setup_metadata['__author__'].split('\u003C')[0].strip()\n    author_email = setup_metadata['__author__'].split('\u003C')[1].strip('\u003E')\n    config['project']['authors'] = [{'name': author_name, 'email': author_email}]\n\n    # Add optional fields if present\n    if '__keywords__' in setup_metadata and setup_metadata['__keywords__']:\n        config['project']['keywords'] = setup_metadata['__keywords__']\n\n    if '__classifiers__' in setup_metadata and setup_metadata['__classifiers__']:\n        config['project']['classifiers'] = setup_metadata['__classifiers__']\n\n    # Add project URLs if present\n    if any(k in setup_metadata for k in ['__repository__', '__homepage__', '__documentation__']):\n        config['project']['urls'] = {}\n        if '__repository__' in setup_metadata:\n            config['project']['urls']['Repository'] = setup_metadata['__repository__']\n        if '__homepage__' in setup_metadata:\n            config['project']['urls']['Homepage'] = setup_metadata['__homepage__']\n        if '__documentation__' in setup_metadata:\n            config['project']['urls']['Documentation'] = setup_metadata['__documentation__']\n\n    # Write back using tomlkit to preserve formatting\n    try:\n        import tomlkit\n        with open(pyproject_path, 'r') as f:\n            doc = tomlkit.load(f)\n\n        # Update with new values\n        if 'project' not in doc:\n            doc['project'] = {}\n\n        doc['project']['version'] = setup_metadata['__version__']\n        doc['project']['description'] = setup_metadata['__description__']\n        doc['project']['license'] = {'text': setup_metadata['__license__']}\n        doc['project']['authors'] = [{'name': author_name, 'email': author_email}]\n\n        if '__keywords__' in setup_metadata and setup_metadata['__keywords__']:\n            doc['project']['keywords'] = setup_metadata['__keywords__']\n\n        if '__classifiers__' in setup_metadata and setup_metadata['__classifiers__']:\n            doc['project']['classifiers'] = setup_metadata['__classifiers__']\n\n        if any(k in setup_metadata for k in ['__repository__', '__homepage__', '__documentation__']):\n            if 'urls' not in doc['project']:\n                doc['project']['urls'] = {}\n            if '__repository__' in setup_metadata:\n                doc['project']['urls']['Repository'] = setup_metadata['__repository__']\n            if '__homepage__' in setup_metadata:\n                doc['project']['urls']['Homepage'] = setup_metadata['__homepage__']\n            if '__documentation__' in setup_metadata:\n                doc['project']['urls']['Documentation'] = setup_metadata['__documentation__']\n\n        with open(pyproject_path, 'w') as f:\n            tomlkit.dump(doc, f)\n\n    except ImportError:\n        # Fallback if tomlkit not available - just append to file\n        print(\"\u26a0\ufe0f  tomlkit not available, using basic TOML writing\")\n        import json\n        # This is a simple fallback - you might want to use tomli-w instead\n        with open(pyproject_path, 'a') as f:\n            f.write(f\"\\n# Updated by m-dev\\n\")\n\n    print(f\"\u2705 Updated {pyproject_path} with metadata\")\n    return pyproject_path", "code_hash": "7170e9fb255fff7fece6eb08bde3d474", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "ROlb", "name": "*update_pyproject_toml"}, {"code": "def write_module(\n    module_name: str,        # Name of the module (without .py)\n    setup_imports: list,     # Import statements from setup cell\n    exports: list,           # Exported function/class source code\n    output_file: str         # Path for output file\n) -\u003E str:                    # Path to written file\n    \"Write Python module file with imports and exported code\"\n    with Path(output_file).open('w') as f:\n        # Write imports\n        if setup_imports:\n            for imp in setup_imports:\n                f.write(imp + '\\n')\n            f.write('\\n')\n\n        # Write exports\n        for export in exports:\n            f.write(export + '\\n\\n')\n\n    return output_file", "code_hash": "fc31fadd178ddf677e60189c38ecb739", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "qnkX", "name": "*write_module"}, {"code": "def write_init(\n    package_name: str,       # Package name\n    metadata: dict,          # Project metadata from setup cell\n    modules: list,           # List of module dicts from scan_notebooks\n    output_file: str         # Path to __init__.py\n) -\u003E str:                    # Path to written file\n    \"Write package __init__.py with metadata and cross-module imports \"\n\n    with Path(output_file).open('w') as f:\n        # Write package docstring\n        description = metadata.get('__description__', 'No description provided')\n        f.write(f'\"\"\"{description}\"\"\"\\n\\n')\n\n        # Write metadata\n        f.write(f\"__version__ = '{metadata['__version__']}'\\n\")\n\n        if '__author__' in metadata:\n            author_name = metadata['__author__'].split('\u003C')[0].strip()\n            f.write(f\"__author__ = '{author_name}'\\n\")\n\n        f.write('\\n')\n\n        # Collect all export names across modules\n        all_exports = []\n\n        # Write imports from submodules\n        for module in modules:\n            # Skip the config module (00_config or similar) - no exports usually\n            if module['name'].startswith('00_') or not module['export_names']:\n                continue\n\n            if module['export_names']:\n                exports_str = ', '.join(module['export_names'])\n                f.write(f\"from .{module['name']} import {exports_str}\\n\")\n                all_exports.extend(module['export_names'])\n\n        # Write __all__\n        if all_exports:\n            f.write('\\n')\n            f.write('__all__ = [\\n')\n            for name in all_exports:\n                f.write(f'    \"{name}\",\\n')\n            f.write(']\\n')\n\n    print(f\"\u2705 Generated {output_file}\")\n    return output_file", "code_hash": "ab796042a130026fa75677fc1a01e9cd", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "TqIu", "name": "*write_init"}, {"code": "mo.md(r\"\"\"## Readme Extraction\"\"\")", "code_hash": "dd12d2d87bf85b91c5b05e7affe2273c", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Vxnm", "name": "_"}, {"code": "def extract_readme(\n    notebook_path: str,      # Path to the marimo notebook file\n    output_dir: str,         # Directory where README.md will be written\n    setup_metadata: dict     # Setup cell metadata for f-string substitution\n) -\u003E str:                    # Path to written README.md file, or empty string if no readme cell found\n    \"Extract README from notebook cell marked with #| readme and write to output directory\"\n\n    source_code = Path(notebook_path).read_text()\n\n    tree = ast.parse(source_code)\n    readme_contents = []\n\n    # Check both regular cells (FunctionDef) and setup cells (With blocks)\n    for node in tree.body:\n        # Check @app.cell decorated functions (hidden or not)\n        if isinstance(node, ast.FunctionDef):\n            func_source = ast.get_source_segment(source_code, node)\n            if func_source and 'mo.md(' in func_source and '#| README' in func_source:\n                # Extract the string content from mo.md(...)\n                content = extract_mo_md_content(func_source)\n                if content and '#| README' in content:\n                    lines = content.split('\\n')\n                    readme_text = '\\n'.join(line for line in lines if not line.strip().startswith('#| README'))\n                    readme_contents.append(readme_text.strip())\n\n        # Check setup cell (with app.setup:)\n        elif isinstance(node, ast.With):\n            for stmt in node.body:\n                if isinstance(stmt, ast.Expr):\n                    stmt_source = ast.get_source_segment(source_code, stmt)\n                    if stmt_source and 'mo.md(' in stmt_source and '#| README' in stmt_source:\n                        content = extract_mo_md_content(stmt_source)\n                        if content and '#| README' in content:\n                            lines = content.split('\\n')\n                            readme_text = '\\n'.join(line for line in lines if not line.strip().startswith('#| README'))\n                            readme_contents.append(readme_text.strip())\n\n    if len(readme_contents) == 0:\n        print('\u26a0\ufe0f  Warning: No #| README cell found. README.md will not be generated.')\n        print('   For PyPI distribution, consider adding a cell with mo.md() containing #| README')\n        return ''\n\n    if len(readme_contents) \u003E 1:\n        print(f'\u26a0\ufe0f  Warning: Found {len(readme_contents)} cells with #| README marker. Using only the first one.')\n\n    # Substitute f-string variables from setup_metadata\n    readme_text = readme_contents[0]\n    for key, value in setup_metadata.items():\n        readme_text = readme_text.replace(f'{{{key}}}', str(value))\n\n    readme_path = Path(output_dir) / 'README.md'\n    readme_path.write_text(readme_text)\n\n    print(f'\u2705 README.md generated from notebook')\n    return str(readme_path)", "code_hash": "d56d6502f89ae4f89c718d708364e617", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "DnEU", "name": "*extract_readme"}, {"code": "def extract_mo_md_content(source: str) -\u003E str:\n    \"Extract the string content from a mo.md() call, handling r/f/rf string prefixes\"\n    # Find mo.md( and extract everything between the opening and closing quotes\n    import re\n    # Match mo.md with optional whitespace, then capture string with various prefixes\n    pattern = r'mo\\.md\\s*\\(\\s*[rf]*\"\"\"(.*?)\"\"\"|mo\\.md\\s*\\(\\s*[rf]*\\'\\'\\'(.*?)\\'\\'\\'|mo\\.md\\s*\\(\\s*[rf]*\"(.*?)\"|mo\\.md\\s*\\(\\s*[rf]*\\'(.*?)\\''\n    match = re.search(pattern, source, re.DOTALL)\n    if match:\n        # Return whichever group matched (triple quotes or single quotes)\n        for i in range(1, len(match.groups()) + 1):\n            if match.group(i) is not None:\n                return match.group(i)\n    return ''", "code_hash": "b48d73c2f0aaba523323ed05e96797e4", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "ulZA", "name": "*extract_mo_md_content"}, {"code": "mo.md(r\"\"\"## Build Package\"\"\")", "code_hash": "542ab5538d7c64dbc00040c1fe78aaa7", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "ecfG", "name": "_"}, {"code": "def build_package(\n    notebooks_dir: str = 'notebooks',     # Directory with notebook files\n    output_dir: str = 'src',              # Output directory for package\n    docstring_style: str = 'nbdev'        # Docstring format\n) -\u003E str:                                 # Path to built package\n    \"Build a Python package from marimo notebook(s)\"\n\n    print(f\"\ud83d\udd0d Scanning notebooks in {notebooks_dir}/\")\n\n    # Scan all notebooks\n    scan_result = scan_notebooks(notebooks_dir, docstring_style)\n    metadata = scan_result['metadata']\n    readme_source = scan_result['readme_source']\n    modules = scan_result['modules']\n\n    # Get package name from metadata or pyproject.toml\n    package_name = metadata.get('__package_name__')\n    if not package_name:\n        # Try to read from existing pyproject.toml\n        try:\n            import tomllib\n            with open('pyproject.toml', 'rb') as f:\n                config = tomllib.load(f)\n                package_name = config['project']['name']\n        except:\n            raise ValueError(\"No __package_name__ in metadata and no pyproject.toml found\")\n\n    package_name = package_name.replace('-', '_')  # Convert to valid Python identifier\n\n    print(f\"\ud83d\udce6 Building package: {package_name}\")\n\n    # Create output directory structure\n    package_dir = Path(output_dir) / package_name\n    package_dir.mkdir(parents=True, exist_ok=True)\n\n    # Write individual module files\n    for module in modules:\n        # Skip config files (no exports typically)\n        if module['name'].startswith('00_'):\n            continue\n\n        if module['exports']:  # Only write if there are exports\n            module_file = package_dir / f\"{module['name']}.py\"\n            write_module(\n                module['name'],\n                module['imports'],\n                module['exports'],\n                str(module_file)\n            )\n            print(f\"  \u2705 {module['name']}.py\")\n\n    # Write __init__.py\n    init_file = package_dir / '__init__.py'\n    write_init(package_name, metadata, modules, str(init_file))\n\n    # Update pyproject.toml with metadata\n    if Path('pyproject.toml').exists():\n        update_pyproject_toml(metadata, 'pyproject.toml')\n    else:\n        print(\"\u26a0\ufe0f  No pyproject.toml found. Run 'uv init' first.\")\n\n    # Extract README if present\n    if readme_source:\n        extract_readme(readme_source, '.', metadata)\n\n    print(f\"\\n\u2705 Package built in {output_dir}/{package_name}/\")\n    return str(output_dir)", "code_hash": "79a8d786a4c40f5d462b73b7bc109e48", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Pvdt", "name": "*build_package"}, {"code": "mo.md(r\"\"\"## Documentation Converter\"\"\")", "code_hash": "397cbe06619487ac0727a252fcc7f220", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "ZBYS", "name": "_"}, {"code": "def add(\n    # The first operand\n    a:int,\n    # This is the second of the operands to the *addition* operator.\n    # Note that passing a negative value here is the equivalent of the *subtraction* operator.\n    b:int,\n)-\u003Eint: # The result is calculated using Python's builtin `+` operator.\n    \"Add `a` to `b`\"\n    return a+b\n", "code_hash": "4f02ae8ae75638886ecd929b320931ec", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "aLJB", "name": "*add"}, {"code": "def convert_docstyle(func, target_style='google', include_signature=True):\n    \"\"\"\n    Convert function documentation between different styles.\n\n    Args:\n        func: The function to convert documentation for\n        target_style: One of 'docments', 'google', or 'numpy'\n        include_signature: Whether to include the function signature\n\n    Returns:\n        String representation in the target documentation style\n    \"\"\"\n    from inspect import signature as get_sig\n\n    # Extract all the information we need\n    docs_full = docments(func, full=True)\n    main_doc = docstring(func)\n    func_name = func.__name__\n    sig = get_sig(func)\n\n    # Separate return from parameters\n    params = {k: v for k, v in docs_full.items() if k != 'return'}\n    return_info = docs_full.get('return', {})\n\n    if target_style == 'docments':\n        return format_docments_style(func_name, params, return_info, main_doc, include_signature)\n    elif target_style == 'google':\n        return format_google_style(func_name, params, return_info, main_doc, include_signature, sig)\n    elif target_style == 'numpy':\n        return format_numpy_style(func_name, params, return_info, main_doc, include_signature, sig)\n    else:\n        raise ValueError(f\"Unknown style: {target_style}. Use 'docments', 'google', or 'numpy'\")\n", "code_hash": "79348218cf9f1e03e66b50ebefcdb07a", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "jppL", "name": "*convert_docstyle"}, {"code": "def format_docments_style(func_name, params, return_info, main_doc, include_signature):\n    \"\"\"Format in docments style (inline comments)\"\"\"\n    lines = [f\"def {func_name}(\"]\n\n    for i, (name, info) in enumerate(params.items()):\n        anno = f\":{info['anno'].__name__}\" if info['anno'] != empty and hasattr(info['anno'], '__name__') else \"\"\n        default = f\"={repr(info['default'])}\" if info['default'] != empty else \"\"\n        comment = f\"  # {info['docment']}\" if info['docment'] and info['docment'] != empty else \"\"\n        comma = \",\" if i \u003C len(params) - 1 else \"\"\n        lines.append(f\"    {name}{anno}{default}{comma}{comment}\")\n\n    ret_anno = f\"-\u003E{return_info['anno'].__name__}\" if return_info.get('anno') != empty and hasattr(return_info.get('anno'), '__name__') else \"\"\n    ret_comment = f\"  # {return_info['docment']}\" if return_info.get('docment') and return_info['docment'] != empty else \"\"\n    lines.append(f\"){ret_anno}:{ret_comment}\")\n\n    if main_doc:\n        lines.append(f'    \"{main_doc}\"')\n\n    return '\\n'.join(lines)\n", "code_hash": "37b96b25032ac4392cdb0417663de4cc", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "NoBi", "name": "*format_docments_style"}, {"code": "def format_google_style(func_name, params, return_info, main_doc, include_signature, sig):\n    \"\"\"Format in Google style\"\"\"\n    lines = []\n\n    if include_signature:\n        lines.append(f\"def {func_name}{sig}:\")\n\n    # Main docstring\n    lines.append('    \"\"\"' + (main_doc or \"\"))\n    lines.append(\"\")\n\n    # Args section\n    if params:\n        lines.append(\"    Args:\")\n        for name, info in params.items():\n            type_str = f\" ({info['anno'].__name__})\" if info['anno'] != empty and hasattr(info['anno'], '__name__') else \"\"\n            default_str = f\", optional, default={repr(info['default'])}\" if info['default'] != empty else \"\"\n            desc = info.get('docment', '') or ''\n            lines.append(f\"        {name}{type_str}: {desc}{default_str}\")\n        lines.append(\"\")\n\n    # Returns section\n    if return_info.get('anno') != empty or return_info.get('docment'):\n        lines.append(\"    Returns:\")\n        ret_type = return_info.get('anno')\n        type_str = f\"{ret_type.__name__}: \" if ret_type != empty and hasattr(ret_type, '__name__') else \"\"\n        ret_desc = return_info.get('docment', '') or ''\n        lines.append(f\"        {type_str}{ret_desc}\")\n\n    lines.append('    \"\"\"')\n    return '\\n'.join(lines)", "code_hash": "f479cfb928631869636d8e7d8b14c999", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "vBfC", "name": "*format_google_style"}, {"code": "\ndef format_numpy_style(func_name, params, return_info, main_doc, include_signature, sig):\n    \"\"\"Format in NumPy style\"\"\"\n    lines = []\n\n    if include_signature:\n        lines.append(f\"def {func_name}{sig}:\")\n\n    # Main docstring\n    lines.append('    \"\"\"' + (main_doc or \"\"))\n    lines.append(\"\")\n\n    # Parameters section\n    if params:\n        lines.append(\"    Parameters\")\n        lines.append(\"    ----------\")\n        for name, info in params.items():\n            type_str = info['anno'].__name__ if info['anno'] != empty and hasattr(info['anno'], '__name__') else \"\"\n            lines.append(f\"    {name} : {type_str}\")\n            desc = info.get('docment', '') or ''\n            if desc:\n                # Handle multi-line descriptions\n                for desc_line in desc.split('\\n'):\n                    lines.append(f\"        {desc_line}\")\n            if info['default'] != empty:\n                lines.append(f\"        (default: {repr(info['default'])})\")\n        lines.append(\"\")\n\n    # Returns section\n    if return_info.get('anno') != empty or return_info.get('docment'):\n        lines.append(\"    Returns\")\n        lines.append(\"    -------\")\n        ret_type = return_info.get('anno')\n        type_str = ret_type.__name__ if ret_type != empty and hasattr(ret_type, '__name__') else \"\"\n        lines.append(f\"    {type_str}\")\n        ret_desc = return_info.get('docment', '') or ''\n        if ret_desc:\n            for desc_line in ret_desc.split('\\n'):\n                lines.append(f\"        {desc_line}\")\n\n    lines.append('    \"\"\"')\n    return '\\n'.join(lines)", "code_hash": "1b5b825d3942018756de62d87d718741", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "WqTK", "name": "*format_numpy_style"}, {"code": "# Convert to Google style\nprint(convert_docstyle(add,))\nprint(\"\\n\" + \"- \"*50 + \"\\n\")\n\n# Convert to NumPy style\nprint(convert_docstyle(add, 'numpy'))\nprint(\"\\n\" + \"- \"*50 + \"\\n\")\n\n# Convert to docments style\nprint(convert_docstyle(add, 'docments'))", "code_hash": "a00a74bdf0256d6cbcbcf72e1e5e053d", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "gdEz", "name": "_"}, {"code": "def convert_library_docstyle(src_path, target_style='numpy', backup=True):\n    \"\"\"\n    Convert the documentation style of all functions in a library's src/ directory to the target style.\n    \n    Args:\n        src_path: Path to the src/ directory.\n        target_style: The target documentation style ('docments', 'google', or 'numpy').\n        backup: Whether to create backup files before modifying.\n    \"\"\"\n    parent_path = os.path.dirname(os.path.abspath(src_path))\n    package_name = os.path.basename(src_path)\n    sys.path.insert(0, parent_path)\n\n    for root, dirs, files in os.walk(src_path):\n        for file in files:\n            if not file.endswith('.py') or file.startswith('__'):\n                continue\n\n            rel_path = os.path.relpath(root, src_path)\n            module_parts = [package_name]\n            if rel_path != '.':\n                module_parts.extend(rel_path.split(os.sep))\n            module_parts.append(file[:-3])\n            module_str = '.'.join(module_parts)\n\n            try:\n                module = importlib.import_module(module_str)\n            except Exception as e:\n                print(f\"Failed to import {module_str}: {e}\")\n                continue\n\n            funcs = []\n            for name in dir(module):\n                obj = getattr(module, name)\n                if isfunction(obj) and obj.__module__ == module.__name__:\n                    try:\n                        _, lineno = getsourcelines(obj)\n                        funcs.append((obj, name, lineno))\n                    except Exception as e:\n                        print(f\"Failed to get source lines for {name} in {module_str}: {e}\")\n                        continue\n\n            if not funcs:\n                continue\n\n            file_path = os.path.join(root, file)\n            if backup:\n                shutil.copy(file_path, file_path + '.bak')\n\n            with open(file_path, 'r') as f:\n                file_lines = f.readlines()\n\n            # Sort by lineno descending to process from bottom to top\n            funcs.sort(key=lambda x: x[2], reverse=True)\n\n            for obj, name, lineno in funcs:\n                try:\n                    func_source = getsource(obj)\n                    tree = ast.parse(func_source)\n                    func_def = tree.body[0]\n\n                    # Handle decorators\n                    decorators = []\n                    for dec in func_def.decorator_list:\n                        dec_source = '@' + ast.unparse(dec)\n                        decorators.append(dec_source)\n\n                    # Determine if async\n                    is_async = isinstance(func_def, ast.AsyncFunctionDef)\n\n                    # Get converted header (without indent)\n                    new_header = convert_docstyle(obj, target_style, include_signature=True)\n\n                    # Adjust for async\n                    if is_async:\n                        new_header = new_header.replace('def ', 'async def ', 1)\n\n                    # Get func indent\n                    lines = func_source.splitlines()\n                    func_indent_str = lines[0][:len(lines[0]) - len(lines[0].lstrip())]\n                    func_indent = len(func_indent_str)\n\n                    # Indent decorators\n                    indented_decorators = [func_indent_str + d for d in decorators]\n\n                    # Indent new_header\n                    indented_header_lines = []\n                    for line in new_header.splitlines():\n                        indented_header_lines.append(func_indent_str + line)\n\n                    # Combine decorators and header\n                    full_header_lines = indented_decorators + indented_header_lines\n                    full_header = '\\n'.join(full_header_lines)\n\n                    # Get body AST\n                    body_start = 1 if (len(func_def.body) \u003E 0 and isinstance(func_def.body[0], ast.Expr) and isinstance(func_def.body[0].value, ast.Constant) and isinstance(func_def.body[0].value.value, str)) else 0\n                    body_ast = func_def.body[body_start:]\n\n                    # Unparse body with proper indent\n                    body_indent_str = func_indent_str + '    '\n                    body_lines = []\n                    for node in body_ast:\n                        node_source = ast.unparse(node)\n                        for line in node_source.splitlines():\n                            body_lines.append(body_indent_str + line)\n\n                    body_str = '\\n'.join(body_lines)\n\n                    # Full new source\n                    new_func_source = full_header + '\\n' + body_str + '\\n'  # Add trailing newline for safety\n\n                    # Replace in file_lines\n                    func_lines, _ = getsourcelines(obj)\n                    start = lineno - 1\n                    end = start + len(func_lines)\n                    replacement = [l + '\\n' for l in new_func_source.splitlines()]\n                    file_lines[start:end] = replacement\n\n                except Exception as e:\n                    print(f\"Failed to convert {name} in {module_str}: {e}\")\n                    continue\n\n            # Write back the file\n            with open(file_path, 'w') as f:\n                f.writelines(file_lines)\n\n# Test the function on src/m_dev\nprint(\"\ud83e\uddea Testing convert_library_docstyle on src/m_dev\")\nprint(\"=\" * 60)\nconvert_library_docstyle('src/m_dev', target_style='numpy', backup=True)\nprint(\"=\" * 60)\nprint(\"\u2705 Conversion complete! Check src/m_dev for updated files\")\nprint(\"\ud83d\udcbe Backup files saved with .bak extension\")", "code_hash": "be6c0d61d6351051b81293f0093ce963", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "GlLt", "name": "_"}, {"code": "mo.md(r\"\"\"## Testing\"\"\")", "code_hash": "ef3039219ee3dbea62e4c9ec1d2b783e", "config": {"column": 1, "disabled": false, "hide_code": true}, "id": "pHFh", "name": "_"}, {"code": "mo.md(r\"\"\"## Build Package\"\"\")", "code_hash": "542ab5538d7c64dbc00040c1fe78aaa7", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "NCOB", "name": "_"}, {"code": "build_package(\"./notebooks\", output_dir=\"src\", docstring_style=\"nbdev\")", "code_hash": "32634a451acde9188766d438534fcaae", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "aqbW", "name": "_"}, {"code": "mo.md(\n    r\"\"\"\nto add to pypi run \n\n```\nuv build\n```\n\n# Test PyPi\n```\nuv publish --publish-url https://test.pypi.org/legacy/ dist/*\n```\n\n# Real PyPi\n```\nuv publish --token pypi-... dist/*\n```\n\"\"\"\n)", "code_hash": "2ad83a633d05e5d794d42a6012d659bb", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "TRpd", "name": "_"}, {"code": "_todo_items = [\n    {\"item\": \"Normalize and Restructure NBDev Deocs -\u003E more standard documentation\", \"status\": True},\n    {\"item\": \"Extract README.md from notebook\", \"status\": True},\n    {\"item\": \"Integrate CLI for init, test, and mkdocs\", \"status\": False},\n    {\"item\": \"Static Docs Generation with no dependencies\", \"status\": False},\n    {\"item\": \"Better testing\", \"status\": False},\n    {\"item\": \"Better PyPI integration\", \"status\": False},\n\n    {\"item\": \"Generate PyPI setup thing from marimo\", \"status\": False},\n    {\"item\": \"Enhance Pyproject.toml with repo. and other good info\", \"status\": False},\n    {\"item\": \"Multi notebook support\", \"status\": False},\n    {\"item\": \"GitHub Actions Support\", \"status\": False},\n    {\"item\": \"Clean up os.path and Path - use Path throughout\", \"status\": False},\n]\n\ntodo_checklist = mo.md(f\"\"\"\n## \ud83d\udccb Package Development TODOs\n\n{mo.vstack([\n    mo.hstack([mo.ui.checkbox(value=todo[\"status\"]), mo.md(f\"**{todo['item']}**\")], align=\"center\", justify=\"start\") \n    for todo in _todo_items\n])}\n\"\"\")\n\ntodo_checklist", "code_hash": "e4477f8b93acedb9c36f9c5fe1907c30", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "TXez", "name": "_"}, {"code": "", "code_hash": null, "config": {"column": null, "disabled": false, "hide_code": false}, "id": "dNNg", "name": "_"}], "metadata": {"marimo_version": "0.17.2"}, "version": "1"},
            "session": {"cells": [{"code_hash": "735f08cfd8819b2e3c530aeaf80d15cf", "console": [], "id": "setup", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "2e2072a45e51ece6702f3fb686466459", "console": [], "id": "Hbol", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"development-packages\"\u003EDevelopment Packages\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "913b863a99190032070367acb7f1475c", "console": [], "id": "MJUe", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "bab72832b3cc74e8da4b8fa4b57d056a", "console": [], "id": "vblA", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"utilities\"\u003EUtilities\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "313d74ebf086eab9633f8328fc4bffe9", "console": [], "id": "bkHC", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "9ae7355a7e564a9e4415009a24137f0f", "console": [], "id": "lEQa", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "3e60bdb851fff8e16a959bcf67c7b268", "console": [], "id": "PKri", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "c1f80b168bf137f22880c69346ac8cf2", "console": [], "id": "Xref", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"validation\"\u003EValidation\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "d94687028d19223d54cfe8073ac9f455", "console": [], "id": "SFPL", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "f9efc9e8656bc5587022a099b4bd5939", "console": [], "id": "BYtC", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"scan-notebooks-directory\"\u003EScan /notebooks Directory\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "56664a414063bdcecc0e8c555e238053", "console": [], "id": "RGSE", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "87eb6e2c609e8fe431d5728a6354e0a6", "console": [], "id": "Kclp", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "46a5a54695ebe7206884441297cc4359", "console": [], "id": "emfo", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"extraction\"\u003EExtraction\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "4969c2fede0db613631b313750466918", "console": [], "id": "Hstk", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "5d2bfda0ac6ceb12d240d2c57c79aa03", "console": [], "id": "nWHF", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "2e6c9075eec80fa55d13c71f04370492", "console": [], "id": "iLit", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "a2d5a995878c531f9c5626ba88966ee4", "console": [], "id": "ZHCJ", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"write-files\"\u003EWrite Files\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "7170e9fb255fff7fece6eb08bde3d474", "console": [], "id": "ROlb", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "fc31fadd178ddf677e60189c38ecb739", "console": [], "id": "qnkX", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "ab796042a130026fa75677fc1a01e9cd", "console": [], "id": "TqIu", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "dd12d2d87bf85b91c5b05e7affe2273c", "console": [], "id": "Vxnm", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"readme-extraction\"\u003EReadme Extraction\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "d56d6502f89ae4f89c718d708364e617", "console": [], "id": "DnEU", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "b48d73c2f0aaba523323ed05e96797e4", "console": [], "id": "ulZA", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "542ab5538d7c64dbc00040c1fe78aaa7", "console": [], "id": "ecfG", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"build-package\"\u003EBuild Package\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "79a8d786a4c40f5d462b73b7bc109e48", "console": [], "id": "Pvdt", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "397cbe06619487ac0727a252fcc7f220", "console": [], "id": "ZBYS", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"documentation-converter\"\u003EDocumentation Converter\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "4f02ae8ae75638886ecd929b320931ec", "console": [], "id": "aLJB", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "79348218cf9f1e03e66b50ebefcdb07a", "console": [], "id": "jppL", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "37b96b25032ac4392cdb0417663de4cc", "console": [], "id": "NoBi", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "f479cfb928631869636d8e7d8b14c999", "console": [], "id": "vBfC", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "1b5b825d3942018756de62d87d718741", "console": [], "id": "WqTK", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "a00a74bdf0256d6cbcbcf72e1e5e053d", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "def add(a: int, b: int) -\u003E int:\n    \"\"\"Add `a` to `b`\n\n    Args:\n        a (int): The first operand\n        b (int): This is the second of the operands to the *addition* operator.\nNote that passing a negative value here is the equivalent of the *subtraction* operator.\n\n    Returns:\n        int: The result is calculated using Python's builtin `+` operator.\n    \"\"\"\n\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \n\ndef add(a: int, b: int) -\u003E int:\n    \"\"\"Add `a` to `b`\n\n    Parameters\n    ----------\n    a : int\n        The first operand\n    b : int\n        This is the second of the operands to the *addition* operator.\n        Note that passing a negative value here is the equivalent of the *subtraction* operator.\n\n    Returns\n    -------\n    int\n        The result is calculated using Python's builtin `+` operator.\n    \"\"\"\n\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \n\ndef add(\n    a:int,  # The first operand\n    b:int  # This is the second of the operands to the *addition* operator.\nNote that passing a negative value here is the equivalent of the *subtraction* operator.\n)-\u003Eint:  # The result is calculated using Python's builtin `+` operator.\n    \"Add `a` to `b`\"\n", "type": "stream"}], "id": "gdEz", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "be6c0d61d6351051b81293f0093ce963", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "\ud83e\uddea Testing convert_library_docstyle on src/m_dev\n============================================================\nFailed to import m_dev.01_core: invalid decimal literal (__init__.py, line 6)\nFailed to import m_dev.02_new: invalid decimal literal (__init__.py, line 6)\n============================================================\n\u2705 Conversion complete! Check src/m_dev for updated files\n\ud83d\udcbe Backup files saved with .bak extension\n", "type": "stream"}], "id": "GlLt", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "ef3039219ee3dbea62e4c9ec1d2b783e", "console": [], "id": "pHFh", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"testing\"\u003ETesting\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "542ab5538d7c64dbc00040c1fe78aaa7", "console": [], "id": "NCOB", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"build-package\"\u003EBuild Package\u003C/h2\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "32634a451acde9188766d438534fcaae", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "\ud83d\udd0d Scanning notebooks in ./notebooks/\n", "type": "stream"}, {"mimetype": "text/plain", "name": "stdout", "text": "\ud83d\udce6 Building package: m_dev\n  \u2705 01_core.py\n  \u2705 02_new.py\n\u2705 Generated src/m_dev/__init__.py\n\u2705 Updated pyproject.toml with metadata\n\u2705 README.md generated from notebook\n\n\u2705 Package built in src/m_dev/\n", "type": "stream"}], "id": "aqbW", "outputs": [{"data": {"text/html": "\u003Cpre style='font-size: 12px'\u003E\u0026#x27;src\u0026#x27;\u003C/pre\u003E"}, "type": "data"}]}, {"code_hash": "2ad83a633d05e5d794d42a6012d659bb", "console": [], "id": "TRpd", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003Eto add to pypi run \u003C/span\u003E\n\u003Cdiv class=\"language-text codehilite\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Ccode\u003Euv build\n\u003C/code\u003E\u003C/pre\u003E\u003C/div\u003E\n\u003Ch1 id=\"test-pypi\"\u003ETest PyPi\u003C/h1\u003E\n\u003Cdiv class=\"language-scdoc codehilite\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Ccode\u003Euv publish --publish-url https://test.pypi.org/legacy/ dist/*\n\u003C/code\u003E\u003C/pre\u003E\u003C/div\u003E\n\u003Ch1 id=\"real-pypi\"\u003EReal PyPi\u003C/h1\u003E\n\u003Cdiv class=\"language-scdoc codehilite\"\u003E\u003Cpre\u003E\u003Cspan\u003E\u003C/span\u003E\u003Ccode\u003Euv publish --token pypi-... dist/*\n\u003C/code\u003E\u003C/pre\u003E\u003C/div\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "e4477f8b93acedb9c36f9c5fe1907c30", "console": [], "id": "TXez", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"package-development-todos\"\u003E\ud83d\udccb Package Development TODOs\u003C/h2\u003E\n\u003Cdiv style='display: flex;flex: 1;flex-direction: column;justify-content: flex-start;align-items: normal;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='TXez-0' random-id='2f430628-332f-2564-e772-d0d59979d5d9'\u003E\u003Cmarimo-checkbox data-initial-value='true' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003ENormalize and Restructure NBDev Deocs -\u0026gt; more standard documentation\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='TXez-1' random-id='875b4cc1-1e91-92a2-1d43-5cc63693fc5a'\u003E\u003Cmarimo-checkbox data-initial-value='true' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EExtract README.md from notebook\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='TXez-2' random-id='21c4c7e0-1dd2-74dc-8718-d23834218f86'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EIntegrate CLI for init, test, and mkdocs\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='TXez-3' random-id='c864c7b2-3d09-ae24-ce75-98b0db239f92'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EStatic Docs Generation with no dependencies\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='TXez-4' random-id='f8912afe-372f-f9c2-2df3-ca0918268d33'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EBetter testing\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='TXez-5' random-id='35a93024-2338-215f-90b1-d7bff3266944'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EBetter PyPI integration\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='TXez-6' random-id='008a6059-decb-e0f2-f974-d59e0af5cdfe'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EGenerate PyPI setup thing from marimo\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='TXez-7' random-id='3cdc94b6-7296-98f0-4b5d-ea37cf449dbc'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EEnhance Pyproject.toml with repo. and other good info\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='TXez-8' random-id='15251270-42d4-1be5-6faa-b24c6188104b'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EMulti notebook support\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='TXez-9' random-id='7ba3a332-6572-a08a-05f0-a501d464b704'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EGitHub Actions Support\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003Cdiv style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: center;flex-wrap: nowrap;gap: 0.5rem'\u003E\u003Cmarimo-ui-element object-id='TXez-10' random-id='ee06bfb9-5490-21d7-a67d-36ade16a400f'\u003E\u003Cmarimo-checkbox data-initial-value='false' data-label='null' data-disabled='false'\u003E\u003C/marimo-checkbox\u003E\u003C/marimo-ui-element\u003E\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cstrong\u003EClean up os.path and Path - use Path throughout\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/div\u003E\u003C/div\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": null, "console": [], "id": "dNNg", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}], "metadata": {"marimo_version": "0.17.2"}, "version": "1"},
            "runtimeConfig": null,
        };
    </script>
  
<marimo-code hidden="">
    import%20marimo%0A%0A__generated_with%20%3D%20%220.17.2%22%0Aapp%20%3D%20marimo.App(width%3D%22columns%22%2C%20app_title%3D%22%22%2C%20auto_download%3D%5B%22html%22%5D)%0A%0Awith%20app.setup(hide_code%3DTrue)%3A%0A%20%20%20%20import%20re%0A%20%20%20%20import%20ast%0A%20%20%20%20import%20tomllib%0A%20%20%20%20import%20copy%0A%20%20%20%20import%20os%0A%20%20%20%20import%20tempfile%0A%20%20%20%20import%20shutil%0A%20%20%20%20import%20inspect%0A%20%20%20%20import%20sys%0A%20%20%20%20import%20importlib%0A%20%20%20%20import%20io%0A%20%20%20%20import%20zipfile%0A%0A%20%20%20%20from%20tokenize%20import%20tokenize%2C%20COMMENT%0A%20%20%20%20from%20pathlib%20import%20Path%0A%20%20%20%20from%20textwrap%20import%20dedent%2C%20indent%0A%20%20%20%20from%20typing%20import%20Callable%2C%20Literal%2C%20Dict%2C%20Any%2C%20Tuple%2C%20TypedDict%2C%20List%2C%20Optional%0A%0A%20%20%20%20from%20textwrap%20import%20dedent%0A%0A%20%20%20%20from%20mistletoe%20import%20markdown%0A%0A%20%20%20%20import%20numpy%20as%20np%0A%0A%20%20%20%20from%20fastcore.docments%20import%20docments%2C%20docstring%2C%20empty%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Development%20Packages%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_()%3A%0A%20%20%20%20import%20marimo%20as%20mo%0A%20%20%20%20import%20pytest%0A%20%20%20%20from%20sklearn.model_selection%20import%20train_test_split%20%23allows%20us%20to%20test%20imports%0A%20%20%20%20return%20(mo%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Utilities%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.class_definition%0Aclass%20ModuleInfo(TypedDict)%3A%0A%20%20%20%20name%3A%20str%20%20%20%20%20%20%20%20%20%20%20%23%20module%20name%20(without%20.py)%0A%20%20%20%20imports%3A%20List%5Bstr%5D%20%20%23%20import%20statements%20(assuming%20strings%3B%20adjust%20if%20needed)%0A%20%20%20%20exports%3A%20List%5Bstr%5D%20%20%23%20formatted%20source%20code%20(assuming%20strings)%0A%20%20%20%20export_names%3A%20List%5Bstr%5D%0A%0A%0A%40app.class_definition%0Aclass%20ScanResult(TypedDict)%3A%0A%20%20%20%20metadata%3A%20Optional%5Bdict%5D%20%20%23%20or%20a%20more%20specific%20type%20if%20known%0A%20%20%20%20readme_source%3A%20Optional%5Bstr%5D%20%20%23%20notebook%20path%20or%20None%0A%20%20%20%20modules%3A%20List%5BModuleInfo%5D%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20is_marimo_export_decorator(%0A%20%20%20%20decorator%20%23%20the%20decorator%20that%20marimo%20attached%20to%20the%20cell%0A)%20-%3E%20bool%3A%20%20%20%20%23%20True%20if%20the%20function%20or%20cell%20is%20reusable%20-%20should%20match%20marimos%20detection%0A%20%20%20%20%22Check%20if%20decorator%20is%20app.function%20or%20app.class_definition%20(with%20or%20without%20args)%22%0A%20%20%20%20%23%20If%20it's%20a%20call%20like%20%40app.function(hide_code%3DTrue)%2C%20check%20the%20func%20part%0A%20%20%20%20if%20isinstance(decorator%2C%20ast.Call)%3A%0A%20%20%20%20%20%20%20%20decorator_name%20%3D%20ast.unparse(decorator.func)%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%23%20Simple%20decorator%20like%20%40app.function%0A%20%20%20%20%20%20%20%20decorator_name%20%3D%20ast.unparse(decorator)%0A%0A%20%20%20%20return%20decorator_name%20in%20%5B'app.function'%2C%20'app.class_definition'%5D%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Validation%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20validate_setup_metadata(%0A%20%20%20%20setup_metadata%3A%20dict%20%20%23%20Package%20metadata%20from%20setup%20cell%0A)%20-%3E%20None%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Raises%20ValueError%20if%20invalid%0A%20%20%20%20%22%22%22Validate%20that%20required%20metadata%20keys%20exist%20and%20have%20valid%20values%20for%20package%20generation%22%22%22%0A%0A%20%20%20%20required%20%3D%20%5B'__version__'%2C%20'__description__'%2C%20'__author__'%2C%20'__license__'%5D%0A%20%20%20%20missing%20%3D%20%5Bk%20for%20k%20in%20required%20if%20k%20not%20in%20setup_metadata%5D%0A%0A%20%20%20%20if%20missing%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22Setup%20cell%20missing%20required%20metadata%3A%20%7B'%2C%20'.join(missing)%7D%5Cn%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22Add%20these%20to%20your%20setup%20cell%3A%5Cn%22%20%2B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20'%5Cn'.join(%5Bf%22%20%20%20%20%7Bk%7D%20%3D%20'...'%22%20for%20k%20in%20missing%5D)%0A%20%20%20%20%20%20%20%20)%0A%0A%20%20%20%20%23%20Validate%20version%0A%20%20%20%20version%20%3D%20setup_metadata%5B'__version__'%5D%0A%20%20%20%20if%20not%20version%20or%20not%20version.strip()%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%22__version__%20cannot%20be%20empty%22)%0A%0A%20%20%20%20%23%20Validate%20description%0A%20%20%20%20desc%20%3D%20setup_metadata%5B'__description__'%5D%0A%20%20%20%20if%20not%20desc%20or%20not%20desc.strip()%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%22__description__%20cannot%20be%20empty%22)%0A%0A%20%20%20%20%23%20Validate%20author%20format%0A%20%20%20%20author%20%3D%20setup_metadata%5B'__author__'%5D%0A%20%20%20%20if%20not%20author%20or%20not%20author.strip()%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%22__author__%20cannot%20be%20empty%22)%0A%20%20%20%20if%20'%3C'%20not%20in%20author%20or%20'%3E'%20not%20in%20author%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%22__author__%20must%20be%20in%20format%20'Name%20%3Cemail%40example.com%3E'%22)%0A%0A%20%20%20%20email_part%20%3D%20author.split('%3C')%5B1%5D.split('%3E')%5B0%5D.strip()%0A%20%20%20%20if%20not%20email_part%20or%20'%40'%20not%20in%20email_part%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(f%22__author__%20email%20'%7Bemail_part%7D'%20is%20not%20valid%22)%0A%0A%20%20%20%20%23%20Validate%20license%0A%20%20%20%20license_val%20%3D%20setup_metadata%5B'__license__'%5D%0A%20%20%20%20if%20not%20license_val%20or%20not%20license_val.strip()%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%22__license__%20cannot%20be%20empty%22)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Scan%20%2Fnotebooks%20Directory%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20scan_notebooks(%0A%20%20%20%20notebooks_dir%3A%20str%20%3D%20'notebooks'%2C%20%23%20Directory%20containing%20notebook%20files%0A%20%20%20%20docstring_style%3A%20str%20%3D%20'nbdev'%20%20%20%20%23%20Docstring%20style%20for%20all%20exports%0A)%20-%3E%20ScanResult%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20A%20typed%20dict%20with%20the%20described%20structure.%0A%20%20%20%20%22Scan%20notebooks%20directory%20and%20extract%20all%20exports%2C%20metadata%2C%20and%20README%22%0A%0A%20%20%20%20notebooks_path%20%3D%20Path(notebooks_dir)%0A%0A%20%20%20%20if%20not%20notebooks_path.exists()%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(f%22Notebooks%20directory%20'%7Bnotebooks_dir%7D'%20does%20not%20exist%22)%0A%0A%20%20%20%20%23%20Get%20all%20.py%20files%2C%20sorted%0A%20%20%20%20notebook_files%20%3D%20sorted(notebooks_path.glob('*.py'))%0A%0A%20%20%20%20if%20not%20notebook_files%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(f%22No%20.py%20files%20found%20in%20'%7Bnotebooks_dir%7D'%22)%0A%0A%20%20%20%20metadata%20%3D%20None%0A%20%20%20%20metadata_found_in%20%3D%20None%0A%20%20%20%20readme_found_in%20%3D%20None%0A%20%20%20%20modules%20%3D%20%5B%5D%0A%0A%20%20%20%20for%20notebook_file%20in%20notebook_files%3A%0A%20%20%20%20%20%20%20%20%23%20Skip%20__pycache__%20and%20hidden%20files%0A%20%20%20%20%20%20%20%20if%20notebook_file.name.startswith('.')%20or%20notebook_file.name%20%3D%3D%20'__pycache__'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%23%20Extract%20from%20this%20notebook%0A%20%20%20%20%20%20%20%20nb_metadata%2C%20setup_imports%2C%20exports%2C%20export_names%20%3D%20extract_exports(%0A%20%20%20%20%20%20%20%20%20%20%20%20str(notebook_file)%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20docstring_style%0A%20%20%20%20%20%20%20%20)%0A%0A%20%20%20%20%20%20%20%20%23%20Check%20for%20metadata%20(should%20only%20be%20in%20one%20file)%0A%20%20%20%20%20%20%20%20if%20nb_metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20metadata_found_in%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20raise%20ValueError(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22Project%20metadata%20defined%20in%20multiple%20notebooks%3A%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22%20%20-%20%7Bmetadata_found_in%7D%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22%20%20-%20%7Bnotebook_file.name%7D%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22Metadata%20should%20only%20be%20defined%20in%20one%20notebook%20(typically%2000_config.py)%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20metadata%20%3D%20nb_metadata%0A%20%20%20%20%20%20%20%20%20%20%20%20metadata_found_in%20%3D%20notebook_file.name%0A%0A%20%20%20%20%20%20%20%20%23%20Check%20for%20README%0A%20%20%20%20%20%20%20%20if%20has_readme_cell(str(notebook_file))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20readme_found_in%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20raise%20ValueError(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22README%20defined%20in%20multiple%20notebooks%3A%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22%20%20-%20%7Breadme_found_in%7D%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22%20%20-%20%7Bnotebook_file.name%7D%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%22README%20should%20only%20be%20defined%20in%20one%20notebook%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20readme_found_in%20%3D%20str(notebook_file)%0A%0A%20%20%20%20%20%20%20%20%23%20Store%20module%20info%20(even%20if%20no%20exports%2C%20we%20track%20the%20imports)%0A%20%20%20%20%20%20%20%20module_name%20%3D%20notebook_file.stem%20%20%23%20filename%20without%20.py%0A%20%20%20%20%20%20%20%20modules.append(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'name'%3A%20module_name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'imports'%3A%20setup_imports%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'exports'%3A%20exports%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'export_names'%3A%20export_names%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%23%20Validate%20we%20found%20required%20metadata%0A%20%20%20%20if%20not%20metadata%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22No%20project%20metadata%20found%20in%20any%20notebook.%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22Add%20metadata%20to%20your%20config%20notebook%20(e.g.%2C%2000_config.py)%20in%20the%20setup%20cell%3A%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%20%20%20%20__version__%20%3D%20'0.1.0'%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%20%20%20%20__description__%20%3D%20'My%20package'%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%20%20%20%20__author__%20%3D%20'Name%20%3Cemail%40example.com%3E'%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20f%22%20%20%20%20__license__%20%3D%20'MIT'%22%0A%20%20%20%20%20%20%20%20)%0A%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20'metadata'%3A%20metadata%2C%0A%20%20%20%20%20%20%20%20'readme_source'%3A%20readme_found_in%2C%0A%20%20%20%20%20%20%20%20'modules'%3A%20modules%0A%20%20%20%20%7D%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20has_readme_cell(%0A%20%20%20%20notebook_path%3A%20str%20%20%20%20%23%20Dir%20with%20notebook%20files%0A)%20-%3E%20bool%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20truthy%20iff%20readme%0A%20%20%20%20%22%22%22Check%20if%20notebook%20contains%20a%20%23%7C%20README%20cell%20at%20start%20of%20mo.md()%20content%22%22%22%0A%20%20%20%20source_code%20%3D%20Path(notebook_path).read_text()%0A%0A%20%20%20%20%23%20Extract%20mo.md()%20content%0A%20%20%20%20content%20%3D%20extract_mo_md_content(source_code)%0A%20%20%20%20if%20not%20content%3A%0A%20%20%20%20%20%20%20%20return%20False%0A%0A%20%20%20%20%23%20Check%20if%20%23%7C%20README%20is%20on%20first%20non-empty%20line%0A%20%20%20%20lines%20%3D%20content.strip().split('%5Cn')%0A%20%20%20%20if%20lines%20and%20lines%5B0%5D.strip()%20%3D%3D%20'%23%7C%20README'%3A%0A%20%20%20%20%20%20%20%20return%20True%0A%0A%20%20%20%20return%20False%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Extraction%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20extract_exports(%0A%20%20%20%20notebook_path%3A%20str%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20marimo%20notebook%20file%0A%20%20%20%20docstring_style%3A%20str%20%3D%20'nbdev'%20%20%23%20Target%20docstring%20format%3A%20'google'%2C%20'numpy'%2C%20or%20'nbdev'%0A)%20-%3E%20tuple%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20(setup_metadata%2C%20setup_imports%2C%20exports%2C%20export_names)%0A%20%20%20%20%22Extract%20metadata%2C%20imports%2C%20and%20exportable%20functions%2Fclasses%20from%20marimo%20notebook%22%0A%0A%20%20%20%20source_code%20%3D%20Path(notebook_path).read_text()%0A%20%20%20%20tree%20%3D%20ast.parse(source_code)%0A%0A%20%20%20%20setup_metadata%20%3D%20%7B%7D%0A%20%20%20%20setup_imports%20%3D%20%5B%5D%0A%20%20%20%20exports%20%3D%20%5B%5D%0A%20%20%20%20export_names%20%3D%20%5B%5D%0A%0A%20%20%20%20for%20node%20in%20tree.body%3A%0A%20%20%20%20%20%20%20%20%23%20Extract%20setup%20cell%20content%0A%20%20%20%20%20%20%20%20if%20isinstance(node%2C%20ast.With)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20stmt%20in%20node.body%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20isinstance(stmt%2C%20ast.Assign)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setup_metadata%5Bstmt.targets%5B0%5D.id%5D%20%3D%20ast.literal_eval(stmt.value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20elif%20isinstance(stmt%2C%20(ast.Import%2C%20ast.ImportFrom))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setup_imports.append(ast.unparse(stmt))%0A%0A%20%20%20%20%20%20%20%20%23%20Extract%20exportable%20functions%2Fclasses%0A%20%20%20%20%20%20%20%20elif%20isinstance(node%2C%20(ast.FunctionDef%2C%20ast.ClassDef))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20any(is_marimo_export_decorator(d)%20for%20d%20in%20node.decorator_list)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20node.name.startswith('test_')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Get%20original%20source%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20original_source%20%3D%20ast.get_source_segment(source_code%2C%20node)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Remove%20marimo%20decorators%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines%20%3D%20original_source.split('%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filtered_lines%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20line%20in%20lines%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stripped%20%3D%20line.strip()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20(stripped.startswith('%40app.function')%20or%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stripped.startswith('%40app.class_definition'))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filtered_lines.append(line)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clean_source%20%3D%20'%5Cn'.join(filtered_lines)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Reformat%20if%20needed%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20docstring_style%20!%3D%20'nbdev'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20docs%20%3D%20extract_param_docs_from_ast(clean_source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20formatted_source%20%3D%20build_formatted_docstring(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clean_source%2C%20docs%2C%20docstring_style%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20exports.append(formatted_source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20except%20Exception%20as%20e%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print(f%22%E2%9A%A0%EF%B8%8F%20%20Could%20not%20reformat%20%7Bnode.name%7D%3A%20%7Be%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20exports.append(clean_source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20exports.append(clean_source)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20export_names.append(node.name)%0A%0A%20%20%20%20return%20(setup_metadata%2C%20setup_imports%2C%20exports%2C%20export_names)%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20extract_param_docs_from_ast(%0A%20%20%20%20func_source%3A%20str%20%20%23%20Function%20source%20code%20as%20string%0A)%20-%3E%20dict%3A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Dict%20mapping%20param%20names%20to%20%7B'anno'%3A%20type%2C%20'docment'%3A%20comment%7D%0A%20%20%20%20%22Extract%20parameter%20docs%20using%20AST%20%2B%20tokenizer%2C%20no%20exec%20needed%22%0A%0A%20%20%20%20%23%20Parse%20AST%20to%20get%20parameter%20info%0A%20%20%20%20tree%20%3D%20ast.parse(func_source)%0A%20%20%20%20func_node%20%3D%20tree.body%5B0%5D%0A%0A%20%20%20%20%23%20Get%20parameter%20line%20numbers%20and%20names%20from%20AST%0A%20%20%20%20param_locs%20%3D%20%7B%7D%0A%20%20%20%20for%20arg%20in%20func_node.args.args%3A%0A%20%20%20%20%20%20%20%20param_locs%5Barg.lineno%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'name'%3A%20arg.arg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20ast.unparse(arg.annotation)%20if%20arg.annotation%20else%20None%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%23%20Add%20*args%20if%20present%0A%20%20%20%20if%20func_node.args.vararg%3A%0A%20%20%20%20%20%20%20%20param_locs%5Bfunc_node.args.vararg.lineno%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'name'%3A%20func_node.args.vararg.arg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20None%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%23%20Add%20keyword-only%20args%0A%20%20%20%20for%20arg%20in%20func_node.args.kwonlyargs%3A%0A%20%20%20%20%20%20%20%20param_locs%5Barg.lineno%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'name'%3A%20arg.arg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20ast.unparse(arg.annotation)%20if%20arg.annotation%20else%20None%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%23%20Add%20**kwargs%20if%20present%0A%20%20%20%20if%20func_node.args.kwarg%3A%0A%20%20%20%20%20%20%20%20param_locs%5Bfunc_node.args.kwarg.lineno%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'name'%3A%20func_node.args.kwarg.arg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20None%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%23%20Add%20return%20annotation%0A%20%20%20%20if%20func_node.returns%3A%0A%20%20%20%20%20%20%20%20param_locs%5Bfunc_node.returns.lineno%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'name'%3A%20'return'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20ast.unparse(func_node.returns)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%23%20Tokenize%20to%20get%20comments%0A%20%20%20%20tokens%20%3D%20tokenize(io.BytesIO(func_source.encode('utf-8')).readline)%0A%20%20%20%20clean_re%20%3D%20re.compile(r'%5E%5Cs*%23(.*)%5Cs*%24')%0A%20%20%20%20comments%20%3D%20%7B%7D%0A%20%20%20%20for%20token%20in%20tokens%3A%0A%20%20%20%20%20%20%20%20if%20token.type%20%3D%3D%20COMMENT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20match%20%3D%20clean_re.findall(token.string)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20match%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20comments%5Btoken.start%5B0%5D%5D%20%3D%20match%5B0%5D.strip()%0A%0A%20%20%20%20%23%20Match%20comments%20to%20parameters%0A%20%20%20%20result%20%3D%20%7B%7D%0A%20%20%20%20for%20line%2C%20param_info%20in%20param_locs.items()%3A%0A%20%20%20%20%20%20%20%20name%20%3D%20param_info%5B'name'%5D%0A%20%20%20%20%20%20%20%20comment%20%3D%20comments.get(line%2C%20'')%0A%20%20%20%20%20%20%20%20result%5Bname%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'anno'%3A%20param_info%5B'anno'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20'docment'%3A%20comment%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20build_formatted_docstring(%0A%20%20%20%20func_source%3A%20str%2C%20%20%20%20%20%20%20%23%20Original%20function%20source%20code%0A%20%20%20%20docs%3A%20dict%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Parameter%20docs%20from%20extract_param_docs_from_ast%0A%20%20%20%20target_style%3A%20str%20%20%20%20%20%20%20%23%20'google'%20or%20'numpy'%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Function%20source%20with%20reformatted%20docstring%0A%20%20%20%20%22Build%20formatted%20docstring%20from%20docs%20dict%22%0A%0A%20%20%20%20tree%20%3D%20ast.parse(func_source)%0A%20%20%20%20func_node%20%3D%20tree.body%5B0%5D%0A%20%20%20%20existing_doc%20%3D%20ast.get_docstring(func_node)%20or%20%22%22%0A%0A%20%20%20%20lines%20%3D%20%5Bexisting_doc.strip()%5D%20if%20existing_doc%20else%20%5B%5D%0A%0A%20%20%20%20if%20target_style%20%3D%3D%20'google'%3A%0A%20%20%20%20%20%20%20%20params%20%3D%20%7Bk%3A%20v%20for%20k%2C%20v%20in%20docs.items()%20if%20k%20!%3D%20'return'%20and%20v.get('docment')%7D%0A%20%20%20%20%20%20%20%20if%20params%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22Args%3A%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20name%2C%20info%20in%20params.items()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20anno%20%3D%20info.get('anno'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc%20%3D%20info.get('docment'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20anno%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bname%7D%20(%7Banno%7D)%3A%20%7Bdoc%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bname%7D%3A%20%7Bdoc%7D%22)%0A%0A%20%20%20%20%20%20%20%20ret%20%3D%20docs.get('return')%0A%20%20%20%20%20%20%20%20if%20ret%20and%20ret.get('docment')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22Returns%3A%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20ret_anno%20%3D%20ret.get('anno'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20ret_doc%20%3D%20ret.get('docment'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20ret_anno%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bret_anno%7D%3A%20%7Bret_doc%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bret_doc%7D%22)%0A%0A%20%20%20%20elif%20target_style%20%3D%3D%20'numpy'%3A%0A%20%20%20%20%20%20%20%20params%20%3D%20%7Bk%3A%20v%20for%20k%2C%20v%20in%20docs.items()%20if%20k%20!%3D%20'return'%20and%20v.get('docment')%7D%0A%20%20%20%20%20%20%20%20if%20params%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22Parameters%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22----------%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20name%2C%20info%20in%20params.items()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20anno%20%3D%20info.get('anno'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc%20%3D%20info.get('docment'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20anno%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%7Bname%7D%20%3A%20%7Banno%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%7Bname%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20doc%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bdoc%7D%22)%0A%0A%20%20%20%20%20%20%20%20ret%20%3D%20docs.get('return')%0A%20%20%20%20%20%20%20%20if%20ret%20and%20ret.get('docment')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22Returns%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(%22-------%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20ret_anno%20%3D%20ret.get('anno'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20ret_doc%20%3D%20ret.get('docment'%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20ret_anno%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%7Bret_anno%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20ret_doc%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bret_doc%7D%22)%0A%0A%20%20%20%20new_docstring%20%3D%20'%5Cn'.join(lines)%0A%0A%20%20%20%20%23%20Replace%20docstring%20in%20AST%0A%20%20%20%20for%20node%20in%20ast.walk(tree)%3A%0A%20%20%20%20%20%20%20%20if%20isinstance(node%2C%20(ast.FunctionDef%2C%20ast.AsyncFunctionDef))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(node.body%20and%20isinstance(node.body%5B0%5D%2C%20ast.Expr)%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20and%20isinstance(node.body%5B0%5D.value%2C%20ast.Constant))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20node.body%5B0%5D.value.value%20%3D%20new_docstring%0A%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc_node%20%3D%20ast.Expr(value%3Dast.Constant(value%3Dnew_docstring))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20node.body.insert(0%2C%20doc_node)%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%0A%20%20%20%20return%20ast.unparse(tree)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Write%20Files%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20update_pyproject_toml(%0A%20%20%20%20setup_metadata%3A%20dict%2C%20%20%20%20%20%20%23%20Package%20metadata%20from%20setup%20cell%0A%20%20%20%20pyproject_path%3A%20str%20%3D%20%22pyproject.toml%22%20%20%23%20Path%20to%20pyproject.toml%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20updated%20file%0A%20%20%20%20%22Update%20pyproject.toml%20with%20metadata%20from%20notebook%20setup%20cell%22%0A%0A%20%20%20%20%23%20Validate%20metadata%20first%0A%20%20%20%20validate_setup_metadata(setup_metadata)%0A%0A%20%20%20%20%23%20Read%20existing%20pyproject.toml%0A%20%20%20%20with%20open(pyproject_path%2C%20'rb')%20as%20f%3A%0A%20%20%20%20%20%20%20%20config%20%3D%20tomllib.load(f)%0A%0A%20%20%20%20%23%20Update%20%5Bproject%5D%20section%20with%20required%20fields%0A%20%20%20%20if%20'project'%20not%20in%20config%3A%0A%20%20%20%20%20%20%20%20config%5B'project'%5D%20%3D%20%7B%7D%0A%0A%20%20%20%20config%5B'project'%5D%5B'version'%5D%20%3D%20setup_metadata%5B'__version__'%5D%0A%20%20%20%20config%5B'project'%5D%5B'description'%5D%20%3D%20setup_metadata%5B'__description__'%5D%0A%20%20%20%20config%5B'project'%5D%5B'license'%5D%20%3D%20%7B'text'%3A%20setup_metadata%5B'__license__'%5D%7D%0A%0A%20%20%20%20%23%20Parse%20author%0A%20%20%20%20author_name%20%3D%20setup_metadata%5B'__author__'%5D.split('%3C')%5B0%5D.strip()%0A%20%20%20%20author_email%20%3D%20setup_metadata%5B'__author__'%5D.split('%3C')%5B1%5D.strip('%3E')%0A%20%20%20%20config%5B'project'%5D%5B'authors'%5D%20%3D%20%5B%7B'name'%3A%20author_name%2C%20'email'%3A%20author_email%7D%5D%0A%0A%20%20%20%20%23%20Add%20optional%20fields%20if%20present%0A%20%20%20%20if%20'__keywords__'%20in%20setup_metadata%20and%20setup_metadata%5B'__keywords__'%5D%3A%0A%20%20%20%20%20%20%20%20config%5B'project'%5D%5B'keywords'%5D%20%3D%20setup_metadata%5B'__keywords__'%5D%0A%0A%20%20%20%20if%20'__classifiers__'%20in%20setup_metadata%20and%20setup_metadata%5B'__classifiers__'%5D%3A%0A%20%20%20%20%20%20%20%20config%5B'project'%5D%5B'classifiers'%5D%20%3D%20setup_metadata%5B'__classifiers__'%5D%0A%0A%20%20%20%20%23%20Add%20project%20URLs%20if%20present%0A%20%20%20%20if%20any(k%20in%20setup_metadata%20for%20k%20in%20%5B'__repository__'%2C%20'__homepage__'%2C%20'__documentation__'%5D)%3A%0A%20%20%20%20%20%20%20%20config%5B'project'%5D%5B'urls'%5D%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20if%20'__repository__'%20in%20setup_metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20config%5B'project'%5D%5B'urls'%5D%5B'Repository'%5D%20%3D%20setup_metadata%5B'__repository__'%5D%0A%20%20%20%20%20%20%20%20if%20'__homepage__'%20in%20setup_metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20config%5B'project'%5D%5B'urls'%5D%5B'Homepage'%5D%20%3D%20setup_metadata%5B'__homepage__'%5D%0A%20%20%20%20%20%20%20%20if%20'__documentation__'%20in%20setup_metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20config%5B'project'%5D%5B'urls'%5D%5B'Documentation'%5D%20%3D%20setup_metadata%5B'__documentation__'%5D%0A%0A%20%20%20%20%23%20Write%20back%20using%20tomlkit%20to%20preserve%20formatting%0A%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20import%20tomlkit%0A%20%20%20%20%20%20%20%20with%20open(pyproject_path%2C%20'r')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20doc%20%3D%20tomlkit.load(f)%0A%0A%20%20%20%20%20%20%20%20%23%20Update%20with%20new%20values%0A%20%20%20%20%20%20%20%20if%20'project'%20not%20in%20doc%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20doc%5B'project'%5D%20%3D%20%7B%7D%0A%0A%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'version'%5D%20%3D%20setup_metadata%5B'__version__'%5D%0A%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'description'%5D%20%3D%20setup_metadata%5B'__description__'%5D%0A%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'license'%5D%20%3D%20%7B'text'%3A%20setup_metadata%5B'__license__'%5D%7D%0A%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'authors'%5D%20%3D%20%5B%7B'name'%3A%20author_name%2C%20'email'%3A%20author_email%7D%5D%0A%0A%20%20%20%20%20%20%20%20if%20'__keywords__'%20in%20setup_metadata%20and%20setup_metadata%5B'__keywords__'%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'keywords'%5D%20%3D%20setup_metadata%5B'__keywords__'%5D%0A%0A%20%20%20%20%20%20%20%20if%20'__classifiers__'%20in%20setup_metadata%20and%20setup_metadata%5B'__classifiers__'%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'classifiers'%5D%20%3D%20setup_metadata%5B'__classifiers__'%5D%0A%0A%20%20%20%20%20%20%20%20if%20any(k%20in%20setup_metadata%20for%20k%20in%20%5B'__repository__'%2C%20'__homepage__'%2C%20'__documentation__'%5D)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20'urls'%20not%20in%20doc%5B'project'%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'urls'%5D%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20'__repository__'%20in%20setup_metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'urls'%5D%5B'Repository'%5D%20%3D%20setup_metadata%5B'__repository__'%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20'__homepage__'%20in%20setup_metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'urls'%5D%5B'Homepage'%5D%20%3D%20setup_metadata%5B'__homepage__'%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20'__documentation__'%20in%20setup_metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc%5B'project'%5D%5B'urls'%5D%5B'Documentation'%5D%20%3D%20setup_metadata%5B'__documentation__'%5D%0A%0A%20%20%20%20%20%20%20%20with%20open(pyproject_path%2C%20'w')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20tomlkit.dump(doc%2C%20f)%0A%0A%20%20%20%20except%20ImportError%3A%0A%20%20%20%20%20%20%20%20%23%20Fallback%20if%20tomlkit%20not%20available%20-%20just%20append%20to%20file%0A%20%20%20%20%20%20%20%20print(%22%E2%9A%A0%EF%B8%8F%20%20tomlkit%20not%20available%2C%20using%20basic%20TOML%20writing%22)%0A%20%20%20%20%20%20%20%20import%20json%0A%20%20%20%20%20%20%20%20%23%20This%20is%20a%20simple%20fallback%20-%20you%20might%20want%20to%20use%20tomli-w%20instead%0A%20%20%20%20%20%20%20%20with%20open(pyproject_path%2C%20'a')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write(f%22%5Cn%23%20Updated%20by%20m-dev%5Cn%22)%0A%0A%20%20%20%20print(f%22%E2%9C%85%20Updated%20%7Bpyproject_path%7D%20with%20metadata%22)%0A%20%20%20%20return%20pyproject_path%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20write_module(%0A%20%20%20%20module_name%3A%20str%2C%20%20%20%20%20%20%20%20%23%20Name%20of%20the%20module%20(without%20.py)%0A%20%20%20%20setup_imports%3A%20list%2C%20%20%20%20%20%23%20Import%20statements%20from%20setup%20cell%0A%20%20%20%20exports%3A%20list%2C%20%20%20%20%20%20%20%20%20%20%20%23%20Exported%20function%2Fclass%20source%20code%0A%20%20%20%20output_file%3A%20str%20%20%20%20%20%20%20%20%20%23%20Path%20for%20output%20file%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20written%20file%0A%20%20%20%20%22Write%20Python%20module%20file%20with%20imports%20and%20exported%20code%22%0A%20%20%20%20with%20Path(output_file).open('w')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%23%20Write%20imports%0A%20%20%20%20%20%20%20%20if%20setup_imports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20imp%20in%20setup_imports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.write(imp%20%2B%20'%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write('%5Cn')%0A%0A%20%20%20%20%20%20%20%20%23%20Write%20exports%0A%20%20%20%20%20%20%20%20for%20export%20in%20exports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write(export%20%2B%20'%5Cn%5Cn')%0A%0A%20%20%20%20return%20output_file%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20write_init(%0A%20%20%20%20package_name%3A%20str%2C%20%20%20%20%20%20%20%23%20Package%20name%0A%20%20%20%20metadata%3A%20dict%2C%20%20%20%20%20%20%20%20%20%20%23%20Project%20metadata%20from%20setup%20cell%0A%20%20%20%20modules%3A%20list%2C%20%20%20%20%20%20%20%20%20%20%20%23%20List%20of%20module%20dicts%20from%20scan_notebooks%0A%20%20%20%20output_file%3A%20str%20%20%20%20%20%20%20%20%20%23%20Path%20to%20__init__.py%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20written%20file%0A%20%20%20%20%22Write%20package%20__init__.py%20with%20metadata%20and%20cross-module%20imports%20%22%0A%0A%20%20%20%20with%20Path(output_file).open('w')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%23%20Write%20package%20docstring%0A%20%20%20%20%20%20%20%20description%20%3D%20metadata.get('__description__'%2C%20'No%20description%20provided')%0A%20%20%20%20%20%20%20%20f.write(f'%22%22%22%7Bdescription%7D%22%22%22%5Cn%5Cn')%0A%0A%20%20%20%20%20%20%20%20%23%20Write%20metadata%0A%20%20%20%20%20%20%20%20f.write(f%22__version__%20%3D%20'%7Bmetadata%5B'__version__'%5D%7D'%5Cn%22)%0A%0A%20%20%20%20%20%20%20%20if%20'__author__'%20in%20metadata%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20author_name%20%3D%20metadata%5B'__author__'%5D.split('%3C')%5B0%5D.strip()%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write(f%22__author__%20%3D%20'%7Bauthor_name%7D'%5Cn%22)%0A%0A%20%20%20%20%20%20%20%20f.write('%5Cn')%0A%0A%20%20%20%20%20%20%20%20%23%20Collect%20all%20export%20names%20across%20modules%0A%20%20%20%20%20%20%20%20all_exports%20%3D%20%5B%5D%0A%0A%20%20%20%20%20%20%20%20%23%20Write%20imports%20from%20submodules%0A%20%20%20%20%20%20%20%20for%20module%20in%20modules%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Skip%20the%20config%20module%20(00_config%20or%20similar)%20-%20no%20exports%20usually%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20module%5B'name'%5D.startswith('00_')%20or%20not%20module%5B'export_names'%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20module%5B'export_names'%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20exports_str%20%3D%20'%2C%20'.join(module%5B'export_names'%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.write(f%22from%20.%7Bmodule%5B'name'%5D%7D%20import%20%7Bexports_str%7D%5Cn%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20all_exports.extend(module%5B'export_names'%5D)%0A%0A%20%20%20%20%20%20%20%20%23%20Write%20__all__%0A%20%20%20%20%20%20%20%20if%20all_exports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write('%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write('__all__%20%3D%20%5B%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20name%20in%20all_exports%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.write(f'%20%20%20%20%22%7Bname%7D%22%2C%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20f.write('%5D%5Cn')%0A%0A%20%20%20%20print(f%22%E2%9C%85%20Generated%20%7Boutput_file%7D%22)%0A%20%20%20%20return%20output_file%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Readme%20Extraction%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20extract_readme(%0A%20%20%20%20notebook_path%3A%20str%2C%20%20%20%20%20%20%23%20Path%20to%20the%20marimo%20notebook%20file%0A%20%20%20%20output_dir%3A%20str%2C%20%20%20%20%20%20%20%20%20%23%20Directory%20where%20README.md%20will%20be%20written%0A%20%20%20%20setup_metadata%3A%20dict%20%20%20%20%20%23%20Setup%20cell%20metadata%20for%20f-string%20substitution%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20written%20README.md%20file%2C%20or%20empty%20string%20if%20no%20readme%20cell%20found%0A%20%20%20%20%22Extract%20README%20from%20notebook%20cell%20marked%20with%20%23%7C%20readme%20and%20write%20to%20output%20directory%22%0A%0A%20%20%20%20source_code%20%3D%20Path(notebook_path).read_text()%0A%0A%20%20%20%20tree%20%3D%20ast.parse(source_code)%0A%20%20%20%20readme_contents%20%3D%20%5B%5D%0A%0A%20%20%20%20%23%20Check%20both%20regular%20cells%20(FunctionDef)%20and%20setup%20cells%20(With%20blocks)%0A%20%20%20%20for%20node%20in%20tree.body%3A%0A%20%20%20%20%20%20%20%20%23%20Check%20%40app.cell%20decorated%20functions%20(hidden%20or%20not)%0A%20%20%20%20%20%20%20%20if%20isinstance(node%2C%20ast.FunctionDef)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20func_source%20%3D%20ast.get_source_segment(source_code%2C%20node)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20func_source%20and%20'mo.md('%20in%20func_source%20and%20'%23%7C%20README'%20in%20func_source%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Extract%20the%20string%20content%20from%20mo.md(...)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20content%20%3D%20extract_mo_md_content(func_source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20content%20and%20'%23%7C%20README'%20in%20content%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines%20%3D%20content.split('%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20readme_text%20%3D%20'%5Cn'.join(line%20for%20line%20in%20lines%20if%20not%20line.strip().startswith('%23%7C%20README'))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20readme_contents.append(readme_text.strip())%0A%0A%20%20%20%20%20%20%20%20%23%20Check%20setup%20cell%20(with%20app.setup%3A)%0A%20%20%20%20%20%20%20%20elif%20isinstance(node%2C%20ast.With)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20stmt%20in%20node.body%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20isinstance(stmt%2C%20ast.Expr)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stmt_source%20%3D%20ast.get_source_segment(source_code%2C%20stmt)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20stmt_source%20and%20'mo.md('%20in%20stmt_source%20and%20'%23%7C%20README'%20in%20stmt_source%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20content%20%3D%20extract_mo_md_content(stmt_source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20content%20and%20'%23%7C%20README'%20in%20content%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines%20%3D%20content.split('%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20readme_text%20%3D%20'%5Cn'.join(line%20for%20line%20in%20lines%20if%20not%20line.strip().startswith('%23%7C%20README'))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20readme_contents.append(readme_text.strip())%0A%0A%20%20%20%20if%20len(readme_contents)%20%3D%3D%200%3A%0A%20%20%20%20%20%20%20%20print('%E2%9A%A0%EF%B8%8F%20%20Warning%3A%20No%20%23%7C%20README%20cell%20found.%20README.md%20will%20not%20be%20generated.')%0A%20%20%20%20%20%20%20%20print('%20%20%20For%20PyPI%20distribution%2C%20consider%20adding%20a%20cell%20with%20mo.md()%20containing%20%23%7C%20README')%0A%20%20%20%20%20%20%20%20return%20''%0A%0A%20%20%20%20if%20len(readme_contents)%20%3E%201%3A%0A%20%20%20%20%20%20%20%20print(f'%E2%9A%A0%EF%B8%8F%20%20Warning%3A%20Found%20%7Blen(readme_contents)%7D%20cells%20with%20%23%7C%20README%20marker.%20Using%20only%20the%20first%20one.')%0A%0A%20%20%20%20%23%20Substitute%20f-string%20variables%20from%20setup_metadata%0A%20%20%20%20readme_text%20%3D%20readme_contents%5B0%5D%0A%20%20%20%20for%20key%2C%20value%20in%20setup_metadata.items()%3A%0A%20%20%20%20%20%20%20%20readme_text%20%3D%20readme_text.replace(f'%7B%7B%7Bkey%7D%7D%7D'%2C%20str(value))%0A%0A%20%20%20%20readme_path%20%3D%20Path(output_dir)%20%2F%20'README.md'%0A%20%20%20%20readme_path.write_text(readme_text)%0A%0A%20%20%20%20print(f'%E2%9C%85%20README.md%20generated%20from%20notebook')%0A%20%20%20%20return%20str(readme_path)%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20extract_mo_md_content(source%3A%20str)%20-%3E%20str%3A%0A%20%20%20%20%22Extract%20the%20string%20content%20from%20a%20mo.md()%20call%2C%20handling%20r%2Ff%2Frf%20string%20prefixes%22%0A%20%20%20%20%23%20Find%20mo.md(%20and%20extract%20everything%20between%20the%20opening%20and%20closing%20quotes%0A%20%20%20%20import%20re%0A%20%20%20%20%23%20Match%20mo.md%20with%20optional%20whitespace%2C%20then%20capture%20string%20with%20various%20prefixes%0A%20%20%20%20pattern%20%3D%20r'mo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%22%22%22(.*%3F)%22%22%22%7Cmo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%5C'%5C'%5C'(.*%3F)%5C'%5C'%5C'%7Cmo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%22(.*%3F)%22%7Cmo%5C.md%5Cs*%5C(%5Cs*%5Brf%5D*%5C'(.*%3F)%5C''%0A%20%20%20%20match%20%3D%20re.search(pattern%2C%20source%2C%20re.DOTALL)%0A%20%20%20%20if%20match%3A%0A%20%20%20%20%20%20%20%20%23%20Return%20whichever%20group%20matched%20(triple%20quotes%20or%20single%20quotes)%0A%20%20%20%20%20%20%20%20for%20i%20in%20range(1%2C%20len(match.groups())%20%2B%201)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20match.group(i)%20is%20not%20None%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20match.group(i)%0A%20%20%20%20return%20''%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Build%20Package%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function(hide_code%3DTrue)%0Adef%20build_package(%0A%20%20%20%20notebooks_dir%3A%20str%20%3D%20'notebooks'%2C%20%20%20%20%20%23%20Directory%20with%20notebook%20files%0A%20%20%20%20output_dir%3A%20str%20%3D%20'src'%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Output%20directory%20for%20package%0A%20%20%20%20docstring_style%3A%20str%20%3D%20'nbdev'%20%20%20%20%20%20%20%20%23%20Docstring%20format%0A)%20-%3E%20str%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Path%20to%20built%20package%0A%20%20%20%20%22Build%20a%20Python%20package%20from%20marimo%20notebook(s)%22%0A%0A%20%20%20%20print(f%22%F0%9F%94%8D%20Scanning%20notebooks%20in%20%7Bnotebooks_dir%7D%2F%22)%0A%0A%20%20%20%20%23%20Scan%20all%20notebooks%0A%20%20%20%20scan_result%20%3D%20scan_notebooks(notebooks_dir%2C%20docstring_style)%0A%20%20%20%20metadata%20%3D%20scan_result%5B'metadata'%5D%0A%20%20%20%20readme_source%20%3D%20scan_result%5B'readme_source'%5D%0A%20%20%20%20modules%20%3D%20scan_result%5B'modules'%5D%0A%0A%20%20%20%20%23%20Get%20package%20name%20from%20metadata%20or%20pyproject.toml%0A%20%20%20%20package_name%20%3D%20metadata.get('__package_name__')%0A%20%20%20%20if%20not%20package_name%3A%0A%20%20%20%20%20%20%20%20%23%20Try%20to%20read%20from%20existing%20pyproject.toml%0A%20%20%20%20%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20import%20tomllib%0A%20%20%20%20%20%20%20%20%20%20%20%20with%20open('pyproject.toml'%2C%20'rb')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20config%20%3D%20tomllib.load(f)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20package_name%20%3D%20config%5B'project'%5D%5B'name'%5D%0A%20%20%20%20%20%20%20%20except%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20raise%20ValueError(%22No%20__package_name__%20in%20metadata%20and%20no%20pyproject.toml%20found%22)%0A%0A%20%20%20%20package_name%20%3D%20package_name.replace('-'%2C%20'_')%20%20%23%20Convert%20to%20valid%20Python%20identifier%0A%0A%20%20%20%20print(f%22%F0%9F%93%A6%20Building%20package%3A%20%7Bpackage_name%7D%22)%0A%0A%20%20%20%20%23%20Create%20output%20directory%20structure%0A%20%20%20%20package_dir%20%3D%20Path(output_dir)%20%2F%20package_name%0A%20%20%20%20package_dir.mkdir(parents%3DTrue%2C%20exist_ok%3DTrue)%0A%0A%20%20%20%20%23%20Write%20individual%20module%20files%0A%20%20%20%20for%20module%20in%20modules%3A%0A%20%20%20%20%20%20%20%20%23%20Skip%20config%20files%20(no%20exports%20typically)%0A%20%20%20%20%20%20%20%20if%20module%5B'name'%5D.startswith('00_')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20if%20module%5B'exports'%5D%3A%20%20%23%20Only%20write%20if%20there%20are%20exports%0A%20%20%20%20%20%20%20%20%20%20%20%20module_file%20%3D%20package_dir%20%2F%20f%22%7Bmodule%5B'name'%5D%7D.py%22%0A%20%20%20%20%20%20%20%20%20%20%20%20write_module(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module%5B'name'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module%5B'imports'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module%5B'exports'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20str(module_file)%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20print(f%22%20%20%E2%9C%85%20%7Bmodule%5B'name'%5D%7D.py%22)%0A%0A%20%20%20%20%23%20Write%20__init__.py%0A%20%20%20%20init_file%20%3D%20package_dir%20%2F%20'__init__.py'%0A%20%20%20%20write_init(package_name%2C%20metadata%2C%20modules%2C%20str(init_file))%0A%0A%20%20%20%20%23%20Update%20pyproject.toml%20with%20metadata%0A%20%20%20%20if%20Path('pyproject.toml').exists()%3A%0A%20%20%20%20%20%20%20%20update_pyproject_toml(metadata%2C%20'pyproject.toml')%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20print(%22%E2%9A%A0%EF%B8%8F%20%20No%20pyproject.toml%20found.%20Run%20'uv%20init'%20first.%22)%0A%0A%20%20%20%20%23%20Extract%20README%20if%20present%0A%20%20%20%20if%20readme_source%3A%0A%20%20%20%20%20%20%20%20extract_readme(readme_source%2C%20'.'%2C%20metadata)%0A%0A%20%20%20%20print(f%22%5Cn%E2%9C%85%20Package%20built%20in%20%7Boutput_dir%7D%2F%7Bpackage_name%7D%2F%22)%0A%20%20%20%20return%20str(output_dir)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Documentation%20Converter%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.function%0Adef%20add(%0A%20%20%20%20%23%20The%20first%20operand%0A%20%20%20%20a%3Aint%2C%0A%20%20%20%20%23%20This%20is%20the%20second%20of%20the%20operands%20to%20the%20*addition*%20operator.%0A%20%20%20%20%23%20Note%20that%20passing%20a%20negative%20value%20here%20is%20the%20equivalent%20of%20the%20*subtraction*%20operator.%0A%20%20%20%20b%3Aint%2C%0A)-%3Eint%3A%20%23%20The%20result%20is%20calculated%20using%20Python's%20builtin%20%60%2B%60%20operator.%0A%20%20%20%20%22Add%20%60a%60%20to%20%60b%60%22%0A%20%20%20%20return%20a%2Bb%0A%0A%0A%40app.function%0Adef%20convert_docstyle(func%2C%20target_style%3D'google'%2C%20include_signature%3DTrue)%3A%0A%20%20%20%20%22%22%22%0A%20%20%20%20Convert%20function%20documentation%20between%20different%20styles.%0A%0A%20%20%20%20Args%3A%0A%20%20%20%20%20%20%20%20func%3A%20The%20function%20to%20convert%20documentation%20for%0A%20%20%20%20%20%20%20%20target_style%3A%20One%20of%20'docments'%2C%20'google'%2C%20or%20'numpy'%0A%20%20%20%20%20%20%20%20include_signature%3A%20Whether%20to%20include%20the%20function%20signature%0A%0A%20%20%20%20Returns%3A%0A%20%20%20%20%20%20%20%20String%20representation%20in%20the%20target%20documentation%20style%0A%20%20%20%20%22%22%22%0A%20%20%20%20from%20inspect%20import%20signature%20as%20get_sig%0A%0A%20%20%20%20%23%20Extract%20all%20the%20information%20we%20need%0A%20%20%20%20docs_full%20%3D%20docments(func%2C%20full%3DTrue)%0A%20%20%20%20main_doc%20%3D%20docstring(func)%0A%20%20%20%20func_name%20%3D%20func.__name__%0A%20%20%20%20sig%20%3D%20get_sig(func)%0A%0A%20%20%20%20%23%20Separate%20return%20from%20parameters%0A%20%20%20%20params%20%3D%20%7Bk%3A%20v%20for%20k%2C%20v%20in%20docs_full.items()%20if%20k%20!%3D%20'return'%7D%0A%20%20%20%20return_info%20%3D%20docs_full.get('return'%2C%20%7B%7D)%0A%0A%20%20%20%20if%20target_style%20%3D%3D%20'docments'%3A%0A%20%20%20%20%20%20%20%20return%20format_docments_style(func_name%2C%20params%2C%20return_info%2C%20main_doc%2C%20include_signature)%0A%20%20%20%20elif%20target_style%20%3D%3D%20'google'%3A%0A%20%20%20%20%20%20%20%20return%20format_google_style(func_name%2C%20params%2C%20return_info%2C%20main_doc%2C%20include_signature%2C%20sig)%0A%20%20%20%20elif%20target_style%20%3D%3D%20'numpy'%3A%0A%20%20%20%20%20%20%20%20return%20format_numpy_style(func_name%2C%20params%2C%20return_info%2C%20main_doc%2C%20include_signature%2C%20sig)%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20raise%20ValueError(f%22Unknown%20style%3A%20%7Btarget_style%7D.%20Use%20'docments'%2C%20'google'%2C%20or%20'numpy'%22)%0A%0A%0A%40app.function%0Adef%20format_docments_style(func_name%2C%20params%2C%20return_info%2C%20main_doc%2C%20include_signature)%3A%0A%20%20%20%20%22%22%22Format%20in%20docments%20style%20(inline%20comments)%22%22%22%0A%20%20%20%20lines%20%3D%20%5Bf%22def%20%7Bfunc_name%7D(%22%5D%0A%0A%20%20%20%20for%20i%2C%20(name%2C%20info)%20in%20enumerate(params.items())%3A%0A%20%20%20%20%20%20%20%20anno%20%3D%20f%22%3A%7Binfo%5B'anno'%5D.__name__%7D%22%20if%20info%5B'anno'%5D%20!%3D%20empty%20and%20hasattr(info%5B'anno'%5D%2C%20'__name__')%20else%20%22%22%0A%20%20%20%20%20%20%20%20default%20%3D%20f%22%3D%7Brepr(info%5B'default'%5D)%7D%22%20if%20info%5B'default'%5D%20!%3D%20empty%20else%20%22%22%0A%20%20%20%20%20%20%20%20comment%20%3D%20f%22%20%20%23%20%7Binfo%5B'docment'%5D%7D%22%20if%20info%5B'docment'%5D%20and%20info%5B'docment'%5D%20!%3D%20empty%20else%20%22%22%0A%20%20%20%20%20%20%20%20comma%20%3D%20%22%2C%22%20if%20i%20%3C%20len(params)%20-%201%20else%20%22%22%0A%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bname%7D%7Banno%7D%7Bdefault%7D%7Bcomma%7D%7Bcomment%7D%22)%0A%0A%20%20%20%20ret_anno%20%3D%20f%22-%3E%7Breturn_info%5B'anno'%5D.__name__%7D%22%20if%20return_info.get('anno')%20!%3D%20empty%20and%20hasattr(return_info.get('anno')%2C%20'__name__')%20else%20%22%22%0A%20%20%20%20ret_comment%20%3D%20f%22%20%20%23%20%7Breturn_info%5B'docment'%5D%7D%22%20if%20return_info.get('docment')%20and%20return_info%5B'docment'%5D%20!%3D%20empty%20else%20%22%22%0A%20%20%20%20lines.append(f%22)%7Bret_anno%7D%3A%7Bret_comment%7D%22)%0A%0A%20%20%20%20if%20main_doc%3A%0A%20%20%20%20%20%20%20%20lines.append(f'%20%20%20%20%22%7Bmain_doc%7D%22')%0A%0A%20%20%20%20return%20'%5Cn'.join(lines)%0A%0A%0A%40app.function%0Adef%20format_google_style(func_name%2C%20params%2C%20return_info%2C%20main_doc%2C%20include_signature%2C%20sig)%3A%0A%20%20%20%20%22%22%22Format%20in%20Google%20style%22%22%22%0A%20%20%20%20lines%20%3D%20%5B%5D%0A%0A%20%20%20%20if%20include_signature%3A%0A%20%20%20%20%20%20%20%20lines.append(f%22def%20%7Bfunc_name%7D%7Bsig%7D%3A%22)%0A%0A%20%20%20%20%23%20Main%20docstring%0A%20%20%20%20lines.append('%20%20%20%20%22%22%22'%20%2B%20(main_doc%20or%20%22%22))%0A%20%20%20%20lines.append(%22%22)%0A%0A%20%20%20%20%23%20Args%20section%0A%20%20%20%20if%20params%3A%0A%20%20%20%20%20%20%20%20lines.append(%22%20%20%20%20Args%3A%22)%0A%20%20%20%20%20%20%20%20for%20name%2C%20info%20in%20params.items()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20type_str%20%3D%20f%22%20(%7Binfo%5B'anno'%5D.__name__%7D)%22%20if%20info%5B'anno'%5D%20!%3D%20empty%20and%20hasattr(info%5B'anno'%5D%2C%20'__name__')%20else%20%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20default_str%20%3D%20f%22%2C%20optional%2C%20default%3D%7Brepr(info%5B'default'%5D)%7D%22%20if%20info%5B'default'%5D%20!%3D%20empty%20else%20%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20desc%20%3D%20info.get('docment'%2C%20'')%20or%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%20%20%20%20%7Bname%7D%7Btype_str%7D%3A%20%7Bdesc%7D%7Bdefault_str%7D%22)%0A%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%0A%20%20%20%20%23%20Returns%20section%0A%20%20%20%20if%20return_info.get('anno')%20!%3D%20empty%20or%20return_info.get('docment')%3A%0A%20%20%20%20%20%20%20%20lines.append(%22%20%20%20%20Returns%3A%22)%0A%20%20%20%20%20%20%20%20ret_type%20%3D%20return_info.get('anno')%0A%20%20%20%20%20%20%20%20type_str%20%3D%20f%22%7Bret_type.__name__%7D%3A%20%22%20if%20ret_type%20!%3D%20empty%20and%20hasattr(ret_type%2C%20'__name__')%20else%20%22%22%0A%20%20%20%20%20%20%20%20ret_desc%20%3D%20return_info.get('docment'%2C%20'')%20or%20''%0A%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%20%20%20%20%7Btype_str%7D%7Bret_desc%7D%22)%0A%0A%20%20%20%20lines.append('%20%20%20%20%22%22%22')%0A%20%20%20%20return%20'%5Cn'.join(lines)%0A%0A%0A%40app.function%0Adef%20format_numpy_style(func_name%2C%20params%2C%20return_info%2C%20main_doc%2C%20include_signature%2C%20sig)%3A%0A%20%20%20%20%22%22%22Format%20in%20NumPy%20style%22%22%22%0A%20%20%20%20lines%20%3D%20%5B%5D%0A%0A%20%20%20%20if%20include_signature%3A%0A%20%20%20%20%20%20%20%20lines.append(f%22def%20%7Bfunc_name%7D%7Bsig%7D%3A%22)%0A%0A%20%20%20%20%23%20Main%20docstring%0A%20%20%20%20lines.append('%20%20%20%20%22%22%22'%20%2B%20(main_doc%20or%20%22%22))%0A%20%20%20%20lines.append(%22%22)%0A%0A%20%20%20%20%23%20Parameters%20section%0A%20%20%20%20if%20params%3A%0A%20%20%20%20%20%20%20%20lines.append(%22%20%20%20%20Parameters%22)%0A%20%20%20%20%20%20%20%20lines.append(%22%20%20%20%20----------%22)%0A%20%20%20%20%20%20%20%20for%20name%2C%20info%20in%20params.items()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20type_str%20%3D%20info%5B'anno'%5D.__name__%20if%20info%5B'anno'%5D%20!%3D%20empty%20and%20hasattr(info%5B'anno'%5D%2C%20'__name__')%20else%20%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Bname%7D%20%3A%20%7Btype_str%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20desc%20%3D%20info.get('docment'%2C%20'')%20or%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20desc%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Handle%20multi-line%20descriptions%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20desc_line%20in%20desc.split('%5Cn')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%20%20%20%20%7Bdesc_line%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20info%5B'default'%5D%20!%3D%20empty%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%20%20%20%20(default%3A%20%7Brepr(info%5B'default'%5D)%7D)%22)%0A%20%20%20%20%20%20%20%20lines.append(%22%22)%0A%0A%20%20%20%20%23%20Returns%20section%0A%20%20%20%20if%20return_info.get('anno')%20!%3D%20empty%20or%20return_info.get('docment')%3A%0A%20%20%20%20%20%20%20%20lines.append(%22%20%20%20%20Returns%22)%0A%20%20%20%20%20%20%20%20lines.append(%22%20%20%20%20-------%22)%0A%20%20%20%20%20%20%20%20ret_type%20%3D%20return_info.get('anno')%0A%20%20%20%20%20%20%20%20type_str%20%3D%20ret_type.__name__%20if%20ret_type%20!%3D%20empty%20and%20hasattr(ret_type%2C%20'__name__')%20else%20%22%22%0A%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%7Btype_str%7D%22)%0A%20%20%20%20%20%20%20%20ret_desc%20%3D%20return_info.get('docment'%2C%20'')%20or%20''%0A%20%20%20%20%20%20%20%20if%20ret_desc%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20desc_line%20in%20ret_desc.split('%5Cn')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines.append(f%22%20%20%20%20%20%20%20%20%7Bdesc_line%7D%22)%0A%0A%20%20%20%20lines.append('%20%20%20%20%22%22%22')%0A%20%20%20%20return%20'%5Cn'.join(lines)%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20%23%20Convert%20to%20Google%20style%0A%20%20%20%20print(convert_docstyle(add%2C))%0A%20%20%20%20print(%22%5Cn%22%20%2B%20%22-%20%22*50%20%2B%20%22%5Cn%22)%0A%0A%20%20%20%20%23%20Convert%20to%20NumPy%20style%0A%20%20%20%20print(convert_docstyle(add%2C%20'numpy'))%0A%20%20%20%20print(%22%5Cn%22%20%2B%20%22-%20%22*50%20%2B%20%22%5Cn%22)%0A%0A%20%20%20%20%23%20Convert%20to%20docments%20style%0A%20%20%20%20print(convert_docstyle(add%2C%20'docments'))%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(getsource%2C%20getsourcelines%2C%20isfunction)%3A%0A%20%20%20%20def%20convert_library_docstyle(src_path%2C%20target_style%3D'numpy'%2C%20backup%3DTrue)%3A%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20Convert%20the%20documentation%20style%20of%20all%20functions%20in%20a%20library's%20src%2F%20directory%20to%20the%20target%20style.%0A%0A%20%20%20%20%20%20%20%20Args%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20src_path%3A%20Path%20to%20the%20src%2F%20directory.%0A%20%20%20%20%20%20%20%20%20%20%20%20target_style%3A%20The%20target%20documentation%20style%20('docments'%2C%20'google'%2C%20or%20'numpy').%0A%20%20%20%20%20%20%20%20%20%20%20%20backup%3A%20Whether%20to%20create%20backup%20files%20before%20modifying.%0A%20%20%20%20%20%20%20%20%22%22%22%0A%20%20%20%20%20%20%20%20parent_path%20%3D%20os.path.dirname(os.path.abspath(src_path))%0A%20%20%20%20%20%20%20%20package_name%20%3D%20os.path.basename(src_path)%0A%20%20%20%20%20%20%20%20sys.path.insert(0%2C%20parent_path)%0A%0A%20%20%20%20%20%20%20%20for%20root%2C%20dirs%2C%20files%20in%20os.walk(src_path)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20file%20in%20files%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20file.endswith('.py')%20or%20file.startswith('__')%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rel_path%20%3D%20os.path.relpath(root%2C%20src_path)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module_parts%20%3D%20%5Bpackage_name%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20rel_path%20!%3D%20'.'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module_parts.extend(rel_path.split(os.sep))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module_parts.append(file%5B%3A-3%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module_str%20%3D%20'.'.join(module_parts)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20module%20%3D%20importlib.import_module(module_str)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20except%20Exception%20as%20e%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print(f%22Failed%20to%20import%20%7Bmodule_str%7D%3A%20%7Be%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20funcs%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20name%20in%20dir(module)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20obj%20%3D%20getattr(module%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20isfunction(obj)%20and%20obj.__module__%20%3D%3D%20module.__name__%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20_%2C%20lineno%20%3D%20getsourcelines(obj)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20funcs.append((obj%2C%20name%2C%20lineno))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20except%20Exception%20as%20e%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print(f%22Failed%20to%20get%20source%20lines%20for%20%7Bname%7D%20in%20%7Bmodule_str%7D%3A%20%7Be%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20funcs%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20file_path%20%3D%20os.path.join(root%2C%20file)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20backup%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shutil.copy(file_path%2C%20file_path%20%2B%20'.bak')%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20with%20open(file_path%2C%20'r')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20file_lines%20%3D%20f.readlines()%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Sort%20by%20lineno%20descending%20to%20process%20from%20bottom%20to%20top%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20funcs.sort(key%3Dlambda%20x%3A%20x%5B2%5D%2C%20reverse%3DTrue)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20obj%2C%20name%2C%20lineno%20in%20funcs%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func_source%20%3D%20getsource(obj)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tree%20%3D%20ast.parse(func_source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func_def%20%3D%20tree.body%5B0%5D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Handle%20decorators%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20decorators%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20dec%20in%20func_def.decorator_list%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dec_source%20%3D%20'%40'%20%2B%20ast.unparse(dec)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20decorators.append(dec_source)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Determine%20if%20async%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20is_async%20%3D%20isinstance(func_def%2C%20ast.AsyncFunctionDef)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Get%20converted%20header%20(without%20indent)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20new_header%20%3D%20convert_docstyle(obj%2C%20target_style%2C%20include_signature%3DTrue)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Adjust%20for%20async%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20is_async%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20new_header%20%3D%20new_header.replace('def%20'%2C%20'async%20def%20'%2C%201)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Get%20func%20indent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lines%20%3D%20func_source.splitlines()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func_indent_str%20%3D%20lines%5B0%5D%5B%3Alen(lines%5B0%5D)%20-%20len(lines%5B0%5D.lstrip())%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func_indent%20%3D%20len(func_indent_str)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Indent%20decorators%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20indented_decorators%20%3D%20%5Bfunc_indent_str%20%2B%20d%20for%20d%20in%20decorators%5D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Indent%20new_header%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20indented_header_lines%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20line%20in%20new_header.splitlines()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20indented_header_lines.append(func_indent_str%20%2B%20line)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Combine%20decorators%20and%20header%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20full_header_lines%20%3D%20indented_decorators%20%2B%20indented_header_lines%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20full_header%20%3D%20'%5Cn'.join(full_header_lines)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Get%20body%20AST%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20body_start%20%3D%201%20if%20(len(func_def.body)%20%3E%200%20and%20isinstance(func_def.body%5B0%5D%2C%20ast.Expr)%20and%20isinstance(func_def.body%5B0%5D.value%2C%20ast.Constant)%20and%20isinstance(func_def.body%5B0%5D.value.value%2C%20str))%20else%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20body_ast%20%3D%20func_def.body%5Bbody_start%3A%5D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Unparse%20body%20with%20proper%20indent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20body_indent_str%20%3D%20func_indent_str%20%2B%20'%20%20%20%20'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20body_lines%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20node%20in%20body_ast%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20node_source%20%3D%20ast.unparse(node)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20line%20in%20node_source.splitlines()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20body_lines.append(body_indent_str%20%2B%20line)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20body_str%20%3D%20'%5Cn'.join(body_lines)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Full%20new%20source%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20new_func_source%20%3D%20full_header%20%2B%20'%5Cn'%20%2B%20body_str%20%2B%20'%5Cn'%20%20%23%20Add%20trailing%20newline%20for%20safety%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Replace%20in%20file_lines%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func_lines%2C%20_%20%3D%20getsourcelines(obj)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20start%20%3D%20lineno%20-%201%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%20%3D%20start%20%2B%20len(func_lines)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20replacement%20%3D%20%5Bl%20%2B%20'%5Cn'%20for%20l%20in%20new_func_source.splitlines()%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20file_lines%5Bstart%3Aend%5D%20%3D%20replacement%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20except%20Exception%20as%20e%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print(f%22Failed%20to%20convert%20%7Bname%7D%20in%20%7Bmodule_str%7D%3A%20%7Be%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Write%20back%20the%20file%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20with%20open(file_path%2C%20'w')%20as%20f%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.writelines(file_lines)%0A%0A%20%20%20%20%23%20Test%20the%20function%20on%20src%2Fm_dev%0A%20%20%20%20print(%22%F0%9F%A7%AA%20Testing%20convert_library_docstyle%20on%20src%2Fm_dev%22)%0A%20%20%20%20print(%22%3D%22%20*%2060)%0A%20%20%20%20convert_library_docstyle('src%2Fm_dev'%2C%20target_style%3D'numpy'%2C%20backup%3DTrue)%0A%20%20%20%20print(%22%3D%22%20*%2060)%0A%20%20%20%20print(%22%E2%9C%85%20Conversion%20complete!%20Check%20src%2Fm_dev%20for%20updated%20files%22)%0A%20%20%20%20print(%22%F0%9F%92%BE%20Backup%20files%20saved%20with%20.bak%20extension%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(column%3D1%2C%20hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Testing%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%23%23%20Build%20Package%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20build_package(%22.%2Fnotebooks%22%2C%20output_dir%3D%22src%22%2C%20docstring_style%3D%22nbdev%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(%0A%20%20%20%20%20%20%20%20r%22%22%22%0A%20%20%20%20to%20add%20to%20pypi%20run%20%0A%0A%20%20%20%20%60%60%60%0A%20%20%20%20uv%20build%0A%20%20%20%20%60%60%60%0A%0A%20%20%20%20%23%20Test%20PyPi%0A%20%20%20%20%60%60%60%0A%20%20%20%20uv%20publish%20--publish-url%20https%3A%2F%2Ftest.pypi.org%2Flegacy%2F%20dist%2F*%0A%20%20%20%20%60%60%60%0A%0A%20%20%20%20%23%20Real%20PyPi%0A%20%20%20%20%60%60%60%0A%20%20%20%20uv%20publish%20--token%20pypi-...%20dist%2F*%0A%20%20%20%20%60%60%60%0A%20%20%20%20%22%22%22%0A%20%20%20%20)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20_todo_items%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Normalize%20and%20Restructure%20NBDev%20Deocs%20-%3E%20more%20standard%20documentation%22%2C%20%22status%22%3A%20True%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Extract%20README.md%20from%20notebook%22%2C%20%22status%22%3A%20True%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Integrate%20CLI%20for%20init%2C%20test%2C%20and%20mkdocs%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Static%20Docs%20Generation%20with%20no%20dependencies%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Better%20testing%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Better%20PyPI%20integration%22%2C%20%22status%22%3A%20False%7D%2C%0A%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Generate%20PyPI%20setup%20thing%20from%20marimo%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Enhance%20Pyproject.toml%20with%20repo.%20and%20other%20good%20info%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Multi%20notebook%20support%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22GitHub%20Actions%20Support%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22item%22%3A%20%22Clean%20up%20os.path%20and%20Path%20-%20use%20Path%20throughout%22%2C%20%22status%22%3A%20False%7D%2C%0A%20%20%20%20%5D%0A%0A%20%20%20%20todo_checklist%20%3D%20mo.md(f%22%22%22%0A%20%20%20%20%23%23%20%F0%9F%93%8B%20Package%20Development%20TODOs%0A%0A%20%20%20%20%7Bmo.vstack(%5B%0A%20%20%20%20%20%20%20%20mo.hstack(%5Bmo.ui.checkbox(value%3Dtodo%5B%22status%22%5D)%2C%20mo.md(f%22**%7Btodo%5B'item'%5D%7D**%22)%5D%2C%20align%3D%22center%22%2C%20justify%3D%22start%22)%20%0A%20%20%20%20%20%20%20%20for%20todo%20in%20_todo_items%0A%20%20%20%20%5D)%7D%0A%20%20%20%20%22%22%22)%0A%0A%20%20%20%20todo_checklist%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20return%0A%0A%0Aif%20__name__%20%3D%3D%20%22__main__%22%3A%0A%20%20%20%20app.run()%0A
</marimo-code>

<marimo-code-hash hidden="">7df3bbdb042d562909e94c7e889802da8989815bc7b675bb69b7242a93c7c8d1</marimo-code-hash>
</body>
</html>
